<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<meta name="generator" content=
"HTML Tidy for HTML5 for Linux version 5.2.0" />
<meta charset="utf-8" />
<title>Web of Things (WoT) Thing Description</title>

<script src="https://www.w3.org/Tools/respec/respec-w3c-common"
class="remove">
</script>
<script class='remove'>
<![CDATA[
          var respecConfig = {
              specStatus:     "ED"
            , processVersion: 2017
            , shortName:      "wot-thing-description"
            , copyrightStart: 2017
            , noLegacyStyle:  true
            , inlineCSS:      true
            , noIDLIn:        true
            , format:         "markdown"
            , wg:             "Web of Things Working Group"
            , wgURI:          "https://www.w3.org/WoT/WG/"
            , wgPublicList:   "public-wot-wg"
            , edDraftURI:     "https://w3c.github.io/wot-thing-description/"
            , githubAPI:      "https://api.github.com/repos/w3c/wot-thing-description"
            , issueBase:      "https://www.github.com/w3c/wot-thing-description/issues"
            , editors: [
                {
                  name:       "Sebastian Kaebisch"
                , w3cid:      "43064"
                , company:    "Siemens AG"
                , companyURL: "https://www.siemens.com/"
                }
              , {
                  name:       "Takuki Kamiya"
                , w3cid:      "29376"
                , company:    "Fujitsu Laboratories of America, Inc."
                , companyURL: "https://www.fujitsu.com/"
                }
              ]
            , localBiblio: {
                "JSON-SCHEMA-VALIDATION": {
                  title:    "JSON Schema Validation: A Vocabulary for Structural Validation of JSON"
                , href:     "https://tools.ietf.org/html/draft-handrews-json-schema-validation-00"
                , authors: [
                    "Austin Wright"
                  , "Henry Andrews"
                  , "Geraint Luff"
                  ]
                , status:   "Internet-Draft"
                , publisher:  "IETF"
                }
              , "JSON-SCHEMA-CORE": {
                  title:    "JSON Schema: A Media Type for Describing JSON Documents"
                , href:     "https://tools.ietf.org/html/draft-handrews-json-schema-00"
                , authors:  [
                    "Austin Wright"
                  , "Henry Andrews"
                  ]
                , status:    "Internet-Draft"
                , publisher: "IETF"
                }
              , "OPENAPI": {
                  title:    "OpenAPI Specification: Version 3.0.1"
                , href:     "https://swagger.io/specification/"
                , authors:  [
                    "Darrel Miller"
                  , "Jason Harmon"
                  , "Jeremy Whitlock"
                  , "Kris Hahn"
                  , "Marsh Gardiner"
                  , "Mike Ralphson"
                  , "Rob Dolin"
                  , "Ron Ratovsky"
                  , "Tony Tam"
                  ]
                , publisher: "OpenAPI Initiative, Linux Foundation"
                , date: "7 December 2017"
                }
              , "SemVer": {
                  title:    "Semantic Versioning 2.0.0"
                , href:     "https://semver.org/"
                , authors:  ["Tom Preston-Werner"]
                , date: "26 December 2017"
                }
              , "BCP47": {
                  title:    "Tags for Identifying Languages"
                , href:     "https://tools.ietf.org/html/bcp47"
                , authors:  [
                    "A. Phillips"
                  , "M. Davis"
                  ]
                , date: "2009"
                , status:    "Request for Comments"
                , publisher: "IETF"
                }
              , "MEDIATYPES": {
                  title:    "Media Types"
                , href:     "https://www.iana.org/assignments/media-types/media-types.xhtml"
                , publisher: "IANA"
                }
              , "WOT-ARCHITECTURE" : {
                  title: "Web of Things Architecture"
                , href: "https://w3c.github.io/wot-architecture/"
                , authors:  [
                    "Kazuo Kajimoto"
                  , "Matthias Kovatsch"
                  , "Uday Davuluru"
                  ]
                , publisher: "W3C"
                , date: "20 August 2017"
                }
              , "WOT-SECURITY-CONSIDERATIONS" : {
                title: "Web of Things Security and Privacy Considerations"
                , href: "https://w3c.github.io/wot-security/"
                , authors:  [
                  , "Michael McCool"
                  , "Elena Reshetova"
                  ]
                , publisher: "W3C"
                , date: "28 August 2017"
                }
              , "WOT-SECURITY-BEST-PRACTICES" : {
                title: "Web of Things Security and Privacy Best Practices (WIP)"
                , href: "https://github.com/w3c/wot-security/blob/master/wot-security-best-practices.md"
                , authors:  [
                  , "Michael McCool"
                  , "Elena Reshetova"
                  ]
                , publisher: "W3C"
                , date: "WIP"
                }
                  , "WOT-PROTOCOL-BINDING" : {
                  title: "Web of Things Protocol Binding Templates"
                , href: "https://w3c.github.io/wot-binding-templates/"
                , authors:  [
                    "Michael Koster"
                  ]
                , publisher: "W3C"
                , date: "12 January 2018"
                }
              }
            , otherLinks: [
                {
                  key: "Contributors"
                , data: [
                    {
                      value: "In the GitHub repository"
                    , href: "https://github.com/w3c/wot-thing-description/graphs/contributors"
                    }
                  ]
                }
              , {
                  key: "Repository",
                  data: [
                    {
                      value: "We are on GitHub"
                    , href: "https://github.com/w3c/wot-thing-description/"
                    }
                  , {
                      value: "File a bug"
                    , href: "https://github.com/w3c/wot-thing-description/issues"
                    }
                  ]
                }
              ]
            };
]]>
</script>
<style>
<![CDATA[
.example {
                border-color: #EA1252;
                background: #FEF11E;
                counter-increment: example;
                overflow: auto;
                clear: both;
        }
]]>
</style>
<!-- BEGIN EXTRA TABS -->

<script>
<![CDATA[
  // Add example button selection logic
  document.addEventListener("DOMContentLoaded", () => {
    for (const button of document.querySelectorAll(".ds-selector-tabs .selectors button")) {
      button.onclick = () => {
        const ex = button.closest(".ds-selector-tabs");
        ex.querySelector("button.selected").classList.remove("selected");
        ex.querySelector(".selected").classList.remove("selected");
        button.classList.add('selected');
        ex.querySelector("." + button.dataset.selects).classList.add("selected");
      }
    }
  })
]]>
</script>
<style>
<![CDATA[
  /* example tab selection */
  .ds-selector-tabs {
    padding-bottom: 2em;
  }
  .ds-selector-tabs .selectors {
    padding: 0;
    border-bottom: 1px solid #ccc;
    height: 28px;
  }
  .ds-selector-tabs .selectors button {
    display: inline-block;
    min-width: 54px;
    text-align: center;
    font-size: 11px;
    font-weight: bold;
    height: 27px;
    padding: 0 8px;
    line-height: 27px;
    transition: all,0.218s;
    border-top-right-radius: 2px;
    border-top-left-radius: 2px;
    color: #666;
    border: 1px solid transparent;
  }
  .ds-selector-tabs .selectors button:first-child {
    margin-left: 2px;
  }
  .ds-selector-tabs .selectors button.selected {
    color: #202020 !important;
    border: 1px solid #ccc;
    border-bottom: 1px solid #fff !important;
  }
  .ds-selector-tabs .selectors button:hover {
    background-color: transparent;
    color: #202020;
    cursor: pointer;
  }
  .ds-selector-tabs pre, .ds-selector-tabs table {
    display: none;
  }
  .ds-selector-tabs pre.selected, .ds-selector-tabs table.selected {
    display: block;
  }
  a.playground {
    display: inline-block;
    width: 150px;
    border: 1px solid transparent;
    border-top-right-radius: 2px;
    border-top-left-radius: 2px;
    background-color: rgb(192, 192, 192);
    text-decoration: none;
    font-size: 13px;
    margin-bottom: 10px;
  }
  a[href].playground {
    padding: 4px 0 3px 8px;
    border-bottom: none;
    text-decoration: none;
    color: #666;
  }
]]>
</style>
<!-- END EXTRA TABS -->
<style type='text/css'>
.diff-old-a {
  font-size: smaller;
  color: red;
}

.diff-new { background-color: yellow; }
.diff-chg { background-color: lime; }
.diff-new:before,
.diff-new:after
    { content: "\2191" }
.diff-chg:before, .diff-chg:after
    { content: "\2195" }
.diff-old { text-decoration: line-through; background-color: #FBB; }
.diff-old:before,
.diff-old:after
    { content: "\2193" }
:focus { border: thin red solid}
</style>
</head>
<body>
<del class="diff-old">Web
of
Things
(WoT)
Thing
Description
W3C
Working
Draft
21
October
2018
This
version:
https://www.w3.org/TR/2018/WD-wot-thing-description-20181021/
Latest
published
version:
https://www.w3.org/TR/wot-thing-description/
Latest
editor's
draft:
https://w3c.github.io/wot-thing-description/
Previous
version:
https://www.w3.org/TR/2018/WD-wot-thing-description-20180405/
Editors:
Sebastian
Kaebisch
(
Siemens
AG
)
Takuki
Kamiya
(
Fujitsu
Laboratories
of
America,
Inc.
)
Contributors:
In
the
GitHub
repository
Repository:
We
are
on
GitHub
File
a
bug
Copyright
©
2017-2018
W3C
®
(
MIT
,
ERCIM
,
Keio
,
Beihang
).
W3C
liability
,
trademark
and
permissive
document
license
rules
apply.
Editor's
note
:
First
draft
based
on
Simplified
TD
This
is
the
first
draft
of
the
new
simplified
TD
approach
based
on
JSON-LD
1.1.
Some
definitions
are
not
finished
yet
and
are
still
in
progress.
A
stable
Thing
Description
deliverable
version
based
on
JSON-LD
1.0
can
be
found
here
.
Abstract
</del>
<section id="abstract">
<p>
This
document
describes
a
formal
model
and
a
common
representation
for
a
Web
of
Things
(WoT)
Thing
Description.
A
Thing
Description
describes
the
metadata
and
interfaces
of
Things,
where
a
Thing
is
an
abstraction
of
a
physical
or
virtual
entity
that
provides
interactions
to
and
participates
in
the
Web
of
Things.
Thing
Descriptions
provide
a
set
of
interactions
based
on
a
small
vocabulary
that
makes
it
possible
both
to
integrate
diverse
devices
and
to
allow
diverse
applications
to
interoperate.
Thing
Descriptions,
by
default,
are
encoded
in
a
JSON
format
that
also
allows
JSON-LD
processing.
The
latter
provides
a
powerful
foundation
to
represent
knowledge
about
Things
in
a
machine-understandable
way.
A
Thing
Description
instance
can
be
hosted
by
the
Thing
itself
or
hosted
externally
when
a
Thing
has
resource
restrictions
(e.g.,
limited
memory
space)
or
when
a
Web
of
Things-compatible
legacy
device
is
retrofitted
with
a
Thing
Description.
</p>
</section>
<del class="diff-old">Status
of
This
Document
This
section
describes
the
status
of
this
document
at
the
time
of
its
publication.
Other
documents
may
supersede
this
document.
A
list
of
current
W3C
publications
and
the
latest
revision
of
this
technical
report
can
be
found
in
the
W3C
technical
reports
index
at
https://www.w3.org/TR/.
</del>
<section id="sotd">
<p>
Implementers
need
to
be
aware
that
this
specification
is
considered
unstable.
Vendors
interested
in
implementing
this
specification
before
it
eventually
reaches
the
Candidate
Recommendation
phase
should
subscribe
to
the
<a href= "https://github.com/w3c/wot-thing-description">
repository
</a>
and
take
part
in
the
discussions.
</p>
<del class="diff-old">Editor's
note
:
The
W3C
WoT
WG
is
asking
for
feedback
Please
contribute
to
this
draft
using
the
GitHub
Issue
feature
of
the
WoT
Thing
Description
repository.
For
feedback
on
security
and
privacy
considerations,
please
use
the
WoT
Security
and
Privacy
Issues,
as
security
and
privacy
is
cross-cutting
over
all
our
documents.
This
document
was
published
by
the
Web
of
Things
Working
Group
as
a
Working
Draft.
This
document
is
intended
to
become
a
W3C
Recommendation.
Comments
regarding
this
document
are
welcome.
Please
send
them
to
public-wot-wg@w3.org
(
archives
).
Changes
from
the
previous
publication
can
be
found
in
Appendix
B
.
A
diff-marked
version
of
this
document
is
also
available
for
comparison
purposes.
Publication
as
a
Working
Draft
does
not
imply
endorsement
by
the
W3C
Membership.
This
is
a
draft
document
and
may
be
updated,
replaced
or
obsoleted
by
other
documents
at
any
time.
It
is
inappropriate
to
cite
this
document
as
other
than
work
in
progress.
This
document
was
produced
by
a
group
operating
under
the
W3C
Patent
Policy
.
W3C
maintains
a
public
list
of
any
patent
disclosures
made
in
connection
with
the
deliverables
of
the
group;
that
page
also
includes
instructions
for
disclosing
a
patent.
An
individual
who
has
actual
knowledge
of
a
patent
which
the
individual
believes
contains
Essential
Claim(s)
must
disclose
the
information
in
accordance
with
section
6
of
the
W3C
Patent
Policy
.
This
document
is
governed
by
the
1
February
2018
W3C
Process
Document
.
</del>
</section>
<del class="diff-old">Table
of
Contents
1.
Introduction
2.
Terminology
3.
Namespaces
4.
Conformance
5.
Information
Model
5.1
Overview
5.2
Core
Vocabulary
Definition
5.2.1
Thing
5.2.2
InteractionPattern
5.2.3
Property
5.2.4
Action
5.2.5
Event
5.2.6
Form
5.2.7
Link
5.3
Data
Schema
Vocabulary
Definition
5.3.1
DataSchema
5.3.2
ArraySchema
5.3.3
ObjectSchema
5.3.4
BooleanSchema
5.3.5
NumberSchema
5.3.6
StringSchema
5.3.7
IntegerSchema
5.4
Security
Vocabulary
Definition
5.4.1
SecurityScheme
5.4.2
NoSecurityScheme
5.4.3
BasicSecurityScheme
5.4.4
CertSecurityScheme
5.4.5
DigestSecurityScheme
5.4.6
BearerSecurityScheme
5.4.7
PSKSecurityScheme
5.4.8
PublicSecurityScheme
5.4.9
OAuth2SecurityScheme
5.4.10
APIKeySecurityScheme
5.4.11
PoPSecurityScheme
6.
Thing
Description
Serialization
6.1
Representation
Format
6.1.1
Thing
as
a
whole
6.1.2
properties
6.1.3
actions
6.1.4
events
6.1.5
forms
6.1.6
links
6.1.7
security
6.2
Media
Type
6.3
Implementation
Notes
6.3.1
JSON
Processing
6.3.2
JSON-LD
1.1
Processing
7.
Example
Thing
Description
Instances
7.1
MyLampThing
Example
8.
Security
and
Privacy
Considerations
A.
JSON
Schema
for
TD
Instance
Validation
B.
Recent
Specification
Changes
C.
Acknowledgments
D.
References
D.1
Normative
references
D.2
Informative
references
</del>
<section id="introduction">
<del class="diff-old">1.
</del>
<h1>
Introduction
</h1>
<p>
The
Thing
Description
(TD)
is
a
central
building
block
in
the
W3C
Web
of
Things
(WoT)
and
can
be
considered
as
the
entry
point
of
a
Thing
(much
like
the
<i>
index.html
</i>
of
a
Web
site).
The
TD
consists
of
semantic
metadata
for
the
Thing
itself,
an
interaction
model
based
on
WoT's
<code>
Properties
</code>,
<code>
Actions
</code>,
and
<code>
Events
</code>
paradigm,
a
semantic
schema
to
make
data
models
machine-understandable,
and
features
for
Web
Linking
to
express
relations
among
Things.
</p>
<p>
Properties
can
be
used
for
sensing
and
controlling
parameters,
such
as
getting
the
current
value
or
setting
an
operation
state.
Actions
model
invocation
of
physical
(and
hence
time-consuming)
processes,
but
can
also
be
used
to
abstract
RPC-like
calls
of
existing
platforms.
Events
are
used
for
the
push
model
of
communication
where
notifications,
discrete
events,
or
streams
of
values
are
sent
asynchronously
to
the
receiver.
In
general,
the
TD
provides
metadata
for
different
communication
bindings
identified
by
URI
schemes
(e.g.,
"http",
"coap",
"mqtt",
etc.),
<del class="diff-old">media
</del>
<ins class="diff-chg">content
</ins>
types
(e.g.,
"application/json",
"application/xml",
"application/cbor",
"application/exi"
etc.),
and
security
mechanisms
(for
authentication,
authorization,
confidentiality,
etc.).
Serialization
of
TD
instances
is
based
on
JSON
and
includes
at
least
the
TD
core
vocabulary
as
JSON
<del class="diff-old">keys
</del>
<ins class="diff-chg">names
</ins>
as
defined
in
this
specification
document.
</p>
<p>
Example
1
shows
a
simple
TD
instance
in
such
a
JSON
<del class="diff-old">serialization
</del>
<ins class="diff-chg">serializiation
</ins>
and
depicts
WoT's
<code>
Properties
</code>,
<code>
Actions
</code>,
and
<code>
Events
</code>
paradigm
by
describing
a
lamp
Thing
with
the
name
<i>
MyLampThing
</i>.
</p>
<del class="diff-old">Example
1
</del>
<aside class="example ds-selector-tabs changed" id= "simple-thing-description-sample" title= "Thing Description Sample with JSON serialization">
<div class="selectors">
<del class="diff-old">:
</del>
<button class="selected" data-selects= "original">
Simple
<del class="diff-old">Thing
Description
Sample
with
JSON
serialization
</del>
</button>
<button data-selects= "expanded">
<ins class="diff-chg">Full
</ins></button>
</div>
<del class="diff-old">{
    : &lt;span class=
"hljs-string"&gt;"urn:dev:wot:com:example:servient:lamp",
    : &lt;span class=
"hljs-string"&gt;"MyLampThing",
    : [{&lt;span class=
"hljs-attr"&gt;"scheme": &lt;span class=
"hljs-string"&gt;"basic"}],
    : {
         : {
            : &lt;span class=
"hljs-string"&gt;"string",
            : [{&lt;span class=
"hljs-attr"&gt;"href": &lt;span class=
"hljs-string"&gt;"https://mylamp.example.com/status"}]
</del>
<pre class="original selected">{
<ins class="diff-chg">    "id": "urn:dev:wot:com:example:servient:lamp",
    "name": "MyLampThing",
    "securityDefinitions": {
        "basic_sc": {"scheme": "basic"}
    },
    "security": ["basic_sc"],
    "properties": {
        "status" : {
            "type": "string",
            "forms": [{"href": "https://mylamp.example.com/status"}]
</ins>
        }
    },
<del class="diff-old">    : {
         : {
            : [{&lt;span class=
"hljs-attr"&gt;"href": &lt;span class=
"hljs-string"&gt;"https://mylamp.example.com/toggle"}]
</del>
<ins class="diff-chg">    "actions": {
        "toggle" : {
            "forms": [{"href": "https://mylamp.example.com/toggle"}]
</ins>
        }
    },
<del class="diff-old">    :{
        :{
            : &lt;span class=
"hljs-string"&gt;"string",
            : [{
                : &lt;span class=
"hljs-string"&gt;"https://mylamp.example.com/oh",
                &lt;span class=
"hljs-attr"&gt;"subProtocol": &lt;span class=
"hljs-string"&gt;"LongPoll"
</del>
<ins class="diff-chg">    "events":{
        "overheating":{
            "data": {"type": "string"},
            "forms": [{
                "href": "https://mylamp.example.com/oh",
                "subprotocol": "longpoll"
            }]
        }
    }
}
</ins></pre><pre class="expanded">{<ins class="diff-chg">
    "id": "urn:dev:wot:com:example:servient:lamp",
    "name": "MyLampThing",
    "securityDefinitions": {
        "basic_sc": {"scheme": "basic"}
    },
    "security": ["basic_sc"],
    "properties": {
        "status" : {
                        "readOnly": false,
            "writeOnly": false,
            "observable": false,
            "type": "string",
            "forms": [{
                                "href": "https://mylamp.example.com/status",
                                "contentType": "application/json"
                        }]
        }
    },
    "actions": {
        "toggle" : {
            "idempotent" : false,
            "safe" : false,
            "forms": [{
                                "href": "https://mylamp.example.com/toggle",
                                "contentType": "application/json"
                        }]
        }
    },
    "events":{
        "overheating":{
            "data": {"type": "string"},
            "forms": [{
                "href": "https://mylamp.example.com/oh",
                                "contentType": "application/json",
                "subprotocol": "longpoll"
</ins>
            }]
        }
    }
}
</pre>
</aside>
<p>
Based
on
this
content,
we
know
there
exists
one
<code>
Property
</code>
interaction
resource
with
the
name
<i>
status
</i>.
In
addition,
information
is
provided
to
indicate
that
this
Property
is
accessible
via
(the
secure
form
of)
the
HTTP
protocol
with
a
GET
method
at
the
URI
<code>
https://mylamp.example.com/status
</code>
(announced
within
the
<code>
forms
</code>
structure
by
the
<code>
href
</code>
<del class="diff-old">key),
</del>
<ins class="diff-chg">name),
</ins>
and
will
return
a
string
status
value.
The
use
of
the
GET
method
is
not
stated
explicitly,
but
is
one
of
the
default
assumptions
defined
by
this
<del class="diff-old">document.
</del>
<ins class="diff-chg">document
and
explained
in
[[!WOT-PROTOCOL-BINDING]].
</ins>
</p>
<p>
In
a
similar
manner,
an
<code>
Action
</code>
is
specified
to
toggle
the
switch
status
using
the
POST
method
applied
to
the
<code>
https://mylamp.example.com/toggle
</code>
resource,
where
POST
is
again
a
default
assumption
for
invoking
Actions.
</p>
<p>
The
<code>
Event
</code>
pattern
enables
a
mechanism
for
asynchronous
messages
to
be
sent
by
a
Thing.
Here,
a
subscription
to
be
notified
upon
a
possible
overheating
event
of
the
lamp
can
be
obtained
by
using
the
HTTP
with
its
long
polling
sub-protocol
at
<code>
https://mylamp.example.com/oh
</code>.
</p>
<p>
This
example
also
specifies
the
<code>
basic
</code>
security
scheme,
requiring
a
username
and
password
for
access.
<ins class="diff-new">Note
that
a
security
scheme
is
first
given
a
name
in
a
</ins><code><ins class="diff-new">
securityDefinition
</ins></code><ins class="diff-new">
and
then
activated
by
specifying
that
name
in
a
</ins><code><ins class="diff-new">
security
</ins></code><ins class="diff-new">
section.
</ins>
In
combination
with
the
use
of
the
HTTP
protocol
this
<del class="diff-old">indicates
</del>
<ins class="diff-chg">example
demonstrates
</ins>
the
use
of
HTTP
Basic
Authentication.
Specification
of
<del class="diff-old">a
</del>
<ins class="diff-chg">at
least
one
</ins>
security
scheme
at
the
top
level
<del class="diff-old">as
in
this
example
indicates
that
it
</del>
is
<del class="diff-old">required
</del>
<ins class="diff-chg">mandatory,
and
gives
the
default
access
requirements
</ins>
for
every
resource.
However,
security
schemes
can
also
be
specified
per-interaction
or
per-form,
with
lower-level
configurations
overriding
higher-level
ones,
allowing
for
the
specification
of
fine-grained
access
control.
<del class="diff-old">Examples
</del>
<ins class="diff-chg">It
is
also
possible
to
use
a
special
</ins><code><ins class="diff-chg">
nosec
</ins></code><ins class="diff-chg">
security
scheme
to
indicate
that
no
access
control
mechanisms
</ins>
are
<ins class="diff-new">used.
Additional
examples
will
be
</ins>
provided
later.
</p>
<p>
The
TD
in
<a href="#simple-thing-description-sample">
Example
1
</a>
reflects
some
additional
defined
default
assumptions
that
are
not
explicitly
described.
For
example,
the
<del class="diff-old">media
</del>
<ins class="diff-chg">content
</ins>
type
of
the
exchange
format
of
the
interactions
is
assumed
to
be
JSON
(=
<code>
<del class="diff-old">mediaType
</del>
<ins class="diff-chg">contentType
</ins>
</code>
)
and
the
<code>
Property
</code>
<i>
status
</i>
resource
is
not
<del class="diff-old">writable
</del>
<code>
<ins class="diff-chg">readOnly
</ins></code>
as
well
as
not
<del class="diff-old">observable.
</del>
<code>
<ins class="diff-chg">observable
</ins></code>.
Specifically,
the
TD
specification
defines
vocabulary
terms
<del class="diff-old">(
</del>
<ins class="diff-chg">(e.g.,
</ins>
<code>
<del class="diff-old">writable
</del>
<ins class="diff-chg">readOnly
</ins></code>,<code><ins class="diff-chg">
writeOnly
</ins>
</code>,
<code>
observable
</code>,
<code>
<del class="diff-old">mediaType
</del>
<ins class="diff-chg">contentType
</ins>
</code>
)
that
have
default
values.
If
these
vocabulary
terms
are
not
explicitly
used
in
a
Thing
Description
instance,
the
Thing
Description
processor
follows
default
assumptions
for
interpretation
as
defined
in
this
specification.
<ins class="diff-new">The
</ins><i><ins class="diff-new">
Full
</ins></i><ins class="diff-new">
tab
in
</ins><a href= "#simple-thing-description-sample"><ins class="diff-new">
Example
1
</ins></a><ins class="diff-new">
shows
the
identical
information
of
the
simple
form
of
the
Thing
Description
instance,
but
includes
these
mentioned
implicit
vocabulary
terms
with
its
default
values.
</ins>
</p>
<p>
The
<del class="diff-old">TD
</del>
<ins class="diff-chg">Thing
Description
offers
the
possibility
to
add
context
knowledge
from
different
namespaces.
This
mechanism
</ins>
can
be
<del class="diff-old">also
processed
</del>
<ins class="diff-chg">used
to
add
additional
semantics,
such
</ins>
as
<del class="diff-old">an
RDF-based
model.
In
that
case,
</del>
<ins class="diff-chg">specific
domain
knowledge,
to
the
content
of
</ins>
the
Thing
Description
<del class="diff-old">instance
needs
</del>
<ins class="diff-chg">instance,
and
</ins>
to
<del class="diff-old">be
transformed
into
valid
JSON-LD
first.
In
terms
</del>
<ins class="diff-chg">specify
some
configurations
and
behavior
</ins>
of
<del class="diff-old">JSON-LD
1.1
serialization,
</del>
the
<del class="diff-old">open-world
assumption
of
RDF
semantic
processing
requires
vocabulary
terms
with
default
values
to
be
always
present
explicitly
</del>
<ins class="diff-chg">underlying
communication
protocols
declared
</ins>
in
the
<del class="diff-old">instances.
</del>
<code>
<ins class="diff-chg">forms
</ins></code><ins class="diff-chg">
field.
</ins>
Example
2
<del class="diff-old">shows
</del>
<ins class="diff-chg">extends
</ins>
the
<del class="diff-old">same
</del>
TD
<del class="diff-old">in
a
</del>
<ins class="diff-chg">sample
from
Example
1
and
uses
the
</ins><code><ins class="diff-chg">
@context
</ins></code><ins class="diff-chg">
known
from
</ins>
JSON-LD
<del class="diff-old">1.1
serialization
representing
exactly
</del>
<ins class="diff-chg">to
introduce
</ins>
the
<del class="diff-old">same
information
as
in
Example
1;
however,
default
values
have
been
filled
in.
</del>
<ins class="diff-chg">http
context.
This
context
is
used
to
specify
explicitly
the
http
methods
for
the
property
and
action
within
the
</ins><code><ins class="diff-chg">
forms
</ins></code>.
</p>
<del class="diff-old">Example
2
</del>
<aside class="example ds-selector-tabs changed" id= "thing-description-full-serialization" title= "Thing Description with context extension">
<div class="selectors">
<del class="diff-old">:
Thing
Description
as
JSON-LD
1.1
Serialization
</del>
<button class="selected" data-selects= "original">
<ins class="diff-chg">Simple
</ins></button><button data-selects= "expanded"><ins class="diff-chg">
Full
</ins></button>
</div>
<del class="diff-old">{
    : &lt;span class=
"hljs-string"&gt;"http://www.w3.org/ns/td",
    : &lt;span class=
"hljs-string"&gt;"urn:dev:wot:com:example:servient:lamp",
    : &lt;span class=
"hljs-string"&gt;"MyLampThing",
    : [{&lt;span class=
"hljs-attr"&gt;"scheme": &lt;span class=
"hljs-string"&gt;"basic", &lt;span class=
"hljs-attr"&gt;"in": &lt;span class=
"hljs-string"&gt;"header"}],
    : {
        : {
            : &lt;span class=
"hljs-literal"&gt;false,
            &lt;span class=
"hljs-attr"&gt;"observable": &lt;span class=
"hljs-literal"&gt;false,
            : &lt;span class=
"hljs-string"&gt;"string",
            : [{
                : &lt;span class=
"hljs-string"&gt;"https://mylamp.example.com/status",
                &lt;span class=
"hljs-attr"&gt;"http:methodName": &lt;span class=
"hljs-string"&gt;"GET",
                &lt;span class=
"hljs-attr"&gt;"mediaType": &lt;span class=
"hljs-string"&gt;"application/json"
            }]
        }
    },
    : {
        : {
            : [{
                : &lt;span class=
"hljs-string"&gt;"https://mylamp.example.com/toggle",
                &lt;span class=
"hljs-attr"&gt;"http:methodName": &lt;span class=
"hljs-string"&gt;"POST",
                &lt;span class=
"hljs-attr"&gt;"mediaType": &lt;span class=
"hljs-string"&gt;"application/json"
            }]
</del>
<pre class="original selected">
<ins class="diff-chg">    {
        "@context": [
            "http://www.w3.org/ns/td",
            {"http": "http://www.w3.org/2011/http#"}
        ],
        "id": "urn:dev:wot:com:example:servient:lamp",
        "name": "MyLampThing",
        "securityDefinitions": {"basic_sc": {
            "scheme": "basic",
            "in": "header"
        }},
        "security": ["basic_sc"],
        "properties": {
            "status": {
                "type": "string",
                "forms": [{
                    "href": "https://mylamp.example.com/status",
                    "http:methodName": "GET"
                }]
            }
        },
        "actions": {
            "toggle": {
                "forms": [{
                    "href": "https://mylamp.example.com/toggle",
                    "http:methodName": "POST"
                }]
            }
        },
        "events": {
            "overheating": {
                "data": {"type": "string"},
                "forms": [{
                    "href": "https://mylamp.example.com/oh",
                    "subprotocol": "longpoll"
                }]
            }
</ins>
        }
<del class="diff-old">    },
    : {
        : {
            : &lt;span class=
"hljs-string"&gt;"string",
            : [{
                : &lt;span class=
"hljs-string"&gt;"https://mylamp.example.com/oh",
                &lt;span class=
"hljs-attr"&gt;"subProtocol": &lt;span class=
"hljs-string"&gt;"LongPoll",
                &lt;span class=
"hljs-attr"&gt;"mediaType": &lt;span class=
"hljs-string"&gt;"application/json"
            }]
</del>
<ins class="diff-chg">}
</ins></pre><pre class="expanded"><ins class="diff-chg">
    {
        "@context": [
            "http://www.w3.org/ns/td",
            {"http": "http://www.w3.org/2011/http#"}
        ],
        "id": "urn:dev:wot:com:example:servient:lamp",
        "name": "MyLampThing",
        "securityDefinitions": {"basic_sc": {
            "scheme": "basic",
            "in": "header"
        }},
        "security": ["basic_sc"],
        "properties": {
            "status": {
                "readOnly": false,
                "writeOnly": false,
                "observable": false,
                "type": "string",
                "forms": [{
                    "href": "https://mylamp.example.com/status",
                    "http:methodName": "GET",
                    "contentType": "application/json"
                }]
            }
        },
        "actions": {
            "toggle": {
                "idempotent": false,
                "safe": false,
                "forms": [{
                    "href": "https://mylamp.example.com/toggle",
                    "http:methodName": "POST",
                    "contentType": "application/json"
                }]
            }
        },
        "events": {
            "overheating": {
                "data": {"type": "string"},
                "forms": [{
                    "href": "https://mylamp.example.com/oh",
                    "subprotocol": "longpoll",
                    "contentType": "application/json"
                }]
            }
</ins>
        }
<del class="diff-old">    }
</del>
}
</pre>
</aside>
<p>
<del class="diff-old">For
more
examples,
including
</del>
<ins class="diff-chg">The
TD
can
be
also
processed
as
an
RDF-based
model.
In
that
case,
</ins>
the
<del class="diff-old">use
of
other
protocols
besides
HTTP,
see
Section
7.
Example
</del>
Thing
Description
<del class="diff-old">Instances
.
</del>
<ins class="diff-chg">instance
needs
to
be
transformed
into
valid
JSON-LD
first
which
will
be
specified
in
this
document.
</ins>
</p>
</section>
<section id="terminology">
<del class="diff-old">2.
</del>
<h2>
Terminology
</h2>
<p>
Generic
WoT
terminology
is
defined
in
<del class="diff-old">[
WOT-ARCHITECTURE
]:
</del>
<ins class="diff-chg">[[!WOT-ARCHITECTURE]]:
</ins><dfn data-lt="Things">
Thing
</dfn>,
<dfn data-lt= "Thing Descriptions">
Thing
Description
</dfn>
(in
short
<dfn>
TD
</dfn>
),
<dfn>
Web
of
Things
</dfn>
(in
short
<b>
<i>
WoT
</i>
</b>
),
<dfn>
WoT
Interface
</dfn>
etc.
</p>
</section>
<del class="diff-old">3.
</del>
<section>
<h1>
Namespaces
</h1>
<p>
The
namespace
for
the
W3C
<del class="diff-old">TD
</del>
<ins class="diff-chg">Thing
Description
</ins>
vocabulary
as
defined
in
this
document
is
<a href= "http://www.w3.org/ns/td">
http://www.w3.org/ns/td
</a>.
</p>
<p>
Using
content
negotiation,
this
namespace
serves
either
the
TD
ontology
file
(Turtle)
or
the
TD
context
file
(JSON-LD).
</p>
<del class="diff-old">The
suggested
prefix
for
the
TD
namespace
is
td
.
The
security
ontology
that
can
be
used
with
the
TD
is
available
at
https://www.w3.org/ns/wot-security
.
The
data
schema
ontology
that
can
be
used
with
the
TD
is
available
at
https://www.w3.org/ns/json-schema
.
Editor's
note
:
Binding
Vocabulary
and
Prefixes
The
TD
will
reuse
existing
vocabulary
definitions
such
as
for
http
from
the
http://www.w3.org/2011/http#
namespace.
In
that
case
the
prefix
http
is
used.
However,
there
are
prefixes
such
as
coap
and
mqtt
which
have
no
namespace
yet.
Currently
there
are
efforts
to
have
such
namespace
representations
which
will
be
referenced
in
the
TD
specification
in
the
future.
In
the
meantime,
the
[
WOT-PROTOCOL-BINDING
]
provides
the
list
of
terms
that
can
be
used
to
specify
the
protocol
metadata
in
the
Thing
Description.
</del>
</section>
<del class="diff-old">4.
</del>
<section>
<h1>
Conformance
</h1>
<p>
As
well
as
all
sections
marked
as
non-normative,
all
authoring
guidelines,
diagrams,
examples,
and
notes
in
this
specification
are
non-normative.
Everything
else
in
this
specification
is
normative.
</p>
<p>
The
key
words
<em title="MUST" class="rfc2119">
MUST
</em>,
<em title="MUST NOT" class="rfc2119">
MUST
NOT
</em>,
<em title= "REQUIRED" class="rfc2119">
REQUIRED
</em>,
<em title="SHOULD" class= "rfc2119">
SHOULD
</em>,
<em title="SHOULD NOT" class= "rfc2119">
SHOULD
NOT
</em>,
<em title="RECOMMENDED" class= "rfc2119">
RECOMMENDED
</em>,
<em title="MAY" class= "rfc2119">
MAY
</em>,
and
<em title="OPTIONAL" class= "rfc2119">
OPTIONAL
</em>
in
this
specification
are
to
be
interpreted
as
described
in
<del class="diff-old">[
RFC2119
].
</del>
<ins class="diff-chg">[[!RFC2119]].
</ins>
</p>
<p>
A
Thing
Description
instance
complies
with
this
specification
if
it
follows
the
normative
statements
in
Section
<del class="diff-old">5.
Information
Model
</del>
<a href= "#sec-vocabulary-definition">
</a>
and
Section
<del class="diff-old">6.
Thing
Description
Serialization
</del>
<a href= "#sec-td-serialization">
</a>
regarding
Thing
Description
serialization.
</p>
<p>
A
JSON
Schema
<del class="diff-old">[
JSON-SCHEMA-VALIDATION
]
</del>
<ins class="diff-chg">[[?JSON-SCHEMA-VALIDATION]]
</ins>
is
provided
in
Annex
<del class="diff-old">A.
JSON
Schema
for
TD
Instance
Validation
</del>
<a href="#json-schema-4-validation">
</a>
to
validate
Thing
Description
instances
based
on
<del class="diff-old">JSON-LD
1.1.
</del>
<ins class="diff-chg">JSON
serialization.
</ins>
</p>
<del class="diff-old">Editor's
note
</del>
<p class="ednote">
In
the
future
some
information
about
RDF
validation
will
be
provided.
</p>
</section>
<section id="sec-vocabulary-definition">
<del class="diff-old">5.
</del>
<h1>
Information
Model
<del class="diff-old">5.1
</del>
</h1>
<section>
<h2>
Overview
</h2>
<p>
The
W3C
Thing
Description
provides
a
set
of
vocabulary
for
describing
physical
and
virtual
Things.
<del class="diff-old">To
increase
interoperability
the
vocabulary
terms
are
defined
using
the
Resource
Description
Framework
(RDF).
All
vocabulary
restrictions
noted
in
these
tables
MUST
be
followed,including
mandatory
items
and
default
values.
</del>
In
general,
the
Thing
Description
vocabulary
set
is
grouped
in
three
modules:
</p>
<ul>
<li>
the
core
Thing
Description
vocabulary
reflecting
WoT's
paradigm
of
<code>
Properties
</code>,
<code>
Actions
</code>,
and
<code>
Events
</code>
(also
see
<del class="diff-old">[
WOT-ARCHITECTURE
]);the
</del>
<ins class="diff-chg">[[!WOT-ARCHITECTURE]])
</ins></li><li><ins class="diff-chg">
the
</ins>
data
schema
vocabulary
reflecting
a
subset
of
the
terms
defined
in
JSON
Schema
<del class="diff-old">[
JSON-SCHEMA-VALIDATION
]
in
a
linked
data
representation;
</del>
<ins class="diff-chg">[[?JSON-SCHEMA-VALIDATION]],
</ins></li><li>
and
the
security
vocabulary
used
to
define
security
<del class="diff-old">mechanismconfiguration
</del>
<ins class="diff-chg">mechanism
configuration
</ins>
requirements.
</li>
</ul>
<p>
An
overview
of
this
vocabulary
with
its
class
context
and
class
relation
is
given
by
the
following
three
<del class="diff-old">figures:
the
TD
core
model,
the
TD
data
schema
model,
and
the
TD
security
model.
</del>
<ins class="diff-chg">figures.
</ins>
Please
note
that
the
figures
reflect
the
vocabulary
terms
and
structure
as
they
would
be
used
in
a
Thing
Description
instance
(see
Section
<del class="diff-old">6.
Thing
Description
Serialization
</del>
<a href= "#sec-td-serialization">
</a>
<del class="diff-old">).The
full
ontology
definitions
of
the
different
modules
can
be
viewed
by
</del>
<ins class="diff-chg">).
</ins></p><p class="ednote"><ins class="diff-chg">
The
</ins>
following
<ins class="diff-new">diagrams
are
automatically
generated
from
</ins>
the
<del class="diff-old">namespaces
as
provided
</del>
<ins class="diff-chg">ontology
files.
The
layout
will
be
improved
</ins>
in
<del class="diff-old">Section
3.
Namespaces
.
</del>
<ins class="diff-chg">one
of
the
next
TD
updates.
</ins>
</p>
<figure id="td-core-model">
<img src="visualization/td.svg" alt= "TD core model figure" />
<figcaption>
<del class="diff-old">Figure
1
</del>
TD
core
model
<ins class="diff-chg">(
</ins><a href="visualization/td.svg"><ins class="diff-chg">
Click
SVG
file
</ins></a><ins class="diff-chg">
)
</ins>
</figcaption>
</figure>
<figure id="td-data-schema-model">
<img src= "visualization/json-schema.svg" alt= "TD data schema model figure" />
<figcaption>
<del class="diff-old">Figure
2
</del>
TD
data
schema
model
<ins class="diff-chg">(
</ins><a href= "visualization/json-schema.svg"><ins class="diff-chg">
Click
SVG
file
</ins></a><ins class="diff-chg">
)
</ins>
</figcaption>
</figure>
<figure id="td-security-model">
<img src= "visualization/wot-security.svg" alt="TD security model figure" />
<figcaption>
<del class="diff-old">Figure
3
</del>
TD
security
model
<ins class="diff-chg">(
</ins><a href= "visualization/wot-security.svg"><ins class="diff-chg">
Click
SVG
file
</ins></a><ins class="diff-chg">
)
</ins>
</figcaption>
</figure>
<del class="diff-old">Editor's
note
:
Default
Values
and
Mandatory
Attributes
</del>
<p class="ednote" title="Default Values and Mandatory Attributes">
In
the
figures
above,
and
in
the
tables
to
follow,
items
which
have
default
values
are
indicated
as
being
optional.
However,
technically,
these
are
optional
<em>
only
in
the
JSON
serialization
</em>.
They
are
actually
mandatory
parts
of
the
information
model
and
are
also
mandatory
in
the
JSON-LD
serialization.
<del class="diff-old">In
addition,
the
security
scheme
configuration
is
not
actually
optional
even
in
the
JSON
serialization.
Security
configuration
is
mandatory
at
least
one
of
the
three
levels
at
which
it
may
be
specified...
so
it
can
be
omitted
only
if
it
is
specified
at
a
different
level
for
each
form.
A
future
version
of
this
document
should
better
express
the
status
of
these
attributes.
</del>
</p>
<p>
A
detailed
description
of
the
vocabulary
of
the
TD
core
model
and
TD
data
schema
model
is
given
in
the
next
sub-section.
</p>
<p>
<del class="diff-old">5.2
</del>
<span class="rfc2119-assertion" id="td-vocabulary">
<ins class="diff-chg">All
vocabulary
restrictions
noted
in
tables
in
Section
</ins><a href= "#sec-core-vocabulary-definition"></a>,<a href= "#sec-data-schema-vocabulary-definition"></a>,<ins class="diff-chg">
and
</ins><a href= "#sec-security-vocabulary-definition"></a><ins class="diff-chg">
MUST
be
followed,
including
mandatory
items
and
default
values.
</ins>
</span>
</p>
<p>
<ins class="diff-new">How
to
serialize
these
vocabulary
terms
to
a
Thing
Description
instance
using
a
JSON-based
representation
is
explained
in
section
</ins><a href="#sec-td-serialization"></a>.</p></section><section id="sec-core-vocabulary-definition"><h2>
Core
Vocabulary
Definition
</h2>
<section>
<h3>
<del class="diff-old">5.2.1
</del>
<code>
Thing
</code>
</h3>
<p>
Describes
a
physical
and/or
virtual
Thing
(may
represent
one
or
more
physical
and/or
virtual
Things)
in
the
Web
of
Things
context.
<ins class="diff-new">When
a
concrete
Thing
is
defined
in
a
Thing
Description,
it
is
called
an
"thing
resource".
</ins>
</p>
<table class="def">
<thead>
<tr>
<th>
<del class="diff-old">Field
Name
</del>
<ins class="diff-chg">Vocabulary
term
</ins>
</th>
<th>
Description
</th>
<th>
Mandatory
</th>
<th>
Default
value
</th>
<th>
Type
</th>
</tr>
</thead>
<tbody>
<tr>
<td>
<code>
id
</code>
</td>
<td>
unique
identifier
of
the
Thing
(URI,
e.g.
custom
<del class="diff-old">URN)
</del>
<ins class="diff-chg">URN).
</ins>
</td>
<td>
yes
</td>
<td>.
</td>
<td>
<a href= "http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#anyURI">
<code>
anyURI
</code>
</a>
</td>
</tr>
<tr class="rfc2119-table-assertion" id="td-vocab-support">
<td>
<code>
<del class="diff-old">description
</del>
<ins class="diff-chg">support
</ins>
</code>
</td>
<td>
Provides
<del class="diff-old">additional
(human)
readable
information.
</del>
<ins class="diff-chg">information
about
the
TD
maintainer
(e.g.,
author,
link
or
telephone
number
to
get
support,
etc).
</ins>
</td>
<td>
no
</td>
<td>.
</td>
<td>
<a href= "http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string">
<code>
string
</code>
</a>
</td>
</tr>
<tr class="rfc2119-table-assertion" id="td-vocab-lastModified">
<td>
<code>
<del class="diff-old">name
</del>
<ins class="diff-chg">lastModified
</ins>
</code>
</td>
<td>
<del class="diff-old">Name
of
</del>
<ins class="diff-chg">Provides
information
when
</ins>
the
<del class="diff-old">Thing.
</del>
<ins class="diff-chg">TD
instance
was
last
modified.
</ins>
</td>
<td>
<del class="diff-old">yes
</del>
<ins class="diff-chg">no
</ins>
</td>
<td>.
</td>
<td>
<a href= "http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string">
<code>
string
</code>
</a>
</td>
</tr>
<tr class="rfc2119-table-assertion" id="td-vocab-links">
<td>
<code>
<del class="diff-old">support
</del>
<ins class="diff-chg">links
</ins>
</code>
</td>
<td>
Provides
<del class="diff-old">information
about
</del>
<ins class="diff-chg">Web
links
to
arbitrary
resources
that
relate
to
</ins>
the
<del class="diff-old">TD
maintainer
(e.g.,
author,
link
or
telephone
number
</del>
<ins class="diff-chg">specified
Thing
Description.
</ins></td><td><ins class="diff-chg">
no
</ins></td><td>.</td><td><ins class="diff-chg">
array
of
</ins><a href="#link"><code><ins class="diff-chg">
Link
</ins></code></a></td></tr><tr class="rfc2119-table-assertion" id="td-vocab-descriptions"><td><code><ins class="diff-chg">
descriptions
</ins></code></td><td><ins class="diff-chg">
Can
be
used
</ins>
to
<del class="diff-old">get
support,
etc).
</del>
<ins class="diff-chg">support
(human-readable)
information
in
different
languages.
</ins>
</td>
<td>
no
</td>
<td>.
</td>
<td>
<a href="#multilanguage">
<code>
<del class="diff-old">string
</del>
<ins class="diff-chg">MultiLanguage
</ins>
</code>
</a>
</td>
</tr>
<tr class="rfc2119-table-assertion" id= "td-vocab-securityDefinitions">
<td>
<code>
<ins class="diff-chg">securityDefinitions
</ins></code></td><td><ins class="diff-chg">
Set
of
named
security
configurations
(definitions
only).
Not
actually
applied
unless
names
are
used
in
a
security
section.
</ins></td><td><ins class="diff-chg">
no
</ins></td><td>.</td><td><a href="#securityscheme"><code><ins class="diff-chg">
SecurityScheme
</ins></code></a></td></tr><tr class="rfc2119-table-assertion" id="td-vocab-version"><td><code><ins class="diff-chg">
version
</ins></code></td><td><ins class="diff-chg">
Provides
version
information.
</ins></td><td><ins class="diff-chg">
no
</ins></td><td>.</td><td><a href="#versioning"><code><ins class="diff-chg">
Versioning
</ins></code></a></td></tr><tr class="rfc2119-table-assertion" id="td-vocab-base">
<td>
<code>
base
</code>
</td>
<td>
Define
the
base
URI
that
is
valid
for
all
defined
local
interaction
resources.
All
other
URIs
in
the
TD
must
then
be
resolved
using
the
algorithm
defined
in
<del class="diff-old">[
</del>
<ins class="diff-chg">[[!RFC3986]].
</ins></td><td><ins class="diff-chg">
no
</ins></td><td>.</td><td><a href= "http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#anyURI"><code><ins class="diff-chg">
anyURI
</ins></code>
<del class="diff-old">RFC3986
</del>
</a>
<del class="diff-old">].
</del>
</td>
</tr>
<tr class="rfc2119-table-assertion" id="td-vocab-created">
<td>
<code>
<ins class="diff-chg">created
</ins></code></td><td><ins class="diff-chg">
Provides
information
when
the
TD
instance
was
created.
</ins>
</td>
<td>
no
</td>
<td>.
</td>
<td>
<a href= "http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string">
<code>
<del class="diff-old">anyURI
</del>
<ins class="diff-chg">string
</ins>
</code>
</a>
</td>
</tr>
<tr class="rfc2119-table-assertion" id="td-vocab-forms">
<td>
<code>
<del class="diff-old">properties
</del>
<ins class="diff-chg">forms
</ins>
</code>
</td>
<td>
<del class="diff-old">All
Property-based
interaction
patterns
</del>
<ins class="diff-chg">Indicates
one
or
more
endpoints
at
which
operation(s)
on
this
resource
are
accessible.
In
this
version
</ins>
of
<ins class="diff-new">TD,
all
operations
that
can
be
described
at
</ins>
the
<del class="diff-old">Thing.
</del>
<ins class="diff-chg">Thing
level
are
concerning
</ins><a href= "#property"><ins class="diff-chg">
Properties.
</ins></a><br /><br /><ins class="diff-chg">
Each
endpoint
is
for
accessing
one
or
more
of
"readallproperties",
"writeallproperties",
"writemultipleproperties"
and
"readmultipleproperties"
operations
on
the
thing
resource.
(See
</ins><a href="#td-forms-readall-example"><ins class="diff-chg">
an
example.
</ins></a><ins class="diff-chg">
)
Payloads
are
assigned
an
object
type
schema
with
its
properties
equal
to
the
Thing's
property
resources.
</ins>
</td>
<td>
no
</td>
<td>.
</td>
<td>
<ins class="diff-chg">array
of
</ins><a href="#form">
<code>
<del class="diff-old">Property
</del>
<ins class="diff-chg">Form
</ins>
</code>
</a>
</td>
</tr>
<tr class="rfc2119-table-assertion" id="td-vocab-actions">
<td>
<code>
actions
</code>
</td>
<td>
All
Action-based
interaction
patterns
of
the
Thing.
</td>
<td>
no
</td>
<td>.
</td>
<td>
<a href="#action">
<code>
Action
</code>
</a>
</td>
</tr>
<tr class="rfc2119-table-assertion" id="td-vocab-security">
<td>
<code>
<ins class="diff-chg">security
</ins></code></td><td><ins class="diff-chg">
Set
of
security
definition
names,
chosen
from
those
defined
in
securityDefinitions.
These
must
all
be
satisfied
for
access
to
resources
at
or
below
the
current
level,
if
not
overridden
at
a
lower
level.
</ins></td><td><ins class="diff-chg">
yes
</ins></td><td>.</td><td><ins class="diff-chg">
array
of
</ins><a href= "http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string"><code><ins class="diff-chg">
string
</ins></code></a></td></tr><tr class="rfc2119-table-assertion" id="td-vocab-events">
<td>
<code>
events
</code>
</td>
<td>
All
Event-based
interaction
patterns
of
the
Thing.
</td>
<td>
no
</td>
<td>.
</td>
<td>
<a href="#event">
<code>
Event
</code>
</a>
</td>
</tr>
<tr class="rfc2119-table-assertion" id="td-vocab-description">
<td>
<code>
<del class="diff-old">links
</del>
<ins class="diff-chg">description
</ins>
</code>
</td>
<td>
Provides
<del class="diff-old">Web
links
to
arbitrary
resources
that
relate
to
the
specified
Thing
Description.
</del>
<ins class="diff-chg">additional
(human-readable)
information
based
on
a
default
language.
</ins>
</td>
<td>
no
</td>
<td>.
</td>
<td>
<del class="diff-old">array
of
</del>
<a href= "http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string">
<code>
<del class="diff-old">Link
</del>
<ins class="diff-chg">string
</ins>
</code>
</a>
</td>
</tr>
<tr class="rfc2119-table-assertion" id="td-vocab-properties">
<td>
<code>
<del class="diff-old">security
</del>
<ins class="diff-chg">properties
</ins>
</code>
</td>
<td>
<del class="diff-old">Set
</del>
<ins class="diff-chg">All
Property-based
interaction
patterns
</ins>
of
<del class="diff-old">security
configurations,
provided
as
an
array,
that
must
all
be
satisfied
for
access
to
resources
at
or
below
</del>
the
<del class="diff-old">current
level,
if
not
overridden
at
a
lower
level.
</del>
<ins class="diff-chg">Thing.
</ins>
</td>
<td>
no
</td>
<td>.
</td>
<td>
<del class="diff-old">array
</del>
<a href="#property">
<code>
<ins class="diff-chg">Property
</ins></code></a></td></tr><tr class="rfc2119-table-assertion" id="td-vocab-name"><td><code><ins class="diff-chg">
name
</ins></code></td><td><ins class="diff-chg">
Name
</ins>
of
<ins class="diff-chg">the
Thing.
</ins></td><td><ins class="diff-chg">
yes
</ins></td><td>.</td><td><a href= "http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string">
<code>
<del class="diff-old">SecurityScheme
</del>
<ins class="diff-chg">string
</ins>
</code>
</a>
</td>
</tr>
</tbody>
</table>
</section>
<section>
<h3>
<del class="diff-old">5.2.2
</del>
<code>
InteractionPattern
</code>
</h3>
<p>
Three
interaction
patterns
are
defined
as
subclasses:
Property,
Action
and
Event.
When
a
concrete
Property,
Action
or
Event
is
defined
in
a
Thing
Description,
it
is
called
an
"interaction
resource".
Interactions
between
Things
can
be
as
simple
as
one
Thing
accessing
another
Thing's
data
to
get
or
(in
the
case
the
data
is
also
writable)
change
the
representation
of
data
such
as
metadata,
status
or
mode.
A
Thing
may
also
be
interested
in
getting
asynchronously
notified
of
future
changes
in
another
Thing,
or
may
want
to
initiate
a
process
served
in
another
Thing
that
may
take
some
time
to
complete
and
monitor
the
progress.
Interactions
between
Things
may
involve
exchanges
of
data
between
them.
This
data
can
be
either
given
as
input
by
the
client
Thing,
returned
as
output
by
the
server
Thing
or
both.
</p>
<del class="diff-old">Each
instance
of
a
Property
,
Action
,
and
Event
class
MUST
have
an
identifier
that
is
unique
within
the
context
of
a
Thing
Description
document.
See
Section
Representation
Format
for
more
details
about
JSON-LD
1.1
identifiers.
</del>
<table class="def">
<thead>
<tr>
<th>
<del class="diff-old">Field
Name
</del>
<ins class="diff-chg">Vocabulary
term
</ins>
</th>
<th>
Description
</th>
<th>
Mandatory
</th>
<th>
Default
value
</th>
<th>
Type
</th>
</tr>
</thead>
<tbody>
<tr class="rfc2119-table-assertion" id="td-vocab-descriptions">
<td>
<code>
<del class="diff-old">forms
</del>
<ins class="diff-chg">descriptions
</ins>
</code>
</td>
<td>
<del class="diff-old">Indicates
one
or
more
endpoints
from
which
an
interaction
pattern
is
accessible.
</del>
<ins class="diff-chg">Can
be
used
to
support
(human-readable)
information
in
different
languages.
</ins>
</td>
<td>
<del class="diff-old">yes
</del>
<ins class="diff-chg">no
</ins>
</td>
<td>.
</td>
<td>
<del class="diff-old">array
of
</del>
<a href="#multilanguage">
<code>
<del class="diff-old">Form
</del>
<ins class="diff-chg">MultiLanguage
</ins>
</code>
</a>
</td>
</tr>
<tr class="rfc2119-table-assertion" id="td-vocab-title">
<td>
<code>
<del class="diff-old">label
</del>
<ins class="diff-chg">title
</ins>
</code>
</td>
<td>
Provides
a
<del class="diff-old">label
</del>
<ins class="diff-chg">human-readable
title
</ins>
(e.g.,
display
a
text
for
UI
representation)
of
the
interaction
<del class="diff-old">pattern.
</del>
<ins class="diff-chg">pattern
based
on
a
default
language.
</ins>
</td>
<td>
no
</td>
<td>.
</td>
<td>
<a href= "http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string">
<code>
string
</code>
</a>
</td>
</tr>
<tr class="rfc2119-table-assertion" id="td-vocab-scopes">
<td>
<code>
<del class="diff-old">description
</del>
<ins class="diff-chg">scopes
</ins>
</code>
</td>
<td>
<del class="diff-old">Provides
additional
(human)
readable
information.
</del>
<ins class="diff-chg">Set
of
authorization
scope
identifiers,
provided
as
an
array.
These
are
provided
in
tokens
returned
by
an
authorization
server
and
associated
with
forms
in
order
to
identify
what
resources
a
client
may
access
and
how.
</ins>
</td>
<td>
no
</td>
<td>.
</td>
<td>
<ins class="diff-chg">array
of
</ins>
<a href= "http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string">
<code>
string
</code>
</a>
</td>
</tr>
<tr class="rfc2119-table-assertion" id="td-vocab-uriVariables">
<td>
<code>
<ins class="diff-chg">uriVariables
</ins></code></td><td><ins class="diff-chg">
Define
URI
template
variables
as
collection
based
on
DataSchema
declarations.
</ins></td><td><ins class="diff-chg">
no
</ins></td><td>.</td><td><a href="#dataschema"><code><ins class="diff-chg">
DataSchema
</ins></code></a></td></tr><tr class="rfc2119-table-assertion" id="td-vocab-forms"><td><code><ins class="diff-chg">
forms
</ins></code></td><td><ins class="diff-chg">
Indicates
one
or
more
endpoints
at
which
operation(s)
on
this
resource
are
accessible.
</ins></td><td><ins class="diff-chg">
yes
</ins></td><td>.</td><td><ins class="diff-chg">
array
of
</ins><a href="#form"><code><ins class="diff-chg">
Form
</ins></code></a></td></tr><tr class="rfc2119-table-assertion" id="td-vocab-titles"><td><code><ins class="diff-chg">
titles
</ins></code></td><td><ins class="diff-chg">
Provides
multi-language
human-readable
titles
(e.g.,
display
a
text
for
UI
representation
in
different
languages)
of
the
interaction
pattern.
</ins></td><td><ins class="diff-chg">
no
</ins></td><td>.</td><td><a href="#multilanguage"><code><ins class="diff-chg">
MultiLanguage
</ins></code></a></td></tr><tr class="rfc2119-table-assertion" id="td-vocab-security">
<td>
<code>
security
</code>
</td>
<td>
Set
of
security
<del class="diff-old">configurations,
provided
as
an
array,
that
</del>
<ins class="diff-chg">definition
names,
chosen
from
those
defined
in
securityDefinitions.
These
</ins>
must
all
be
satisfied
for
access
to
resources
at
or
below
the
current
level,
if
not
overridden
at
a
lower
level.
</td>
<td>
no
</td>
<td>.
</td>
<td>
array
of
<a href= "http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string">
<code>
<del class="diff-old">SecurityScheme
</del>
<ins class="diff-chg">string
</ins>
</code>
</a>
</td>
</tr>
<tr class="rfc2119-table-assertion" id="td-vocab-description">
<td>
<code>
<del class="diff-old">scopes
</del>
<ins class="diff-chg">description
</ins>
</code>
</td>
<td>
<del class="diff-old">Set
of
authorization
scope
identifiers,
provided
as
an
array.
These
are
provided
in
tokens
returned
by
an
authorization
server
and
associated
with
forms
in
order
to
identify
what
resources
</del>
<ins class="diff-chg">Provides
additional
(human-readable)
information
based
on
</ins>
a
<del class="diff-old">client
may
access
and
how.
</del>
<ins class="diff-chg">default
language.
</ins>
</td>
<td>
no
</td>
<td>.
</td>
<td>
<del class="diff-old">array
of
</del>
<a href= "http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string">
<code>
string
</code>
</a>
</td>
</tr>
</tbody>
</table>
<p>
The
class
<code>
InteractionPattern
</code>
has
the
following
subclasses:
</p>
<ul>
<li>
<a href="#event">
<code>
Event
</code>
</a>
</li>
<li>
<a href="#property">
<code>
Property
</code>
</a>
</li>
<li>
<a href="#action">
<code>
Action
</code>
</a>
</li>
</ul>
<p>
<del class="diff-old">5.2.3
</del>
<span class="rfc2119-assertion" id="td-unique-identifiers">
<ins class="diff-chg">Each
instance
of
a
</ins>
<code>
Property
</code>,
<code>
<ins class="diff-new">Action
</ins></code>,<ins class="diff-new">
and
</ins><code><ins class="diff-new">
Event
</ins>
</code>
<ins class="diff-new">class
MUST
have
an
identifier
that
is
unique
within
the
context
of
a
Thing
Description
document.
</ins></span>
</p>
</section>
<section>
<h3>
<code>
<ins class="diff-chg">Property
</ins></code>
</h3>
<p>
Properties
expose
internal
state
of
a
Thing
that
can
be
directly
retrieved
(get)
and
optionally
modified
(set).
In
addition,
Things
can
also
choose
to
make
Properties
observable
by
pushing
the
new
state
(not
an
event)
after
a
change;
this
must
follow
eventual
consistency
(also
see
CAP
Theorem).
</p>
<table class="def">
<thead>
<tr>
<th>
<del class="diff-old">Field
Name
</del>
<ins class="diff-chg">Vocabulary
term
</ins>
</th>
<th>
Description
</th>
<th>
Mandatory
</th>
<th>
Default
value
</th>
<th>
Type
</th>
</tr>
</thead>
<tbody>
<tr class="rfc2119-table-assertion" id="td-vocab-observable">
<td>
<code>
observable
</code>
</td>
<td>
Indicates
whether
a
remote
servient
can
subscribe
to
("observe")
the
Property,
to
receive
change
notifications
or
periodic
updates
(true/false).
</td>
<td>
no
</td>
<td>
<del class="diff-old">false
</del>
<code>
<del class="diff-old">boolean
writable
</del>
<ins class="diff-chg">false
</ins>
</code>
</td>
<td>
<del class="diff-old">Boolean
value
that
indicates
whether
a
property
is
writable
(=true)
or
not
(=false).
no
false
</del>
<a href= "http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#boolean">
<code>
boolean
</code>
</a>
</td>
</tr>
</tbody>
</table>
<del class="diff-old">Note
</del>
<p class="note">
Property
instances
<del class="diff-old">may
</del>
<ins class="diff-chg">are
</ins>
also
<del class="diff-old">be
</del>
instances
of
the
class
<a href="#dataschema" class="sec-ref">
DataSchema
<del class="diff-old">and
therefore
</del>
</a>.
<ins class="diff-chg">Therefore,
it
</ins>
can
<del class="diff-old">contain,
among
others,
</del>
<ins class="diff-chg">contain
</ins>
the
<code>
type
</code>,
<code>
<ins class="diff-new">unit
</ins></code>,<code><ins class="diff-new">
readOnly
</ins>
</code>
<del class="diff-old">term.
</del>
<ins class="diff-chg">and
</ins><code><ins class="diff-chg">
writeOnly
</ins></code><ins class="diff-chg">
members,
among
others.
</ins>
</p>
</section>
<section>
<h3>
<del class="diff-old">5.2.4
</del>
<code>
Action
</code>
</h3>
<p>
Actions
offer
functions
of
the
Thing.
These
functions
may
manipulate
the
internal
state
of
a
Thing
in
a
way
that
is
not
possible
through
setting
Properties.
Examples
are
changing
internal
state
that
is
not
exposed
as
a
Property,
changing
multiple
Properties,
changing
Properties
over
time
or
with
a
process
that
should
not
be
disclosed.
Actions
may
also
be
pure
functions,
that
is,
they
may
not
use
any
internal
state
at
all,
and
may
simply
process
input
data
and
return
a
result
that
directly
depends
only
on
the
input
given.
</p>
<table class="def">
<thead>
<tr>
<th>
<del class="diff-old">Field
Name
</del>
<ins class="diff-chg">Vocabulary
term
</ins>
</th>
<th>
Description
</th>
<th>
Mandatory
</th>
<th>
Default
value
</th>
<th>
Type
</th>
</tr>
</thead>
<tbody>
<tr class="rfc2119-table-assertion" id="td-vocab-input">
<td>
<code>
input
</code>
</td>
<td>
<del class="diff-old">Link
</del>
<ins class="diff-chg">Used
</ins>
to
<ins class="diff-new">define
</ins>
the
<del class="diff-old">n-ary
class
that
allows
the
declaration
of
the
accepted
</del>
<ins class="diff-chg">input
</ins>
data
<del class="diff-old">type
</del>
<ins class="diff-chg">schema
</ins>
of
<del class="diff-old">an
</del>
<ins class="diff-chg">the
</ins>
action.
</td>
<td>
no
</td>
<td>.
</td>
<td>
<a href="#dataschema">
<code>
DataSchema
</code>
</a>
</td>
</tr>
<tr class="rfc2119-table-assertion" id="td-vocab-safe">
<td>
<code>
<del class="diff-old">output
</del>
<ins class="diff-chg">safe
</ins>
</code>
</td>
<td>
<del class="diff-old">Link
to
</del>
<ins class="diff-chg">Signals
if
</ins>
the
<del class="diff-old">n-ary
class
</del>
<ins class="diff-chg">action
is
safe
(=true)
or
not.
Used
to
signal
if
there
is
no
internal
state
(cf.
resource
state)
is
changed
when
invoking
an
Action.
In
</ins>
that
<del class="diff-old">allows
</del>
<ins class="diff-chg">case
responses
can
be
cached
as
example.
</ins></td><td><ins class="diff-chg">
yes
</ins></td><td><code><ins class="diff-chg">
false
</ins></code></td><td><a href= "http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#boolean"><code><ins class="diff-chg">
boolean
</ins></code></a></td></tr><tr class="rfc2119-table-assertion" id="td-vocab-idempotent"><td><code><ins class="diff-chg">
idempotent
</ins></code></td><td><ins class="diff-chg">
Indicates
whether
</ins>
the
<del class="diff-old">declaration
of
</del>
<ins class="diff-chg">action
is
idempotent
(=true)
or
not.
Informs
whether
the
action
can
be
called
repeatedly
with
the
same
result,
if
present,
based
on
the
same
input.
</ins></td><td><ins class="diff-chg">
yes
</ins></td><td><code><ins class="diff-chg">
false
</ins></code></td><td><a href= "http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#boolean"><code><ins class="diff-chg">
boolean
</ins></code></a></td></tr><tr class="rfc2119-table-assertion" id="td-vocab-output"><td><code><ins class="diff-chg">
output
</ins></code></td><td><ins class="diff-chg">
Used
to
define
</ins>
the
<ins class="diff-new">output
</ins>
data
<del class="diff-old">type
returned
by
an
</del>
<ins class="diff-chg">schema
of
the
</ins>
action.
</td>
<td>
no
</td>
<td>.
</td>
<td>
<a href="#dataschema">
<code>
DataSchema
</code>
</a>
</td>
</tr>
</tbody>
</table>
</section>
<section>
<h3>
<del class="diff-old">5.2.5
</del>
<code>
Event
</code>
</h3>
<p>
The
Event
Interaction
Pattern
describes
event
sources
that
asynchronously
push
messages.
Here
not
state,
but
state
transitions
(events)
are
communicated
(e.g.,
"clicked").
Events
may
be
triggered
by
internal
state
changes
that
are
not
exposed
as
Properties.
Events
usually
follow
strong
consistency,
where
messages
need
to
be
queued
to
ensure
eventual
delivery
of
all
events
that
have
occurred.
</p>
<del class="diff-old">Instances
of
the
Event
class
contains
the
term
definitions
of
the
class
InteractionPattern
and
DataSchema
.
5.2.6
Form
Communication
metadata
indicating
where
a
service
can
be
accessed
by
a
client
application.
An
interaction
might
have
more
than
one
form.
</del>
<table class="def">
<thead>
<tr>
<th>
<del class="diff-old">Field
Name
</del>
<ins class="diff-chg">Vocabulary
term
</ins>
</th>
<th>
Description
</th>
<th>
Mandatory
</th>
<th>
Default
value
</th>
<th>
Type
</th>
</tr>
</thead>
<tbody>
<tr class="rfc2119-table-assertion" id="td-vocab-data">
<td>
<code>
<del class="diff-old">href
</del>
<ins class="diff-chg">data
</ins>
</code>
</td>
<td>
<del class="diff-old">URI
</del>
<ins class="diff-chg">Defines
the
data
schema
</ins>
of
the
<del class="diff-old">endpoint
where
an
interaction
pattern
is
provided.
</del>
<ins class="diff-chg">Event
instance
messages
pushed
by
the
Thing.
</ins>
</td>
<td>
<del class="diff-old">yes
</del>
<ins class="diff-chg">no
</ins>
</td>
<td>.
</td>
<td>
<a href="#dataschema">
<code>
<del class="diff-old">anyURI
</del>
<ins class="diff-chg">DataSchema
</ins>
</code>
</a>
</td>
</tr>
<tr class="rfc2119-table-assertion" id="td-vocab-cancellation">
<td>
<code>
<del class="diff-old">mediaType
</del>
<ins class="diff-chg">cancellation
</ins>
</code>
</td>
<td>
<del class="diff-old">Assign
the
underlying
media
type
[
MEDIATYPES
]
of
an
interaction
pattern.
</del>
<ins class="diff-chg">Defines
any
data
that
needs
to
be
passed
to
cancel
a
subscription,
e.g.,
a
specific
message
to
remove
a
Webhook.
</ins>
</td>
<td>
no
</td>
<del class="diff-old">application/json
</del>
<td>.
</td>
<td>
<a href="#dataschema">
<code>
<del class="diff-old">string
</del>
<ins class="diff-chg">DataSchema
</ins>
</code>
</a>
</td>
</tr>
<tr class="rfc2119-table-assertion" id="td-vocab-subscription">
<td>
<code>
<del class="diff-old">rel
</del>
<ins class="diff-chg">subscription
</ins>
</code>
</td>
<td>
<del class="diff-old">Indicates
the
expected
result
of
performing
the
operation
described
by
the
form.
For
example,
the
Property
interaction
allows
get
and
set
operations.
The
protocol
binding
may
contain
a
form
for
the
get
operation
and
a
different
form
for
the
set
operation.
The
rel
attribute
indicates
which
form
is
which
and
allows
the
client
</del>
<ins class="diff-chg">Defines
data
that
needs
</ins>
to
<del class="diff-old">select
the
correct
form
for
the
operation
required.
The
value
of
the
rel
attribute
of
the
form
must
</del>
be
<del class="diff-old">one
of
readproperty,
writeproperty,
observeproperty,
invokeaction,
subscribeevent,
</del>
<ins class="diff-chg">passed
upon
subscription,
e.g.,
filters
</ins>
or
<del class="diff-old">unsubscribeevent.
</del>
<ins class="diff-chg">message
format
for
setting
up
Webhooks.
</ins>
</td>
<td>
no
</td>
<td>.
</td>
<td>
<a href="#dataschema">
<code>
<del class="diff-old">string
</del>
<ins class="diff-chg">DataSchema
</ins>
</code>
</a>
<del class="diff-old">(one
of
"readproperty"
,
"writeproperty"
,
"observeproperty"
,
"invokeaction"
,
"subscribeevent"
,
or
"unsubscribeevent"
)
</del>
</td>
</tr>
</tbody>
</table>
</section>
<section>
<h3>
<code>
<del class="diff-old">subProtocol
</del>
<ins class="diff-chg">Form
</ins>
</code>
<del class="diff-old">Indicates
the
exact
mechanism
by
which
an
interaction
will
be
accomplished
for
</del>
</h3>
<p>
<ins class="diff-chg">Communication
metadata
indicating
where
</ins>
a
<del class="diff-old">given
protocol
when
there
are
multiple
options.
For
example,
for
HTTP
and
Events,
it
indicates
which
of
several
available
mechanisms
should
</del>
<ins class="diff-chg">service
can
</ins>
be
<del class="diff-old">used
for
asynchronous
notifications.
no
.
string
(one
of
"LongPoll"
)
</del>
<ins class="diff-chg">accessed
by
a
client
application.
An
interaction
might
have
more
than
one
form.
</ins>
</p>
<table class="def">
<thead>
<tr>
<th>
<ins class="diff-new">Vocabulary
term
</ins></th><th><ins class="diff-new">
Description
</ins></th><th><ins class="diff-new">
Mandatory
</ins></th><th><ins class="diff-new">
Default
value
</ins></th><th><ins class="diff-new">
Type
</ins></th></tr></thead><tbody><tr class="rfc2119-table-assertion" id="td-vocab-security">
<td>
<code>
security
</code>
</td>
<td>
Set
of
security
<del class="diff-old">configurations,
provided
as
an
array,
that
</del>
<ins class="diff-chg">definition
names,
chosen
from
those
defined
in
securityDefinitions.
These
</ins>
must
all
be
satisfied
for
access
to
resources
at
or
below
the
current
level,
if
not
overridden
at
a
lower
level.
</td>
<td>
no
</td>
<td>.
</td>
<td>
array
of
<a href= "http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string">
<code>
<del class="diff-old">SecurityScheme
</del>
<ins class="diff-chg">string
</ins>
</code>
</a>
</td>
</tr>
<tr class="rfc2119-table-assertion" id="td-vocab-scopes">
<td>
<code>
scopes
</code>
</td>
<td>
Set
of
authorization
scope
identifiers,
provided
as
an
array.
These
are
provided
in
tokens
returned
by
an
authorization
server
and
associated
with
forms
in
order
to
identify
what
resources
a
client
may
access
and
how.
</td>
<td>
no
</td>
<td>.
</td>
<td>
array
of
<a href= "http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string">
<code>
string
</code>
</a>
</td>
</tr>
<tr class="rfc2119-table-assertion" id="td-vocab-response">
<td>
<del class="diff-old">5.2.7
</del>
<code>
<del class="diff-old">Link
</del>
<ins class="diff-chg">response
</ins>
</code>
</td>
<td>
<ins class="diff-chg">This
optional
term
can
be
used
if,
e.g.,
the
output
communication
metadata
differ
from
input
metdata
(e.g.,
output
contentType
differ
from
the
input
contentType).
The
response
name
contains
metadata
that
is
only
valid
for
the
reponse
messages.
</ins></td><td><ins class="diff-chg">
no
</ins></td><td>.</td><td><a href= "#expectedresponse"><code><ins class="diff-chg">
ExpectedResponse
</ins></code>
</a>
<del class="diff-old">A
Web
link,
as
specified
by
IETF
RFC
8288
(https://tools.ietf.org/html/rfc8288).
Field
Name
Description
Mandatory
Default
value
Type
</del>
</td>
</tr>
<tr class="rfc2119-table-assertion" id="td-vocab-subprotocol">
<td>
<code>
<del class="diff-old">href
</del>
<ins class="diff-chg">subprotocol
</ins>
</code>
</td>
<td>
<del class="diff-old">URI
of
</del>
<ins class="diff-chg">Indicates
</ins>
the
<del class="diff-old">endpoint
where
</del>
<ins class="diff-chg">exact
mechanism
by
which
</ins>
an
interaction
<del class="diff-old">pattern
is
provided.
</del>
<ins class="diff-chg">will
be
accomplished
for
a
given
protocol
when
there
are
multiple
options.
For
example,
for
HTTP
and
Events,
it
indicates
which
of
several
available
mechanisms
should
be
used
for
asynchronous
notifications.
</ins>
</td>
<td>
<del class="diff-old">yes
</del>
<ins class="diff-chg">no
</ins>
</td>
<td>.
</td>
<td>
<a href= "http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string">
<code>
<del class="diff-old">anyURI
</del>
<ins class="diff-chg">string
</ins>
</code>
</a>
<ins class="diff-chg">(one
of
</ins><code><ins class="diff-chg">
longpoll
</ins></code><ins class="diff-chg">
)
</ins>
</td>
</tr>
<tr class="rfc2119-table-assertion" id="td-vocab-contentType">
<td>
<code>
<del class="diff-old">mediaType
</del>
<ins class="diff-chg">contentType
</ins>
</code>
</td>
<td>
Assign
<del class="diff-old">the
underlying
</del>
<ins class="diff-chg">a
content
type
based
on
a
</ins>
media
type
<del class="diff-old">[
</del>
<ins class="diff-chg">[[!MEDIATYPES]]
(e.g.,
'application/json)
and
(optional)
parameters
(e.g.,
'charset=utf-8').
</ins></td><td><ins class="diff-chg">
yes
</ins></td><td><code><ins class="diff-chg">
application/json
</ins></code></td><td><a href= "http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string"><code><ins class="diff-chg">
string
</ins></code>
<del class="diff-old">MEDIATYPES
</del>
</a>
<del class="diff-old">]
</del>
</td>
</tr>
<tr class="rfc2119-table-assertion" id="td-vocab-href">
<td>
<code>
<ins class="diff-chg">href
</ins></code></td><td><ins class="diff-chg">
URI
</ins>
of
<ins class="diff-new">the
endpoint
where
</ins>
an
interaction
<del class="diff-old">pattern.
</del>
<ins class="diff-chg">pattern
is
provided.
</ins>
</td>
<td>
<del class="diff-old">no
</del>
<ins class="diff-chg">yes
</ins>
</td>
<del class="diff-old">application/json
</del>
<td>.
</td>
<td>
<a href= "http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#anyURI">
<code>
<del class="diff-old">string
</del>
<ins class="diff-chg">anyURI
</ins>
</code>
</a>
</td>
</tr>
<tr class="rfc2119-table-assertion" id="td-vocab-op">
<td>
<code>
<del class="diff-old">rel
</del>
<ins class="diff-chg">op
</ins>
</code>
</td>
<td>
Indicates
the
<del class="diff-old">expected
result
</del>
<ins class="diff-chg">semantic
intention
</ins>
of
performing
the
<del class="diff-old">operation
</del>
<ins class="diff-chg">operation(s)
</ins>
described
by
the
form.
For
example,
the
Property
interaction
allows
get
and
set
operations.
The
protocol
binding
may
contain
a
form
for
the
get
operation
and
a
different
form
for
the
set
operation.
The
<del class="diff-old">rel
</del>
<ins class="diff-chg">op
</ins>
attribute
indicates
which
form
is
<ins class="diff-new">for
</ins>
which
and
allows
the
client
to
select
the
correct
form
for
the
operation
required.
<ins class="diff-new">op
can
be
assigned
one
or
more
interaction
verb(s)
each
representing
a
semantic
intention
of
an
operation.
</ins>
</td>
<td>
no
</td>
<td>.
</td>
<td>
<ins class="diff-chg">(array
of)
</ins>
<a href= "http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string">
<code>
string
</code>
</a>
<ins class="diff-chg">each
representing
an
interaction
verb
(EDNOTE:
Link
to
wot-binding-templates)
(one
of
</ins><code><ins class="diff-chg">
readproperty
</ins></code>,<code><ins class="diff-chg">
writeproperty
</ins></code>,<code><ins class="diff-chg">
observeproperty
</ins></code>,<code><ins class="diff-chg">
invokeaction
</ins></code>,<code><ins class="diff-chg">
subscribeevent
</ins></code>,<code><ins class="diff-chg">
unsubscribeevent
</ins></code>,<code><ins class="diff-chg">
readallproperties
</ins></code>,<code><ins class="diff-chg">
writeallproperties
</ins></code>,<code><ins class="diff-chg">
readmultipleproperties
</ins></code>,<ins class="diff-chg">
or
</ins><code><ins class="diff-chg">
writemultipleproperties
</ins></code><ins class="diff-chg">
)
</ins>
</td>
</tr>
</tbody>
</table>
</section>
<section>
<h3>
<code>
<ins class="diff-new">Link
</ins></code></h3><p><ins class="diff-new">
A
Web
link,
as
specified
by
IETF
RFC
8288
(https://tools.ietf.org/html/rfc8288).
</ins></p><table class="def"><thead>
<tr>
<th>
<ins class="diff-new">Vocabulary
term
</ins></th><th><ins class="diff-new">
Description
</ins></th><th><ins class="diff-new">
Mandatory
</ins></th><th><ins class="diff-new">
Default
value
</ins></th><th><ins class="diff-new">
Type
</ins></th></tr></thead><tbody><tr class="rfc2119-table-assertion" id="td-vocab-anchor">
<td>
<code>
anchor
</code>
</td>
<td>
By
default,
the
context
of
a
link
is
the
URL
of
the
representation
it
is
associated
with,
and
is
<del class="diff-old">serialized
</del>
<ins class="diff-chg">serialised
</ins>
as
a
URI.
When
present,
the
anchor
parameter
overrides
this
with
another
URI,
such
as
a
fragment
of
this
resource,
or
a
third
resource
(i.e.,
when
the
anchor
value
is
an
absolute
URI).
</td>
<td>
no
</td>
<td>.
</td>
<td>
<a href= "http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#anyURI">
<code>
anyURI
</code>
</a>
</td>
</tr>
<tr class="rfc2119-table-assertion" id="td-vocab-rel">
<td>
<code>
<ins class="diff-new">rel
</ins></code></td><td><ins class="diff-new">
Indicates
the
relation
to
an
other
Thing.
</ins></td><td><ins class="diff-new">
no
</ins></td><td>.</td><td><a href= "http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string"><code><ins class="diff-new">
string
</ins></code></a></td></tr><tr class="rfc2119-table-assertion" id="td-vocab-href"><td><code><ins class="diff-new">
href
</ins></code></td><td><ins class="diff-new">
URI
of
the
endpoint
where
an
interaction
pattern
is
provided.
</ins></td><td><ins class="diff-new">
yes
</ins></td><td>.</td><td><a href= "http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#anyURI"><code><ins class="diff-new">
anyURI
</ins></code></a></td></tr><tr class="rfc2119-table-assertion" id="td-vocab-type"><td><code><ins class="diff-new">
type
</ins></code></td><td><ins class="diff-new">
Provides
a
hint
indicating
what
the
media
type
[[!MEDIATYPES]]
of
the
result
of
dereferencing
the
link
should
be.
</ins></td><td><ins class="diff-new">
no
</ins></td><td>.</td><td><a href= "http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string"><code><ins class="diff-new">
string
</ins></code></a></td></tr>
</tbody>
</table>
</section>
<section>
<h3>
<del class="diff-old">5.3
Data
Schema
</del>
<code>
<ins class="diff-chg">Versioning
</ins></code></h3><p><ins class="diff-chg">
Carries
version
information
about
the
TD
instance.
If
required,
additional
version
information
such
as
firmware
and
hardware
version
(term
definitions
outside
of
the
TD
namespace)
can
be
extended
here.
</ins></p><table class="def"><thead><tr><th>
Vocabulary
<del class="diff-old">Definition
</del>
<ins class="diff-chg">term
</ins></th><th><ins class="diff-chg">
Description
</ins></th><th><ins class="diff-chg">
Mandatory
</ins></th><th><ins class="diff-chg">
Default
value
</ins></th><th><ins class="diff-chg">
Type
</ins></th></tr></thead><tbody><tr class="rfc2119-table-assertion" id="td-vocab-instance"><td><code><ins class="diff-chg">
instance
</ins></code></td><td><ins class="diff-chg">
Provides
a
version
identicator
of
this
TD
instance.
</ins></td><td><ins class="diff-chg">
yes
</ins></td><td>.</td><td><a href= "http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string"><code><ins class="diff-chg">
string
</ins></code>
</a>
</td>
</tr>
</tbody>
</table>
</section>
<section>
<h3>
<code>
<ins class="diff-new">ExpectedResponse
</ins></code>
</h3>
<p>
<ins class="diff-chg">Communication
metadata
for
response
messages
(e.g.,
contentType
of
the
response).
</ins></p><table class="def"><thead><tr><th><ins class="diff-chg">
Vocabulary
term
</ins></th><th><ins class="diff-chg">
Description
</ins></th><th><ins class="diff-chg">
Mandatory
</ins></th><th><ins class="diff-chg">
Default
value
</ins></th><th><ins class="diff-chg">
Type
</ins></th></tr></thead><tbody><tr class="rfc2119-table-assertion" id="td-vocab-contentType"><td>
<del class="diff-old">5.3.1
</del>
<code>
<del class="diff-old">DataSchema
</del>
<ins class="diff-chg">contentType
</ins>
</code>
</td>
<td>
<ins class="diff-chg">Assign
a
content
type
based
on
a
media
type
[[!MEDIATYPES]]
(e.g.,
'application/json)
and
(optional)
parameters
(e.g.,
'charset=utf-8').
</ins></td><td><ins class="diff-chg">
no
</ins></td><td>.</td><td><a href= "http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string"><code><ins class="diff-chg">
string
</ins></code>
</a>
</td>
</tr>
</tbody>
</table>
</section>
<section>
<h3>
<code>
<ins class="diff-chg">MultiLanguage
</ins></code></h3><p><ins class="diff-chg">
Container
to
provide
human-readable
text
in
different
languages
using
language
tags
described
in
[[!BCP47]].
Each
used
language
tags
code
MUST
be
decleared
as
vocabulary
term
member
of
this
container
(e.g.,
en,
de,
ja,
zh-Hans,
zh-Hant).
</ins></p></section></section><section id="sec-data-schema-vocabulary-definition"><h2><ins class="diff-chg">
Data
Schema
Vocabulary
Definition
</ins></h2><section><h3><code><ins class="diff-chg">
DataSchema
</ins></code></h3>
<table class="def">
<thead>
<tr>
<th>
<del class="diff-old">Field
Name
</del>
<ins class="diff-chg">Vocabulary
term
</ins>
</th>
<th>
Description
</th>
<th>
Mandatory
</th>
<th>
Default
value
</th>
<th>
Type
</th>
</tr>
</thead>
<tbody>
<tr class="rfc2119-table-assertion" id="td-vocab-title">
<td>
<code>
<del class="diff-old">description
</del>
<ins class="diff-chg">title
</ins>
</code>
</td>
<td>
Provides
<del class="diff-old">additional
(human)
readable
information.
</del>
<ins class="diff-chg">a
human-readable
title
(e.g.,
display
a
text
for
UI
representation)
of
the
interaction
pattern
based
on
a
default
language.
</ins>
</td>
<td>
no
</td>
<td>.
</td>
<td>
<a href= "http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string">
<code>
string
</code>
</a>
</td>
</tr>
<tr class="rfc2119-table-assertion" id="td-vocab-oneOf">
<td>
<code>
<ins class="diff-chg">oneOf
</ins></code></td><td><ins class="diff-chg">
Used
to
ensure
that
the
data
is
valid
against
one
of
the
specified
schemas
in
the
array.
</ins></td><td><ins class="diff-chg">
no
</ins></td><td>.</td><td><ins class="diff-chg">
array
of
</ins><a href="#dataschema"><code><ins class="diff-chg">
DataSchema
</ins></code></a></td></tr><tr class="rfc2119-table-assertion" id="td-vocab-readOnly"><td><code><ins class="diff-chg">
readOnly
</ins></code></td><td><ins class="diff-chg">
Boolean
value
that
indicates
whether
a
property
interaction
/
value
is
read
only
(=true)
or
not
(=false).
</ins></td><td><ins class="diff-chg">
yes
</ins></td><td><code><ins class="diff-chg">
false
</ins></code></td><td><a href= "http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#boolean"><code><ins class="diff-chg">
boolean
</ins></code></a></td></tr><tr class="rfc2119-table-assertion" id="td-vocab-type">
<td>
<code>
type
</code>
</td>
<td>
Assignment
of
JSON-based
data
types
compatible
with
JSON
Schema
(one
of
boolean,
integer,
number,
string,
object,
array,
or
null).
</td>
<td>
no
</td>
<td>.
</td>
<td>
<a href= "http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string">
<code>
string
</code>
</a>
(one
of
<code>
<del class="diff-old">"boolean"
</del>
<ins class="diff-chg">object
</ins>
</code>,
<code>
<del class="diff-old">"integer"
</del>
<ins class="diff-chg">array
</ins>
</code>,
<code>
<del class="diff-old">"number"
</del>
<ins class="diff-chg">string
</ins>
</code>,
<code>
<del class="diff-old">"string"
</del>
<ins class="diff-chg">number
</ins>
</code>,
<code>
<del class="diff-old">"object"
</del>
<ins class="diff-chg">integer
</ins>
</code>,
<code>
<del class="diff-old">"array"
</del>
<ins class="diff-chg">boolean
</ins>
</code>,
or
<code>
<del class="diff-old">"null"
</del>
<ins class="diff-chg">null
</ins>
</code>
)
</td>
</tr>
<tr class="rfc2119-table-assertion" id="td-vocab-descriptions">
<td>
<code>
<ins class="diff-chg">descriptions
</ins></code></td><td><ins class="diff-chg">
Can
be
used
to
support
(human-readable)
information
in
different
languages.
</ins></td><td><ins class="diff-chg">
no
</ins></td><td>.</td><td><a href="#multilanguage"><code><ins class="diff-chg">
MultiLanguage
</ins></code></a></td></tr><tr class="rfc2119-table-assertion" id="td-vocab-description"><td><code><ins class="diff-chg">
description
</ins></code></td><td><ins class="diff-chg">
Provides
additional
(human-readable)
information
based
on
a
default
language.
</ins></td><td><ins class="diff-chg">
no
</ins></td><td>.</td><td><a href= "http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string"><code><ins class="diff-chg">
string
</ins></code></a></td></tr><tr class="rfc2119-table-assertion" id="td-vocab-const">
<td>
<code>
const
</code>
</td>
<td>
Provides
a
constant
value.
</td>
<td>
no
</td>
<td>.
</td>
<td>
<del class="diff-old">a
value
of
</del>
any
type
<del class="diff-old">that
is
consistent
with
the
type
given
to
the
above
type
field
definition
if
any
</del>
</td>
</tr>
<tr class="rfc2119-table-assertion" id="td-vocab-enum">
<td>
<code>
enum
</code>
</td>
<td>
Restricted
set
of
values
provided
as
an
array.
</td>
<td>
no
</td>
<td>.
</td>
<td>
array
of
<del class="diff-old">values
of
</del>
any
type
<del class="diff-old">with
each
consistent
with
the
type
given
to
</del>
</td>
</tr>
<tr class="rfc2119-table-assertion" id="td-vocab-titles">
<td>
<code>
<ins class="diff-chg">titles
</ins></code></td><td><ins class="diff-chg">
Provides
multi-language
human-readable
titles
(e.g.,
display
a
text
for
UI
representation
in
different
languages)
of
</ins>
the
<del class="diff-old">above
</del>
<ins class="diff-chg">interaction
pattern.
</ins></td><td><ins class="diff-chg">
no
</ins></td><td>.</td><td><a href="#multilanguage">
<code>
<del class="diff-old">type
</del>
<ins class="diff-chg">MultiLanguage
</ins>
</code>
<del class="diff-old">field
definition
if
any
</del>
</a>
</td>
</tr>
<tr class="rfc2119-table-assertion" id="td-vocab-writeOnly">
<td>
<code>
<ins class="diff-chg">writeOnly
</ins></code></td><td><ins class="diff-chg">
Boolean
value
that
indicates
whether
a
property
interaction
/
value
is
write
only
(=true)
or
not
(=false).
</ins></td><td><ins class="diff-chg">
yes
</ins></td><td><code><ins class="diff-chg">
false
</ins></code></td><td><a href= "http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#boolean"><code><ins class="diff-chg">
boolean
</ins></code></a></td></tr><tr class="rfc2119-table-assertion" id="td-vocab-unit"><td><code><ins class="diff-chg">
unit
</ins></code></td><td><ins class="diff-chg">
Provides
unit
information
that
is
used,
e.g.,
in
international
science,
engineering,
and
business.
</ins></td><td><ins class="diff-chg">
no
</ins></td><td>.</td><td><a href= "http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string"><code><ins class="diff-chg">
string
</ins></code></a>
</td>
</tr>
</tbody>
</table>
<p>
The
class
<code>
DataSchema
</code>
has
the
following
subclasses:
</p>
<ul>
<li>
<a href="#integerschema">
<code>
<ins class="diff-new">IntegerSchema
</ins></code></a></li><li>
<a href="#arrayschema">
<code>
ArraySchema
</code>
</a>
</li>
<li>
<a href="#booleanschema">
<code>
BooleanSchema
</code>
</a>
</li>
<li>
<a href="#nullschema">
<code>
<del class="diff-old">IntegerSchema
</del>
<ins class="diff-chg">NullSchema
</ins>
</code>
</a>
</li>
<li>
<a href="#objectschema">
<code>
<del class="diff-old">NumberSchema
</del>
<ins class="diff-chg">ObjectSchema
</ins>
</code>
</a>
</li>
<li>
<a href="#numberschema">
<code>
<del class="diff-old">ObjectSchema
</del>
<ins class="diff-chg">NumberSchema
</ins>
</code>
</a>
</li>
<li>
<a href="#stringschema">
<code>
StringSchema
</code>
</a>
</li>
</ul>
</section>
<section>
<h3>
<del class="diff-old">5.3.2
</del>
<code>
ArraySchema
</code>
</h3>
<p>
A
JSON
array
specification
("type":
"array").
</p>
<table class="def">
<thead>
<tr>
<th>
<del class="diff-old">Field
Name
</del>
<ins class="diff-chg">Vocabulary
term
</ins>
</th>
<th>
Description
</th>
<th>
Mandatory
</th>
<th>
Default
value
</th>
<th>
Type
</th>
</tr>
</thead>
<tbody>
<tr class="rfc2119-table-assertion" id="td-vocab-minItems">
<td>
<code>
<del class="diff-old">items
</del>
<ins class="diff-chg">minItems
</ins>
</code>
</td>
<td>
<del class="diff-old">Used
to
define
</del>
<ins class="diff-chg">Defines
</ins>
the
<del class="diff-old">characteristics
</del>
<ins class="diff-chg">minimum
number
</ins>
of
<del class="diff-old">an
</del>
<ins class="diff-chg">items
that
have
to
be
in
the
</ins>
array.
</td>
<td>
no
</td>
<td>.
</td>
<td>
<a href= "http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#unsignedInt">
<code>
<del class="diff-old">DataSchema
</del>
<ins class="diff-chg">unsignedInt
</ins>
</code>
</a>
</td>
</tr>
<tr class="rfc2119-table-assertion" id="td-vocab-maxItems">
<td>
<code>
<del class="diff-old">minItems
</del>
<ins class="diff-chg">maxItems
</ins>
</code>
</td>
<td>
Defines
the
<del class="diff-old">minimum
</del>
<ins class="diff-chg">maximum
</ins>
number
of
items
that
have
to
be
in
the
array.
</td>
<td>
no
</td>
<td>.
</td>
<td>
<a href= "http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#unsignedInt">
<code>
unsignedInt
</code>
</a>
</td>
</tr>
<tr class="rfc2119-table-assertion" id="td-vocab-items">
<td>
<code>
<del class="diff-old">maxItems
</del>
<ins class="diff-chg">items
</ins>
</code>
</td>
<td>
<del class="diff-old">Defines
the
maximum
number
of
items
that
have
</del>
<ins class="diff-chg">Used
</ins>
to
<del class="diff-old">be
in
</del>
<ins class="diff-chg">define
</ins>
the
<ins class="diff-new">characteristics
of
an
</ins>
array.
</td>
<td>
no
</td>
<td>.
</td>
<td>
<a href="#dataschema">
<code>
<del class="diff-old">unsignedInt
</del>
<ins class="diff-chg">DataSchema
</ins>
</code>
</a>
</td>
</tr>
</tbody>
</table>
</section>
<section>
<h3>
<del class="diff-old">5.3.3
</del>
<code>
<del class="diff-old">ObjectSchema
</del>
<ins class="diff-chg">BooleanSchema
</ins>
</code>
</h3>
<p>
<ins class="diff-chg">A
JSON
boolean
value
specification
("type":
"boolean").
</ins></p></section><section><h3>
<code>
<ins class="diff-chg">NumberSchema
</ins></code>
</h3>
<p>
A
JSON
<del class="diff-old">object
</del>
<ins class="diff-chg">number
value
</ins>
specification
("type":
<del class="diff-old">"object").
</del>
<ins class="diff-chg">"number").
</ins>
</p>
<table class="def">
<thead>
<tr>
<th>
<del class="diff-old">Field
Name
</del>
<ins class="diff-chg">Vocabulary
term
</ins>
</th>
<th>
Description
</th>
<th>
Mandatory
</th>
<th>
Default
value
</th>
<th>
Type
</th>
</tr>
</thead>
<tbody>
<tr class="rfc2119-table-assertion" id="td-vocab-maximum">
<td>
<code>
<del class="diff-old">properties
</del>
<ins class="diff-chg">maximum
</ins>
</code>
</td>
<td>
<del class="diff-old">Data
schema
nested
definitions.
</del>
<ins class="diff-chg">Specifies
a
maximum
numeric
value.
Only
applicable
for
associated
number
or
integer
types.
</ins>
</td>
<td>
no
</td>
<td>.
</td>
<td>
<a href= "http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#double">
<code>
<del class="diff-old">DataSchema
</del>
<ins class="diff-chg">double
</ins>
</code>
</a>
</td>
</tr>
<tr class="rfc2119-table-assertion" id="td-vocab-minimum">
<td>
<code>
<del class="diff-old">required
</del>
<ins class="diff-chg">minimum
</ins>
</code>
</td>
<td>
<del class="diff-old">Defines
which
members
of
the
object
type
are
mandatory.
</del>
<ins class="diff-chg">Specifies
a
minimum
numeric
value.
Only
applicable
for
associated
number
or
integer
types.
</ins>
</td>
<td>
no
</td>
<td>.
</td>
<td>
<del class="diff-old">array
of
</del>
<a href= "http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#double">
<code>
<del class="diff-old">string
</del>
<ins class="diff-chg">double
</ins>
</code>
</a>
</td>
</tr>
</tbody>
</table>
</section>
<del class="diff-old">5.3.4
BooleanSchema
A
JSON
boolean
value
specification
("type":
"boolean").
</del>
<section>
<h3>
<del class="diff-old">5.3.5
</del>
<code>
<del class="diff-old">NumberSchema
</del>
<ins class="diff-chg">IntegerSchema
</ins>
</code>
</h3>
<p>
A
JSON
<del class="diff-old">number
</del>
<ins class="diff-chg">integer
</ins>
value
<del class="diff-old">specification
</del>
<ins class="diff-chg">specification,
that
is,
numbers
without
a
fractional
part
</ins>
("type":
<del class="diff-old">"number").
</del>
<ins class="diff-chg">"integer").
</ins>
</p>
<table class="def">
<thead>
<tr>
<th>
<del class="diff-old">Field
Name
</del>
<ins class="diff-chg">Vocabulary
term
</ins>
</th>
<th>
Description
</th>
<th>
Mandatory
</th>
<th>
Default
value
</th>
<th>
Type
</th>
</tr>
</thead>
<tbody>
<tr class="rfc2119-table-assertion" id="td-vocab-maximum">
<td>
<code>
<del class="diff-old">minimum
</del>
<ins class="diff-chg">maximum
</ins>
</code>
</td>
<td>
Specifies
a
<del class="diff-old">minimum
</del>
<ins class="diff-chg">maximum
</ins>
numeric
value.
Only
applicable
for
associated
number
or
integer
types.
</td>
<td>
no
</td>
<td>.
</td>
<td>
<a href= "http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#integer">
<code>
<del class="diff-old">double
</del>
<ins class="diff-chg">integer
</ins>
</code>
</a>
</td>
</tr>
<tr class="rfc2119-table-assertion" id="td-vocab-minimum">
<td>
<code>
<del class="diff-old">maximum
</del>
<ins class="diff-chg">minimum
</ins>
</code>
</td>
<td>
Specifies
a
<del class="diff-old">maximum
</del>
<ins class="diff-chg">minimum
</ins>
numeric
value.
Only
applicable
for
associated
number
or
integer
types.
</td>
<td>
no
</td>
<td>.
</td>
<td>
<a href= "http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#integer">
<code>
<del class="diff-old">double
</del>
<ins class="diff-chg">integer
</ins>
</code>
</a>
</td>
</tr>
</tbody>
</table>
</section>
<section>
<h3>
<del class="diff-old">5.3.6
</del>
<code>
<del class="diff-old">StringSchema
</del>
<ins class="diff-chg">ObjectSchema
</ins>
</code>
</h3>
<p>
A
JSON
<del class="diff-old">string
value
</del>
<ins class="diff-chg">object
</ins>
specification
("type":
<del class="diff-old">"string").
5.3.7
IntegerSchema
A
JSON
integer
value
specification,
that
is,
numbers
without
a
fractional
part
("type":
"integer").
</del>
<ins class="diff-chg">"object").
</ins>
</p>
<table class="def">
<thead>
<tr>
<th>
<del class="diff-old">Field
Name
</del>
<ins class="diff-chg">Vocabulary
term
</ins>
</th>
<th>
Description
</th>
<th>
Mandatory
</th>
<th>
Default
value
</th>
<th>
Type
</th>
</tr>
</thead>
<tbody>
<tr class="rfc2119-table-assertion" id="td-vocab-required">
<td>
<code>
<del class="diff-old">minimum
</del>
<ins class="diff-chg">required
</ins>
</code>
</td>
<td>
<del class="diff-old">Specifies
a
minimum
numeric
value.
Only
applicable
for
associated
number
or
integer
types.
</del>
<ins class="diff-chg">Defines
which
members
of
the
object
type
are
mandatory.
</ins>
</td>
<td>
no
</td>
<td>.
</td>
<td>
<ins class="diff-chg">array
of
</ins><a href= "http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string">
<code>
<del class="diff-old">integer
</del>
<ins class="diff-chg">string
</ins>
</code>
</a>
</td>
</tr>
<tr class="rfc2119-table-assertion" id="td-vocab-properties">
<td>
<code>
<del class="diff-old">maximum
</del>
<ins class="diff-chg">properties
</ins>
</code>
</td>
<td>
<del class="diff-old">Specifies
a
maximum
numeric
value.
Only
applicable
for
associated
number
or
integer
types.
</del>
<ins class="diff-chg">Data
schema
nested
definitions.
</ins>
</td>
<td>
no
</td>
<td>.
</td>
<td>
<a href="#dataschema">
<code>
<del class="diff-old">integer
</del>
<ins class="diff-chg">DataSchema
</ins>
</code>
</a>
</td>
</tr>
</tbody>
</table>
</section>
<section>
<h3>
<code>
<ins class="diff-new">StringSchema
</ins></code></h3><p><ins class="diff-new">
A
JSON
string
value
specification
("type":
"string").
</ins></p>
</section>
<section>
<h3>
<del class="diff-old">5.4
</del>
<code>
<ins class="diff-chg">NullSchema
</ins></code></h3><p><ins class="diff-chg">
A
JSON
null
value
specification
("type":
"null").
Is
the
type
of
null
then
it
has
only
one
acceptable
value,
namely
null.
E.g.,
it
can
be
used
as
part
of
oneOf
declearation,
where
it
is
used
to
indicate,
that
a
data
schema
can
also
be
null.
</ins></p></section></section><section id="sec-security-vocabulary-definition"><h2>
Security
Vocabulary
Definition
</h2>
<p>
For
the
core
TD
vocabulary
only
well-established
security
mechanisms
are
supported,
such
as
those
built
into
protocols
supported
by
WoT
or
already
in
wide
use
with
those
protocols.
The
current
set
of
HTTP
security
schemes
is
partly
based
on
<a href= "https://github.com/OAI/OpenAPI-Specification/blob/master/versions/3.0.1.md#securitySchemeObject">
OpenAPI
3.0.1
</a>
(see
also
<del class="diff-old">[
OPENAPI
]).
</del>
<ins class="diff-chg">[[?OPENAPI]]).
</ins>
Note
however
that
while
the
HTTP
security
schemes,
vocabulary
and
syntax
given
in
this
specification
share
many
similarities
with
OpenAPI
they
are
not
fully
compatible.
Also,
since
OpenAPI
primarily
targets
web
services
built
around
HTTP,
it
does
not
cover
the
full
set
of
use
cases
required
for
the
IoT.
Security
schemes
appropriate
for
IoT-centered
protocols
such
as
CoAP
and
MQTT
are
therefore
also
included.
</p>
<del class="diff-old">Editor's
note
:
Security
Scheme
Extensions
</del>
<p class="ednote" title="Security Scheme Extensions">
The
vocabulary
extension
mechanism
of
the
WoT
Thing
Description
allows
for
additional
security
schemes
if
<del class="diff-old">needed.However,
</del>
<ins class="diff-chg">needed.
However,
</ins>
for
more
information
about
what
additional
security
schemes
or
modifications
are
under
discussion
for
the
core
WoT
<del class="diff-old">vocabulary(and
</del>
<ins class="diff-chg">vocabulary
(and
</ins>
to
file
issues
if
you
have
a
request)
please
visit
the
<a href= "https://github.com/w3c/wot-security">
WoT
Security
TF
repository.
</a>
</p>
<section>
<h3>
<del class="diff-old">5.4.1
</del>
<code>
SecurityScheme
</code>
</h3>
<table class="def">
<thead>
<tr>
<th>
<del class="diff-old">Field
Name
</del>
<ins class="diff-chg">Vocabulary
term
</ins>
</th>
<th>
Description
</th>
<th>
Mandatory
</th>
<th>
Default
value
</th>
<th>
Type
</th>
</tr>
</thead>
<tbody>
<tr class="rfc2119-table-assertion" id="td-vocab-proxy">
<td>
<code>
<del class="diff-old">scheme
</del>
<ins class="diff-chg">proxy
</ins>
</code>
</td>
<td>
<del class="diff-old">Identification
</del>
<ins class="diff-chg">URI
</ins>
of
<ins class="diff-new">the
proxy
server
this
</ins>
security
<del class="diff-old">mechanism
being
configured.
</del>
<ins class="diff-chg">configuration
provides
access
to.
If
not
given,
the
corresponding
security
configuration
is
for
the
endpoint.
</ins>
</td>
<td>
<del class="diff-old">yes
</del>
<ins class="diff-chg">no
</ins>
</td>
<td>.
</td>
<td>
<a href= "http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#anyURI">
<code>
<del class="diff-old">string
</del>
<ins class="diff-chg">anyURI
</ins>
</code>
</a>
<del class="diff-old">(one
of
"nosec"
,
"basic"
,
"cert"
,
"digest"
,
"bearer"
,
"pop"
,
"psk"
,
"public"
,
"oauth2"
,
or
"apikey"
)
</del>
</td>
</tr>
<tr class="rfc2119-table-assertion" id="td-vocab-description">
<td>
<code>
description
</code>
</td>
<td>
Provides
additional
<del class="diff-old">(human)
readable
information.
</del>
<ins class="diff-chg">(human-readable)
information
based
on
a
default
language.
</ins>
</td>
<td>
no
</td>
<td>.
</td>
<td>
<a href= "http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string">
<code>
string
</code>
</a>
</td>
</tr>
<tr class="rfc2119-table-assertion" id="td-vocab-scheme">
<td>
<code>
<del class="diff-old">proxyUrl
</del>
<ins class="diff-chg">scheme
</ins>
</code>
</td>
<td>
<del class="diff-old">URI
</del>
<ins class="diff-chg">Identification
</ins>
of
<del class="diff-old">the
proxy
server
this
security
configuration
provides
access
to.
If
not
given,
the
corresponding
</del>
security
<del class="diff-old">configuration
is
for
the
endpoint.
</del>
<ins class="diff-chg">mechanism
being
configured.
</ins>
</td>
<td>
<del class="diff-old">no
</del>
<ins class="diff-chg">yes
</ins>
</td>
<td>.
</td>
<td>
<a href= "http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string">
<code>
<del class="diff-old">anyURI
</del>
<ins class="diff-chg">string
</ins>
</code>
</a>
<ins class="diff-chg">(one
of
</ins><code><ins class="diff-chg">
nosec
</ins></code>,<code><ins class="diff-chg">
basic
</ins></code>,<code><ins class="diff-chg">
cert
</ins></code>,<code><ins class="diff-chg">
digest
</ins></code>,<code><ins class="diff-chg">
bearer
</ins></code>,<code><ins class="diff-chg">
pop
</ins></code>,<code><ins class="diff-chg">
psk
</ins></code>,<code><ins class="diff-chg">
public
</ins></code>,<code><ins class="diff-chg">
oauth2
</ins></code>,<ins class="diff-chg">
or
</ins><code><ins class="diff-chg">
apikey
</ins></code><ins class="diff-chg">
)
</ins>
</td>
</tr>
</tbody>
</table>
<p>
The
class
<code>
SecurityScheme
</code>
has
the
following
subclasses:
</p>
<ul>
<li>
<a href= "#psksecurityscheme">
<code>
<del class="diff-old">CertSecurityScheme
</del>
<ins class="diff-chg">PSKSecurityScheme
</ins>
</code>
</a>
</li>
<li>
<a href= "#apikeysecurityscheme">
<code>
APIKeySecurityScheme
</code>
</a>
</li>
<li>
<a href= "#nosecurityscheme">
<code>
<del class="diff-old">BasicSecurityScheme
</del>
<ins class="diff-chg">NoSecurityScheme
</ins>
</code>
</a>
</li>
<li>
<a href= "#certsecurityscheme">
<code>
<del class="diff-old">BearerSecurityScheme
</del>
<ins class="diff-chg">CertSecurityScheme
</ins>
</code>
</a>
</li>
<li>
<a href= "#popsecurityscheme">
<code>
<del class="diff-old">DigestSecurityScheme
</del>
<ins class="diff-chg">PoPSecurityScheme
</ins>
</code>
</a>
</li>
<li>
<a href= "#digestsecurityscheme">
<code>
<del class="diff-old">NoSecurityScheme
</del>
<ins class="diff-chg">DigestSecurityScheme
</ins>
</code>
</a>
</li>
<li>
<a href= "#oauth2securityscheme">
<code>
OAuth2SecurityScheme
</code>
</a>
</li>
<li>
<a href= "#bearersecurityscheme">
<code>
<del class="diff-old">PSKSecurityScheme
</del>
<ins class="diff-chg">BearerSecurityScheme
</ins>
</code>
</a>
</li>
<li>
<a href= "#basicsecurityscheme">
<code>
<del class="diff-old">PoPSecurityScheme
</del>
<ins class="diff-chg">BasicSecurityScheme
</ins>
</code>
</a>
</li>
<li>
<a href= "#publicsecurityscheme">
<code>
PublicSecurityScheme
</code>
</a>
</li>
</ul>
</section>
<section>
<h3>
<del class="diff-old">5.4.2
</del>
<code>
NoSecurityScheme
</code>
</h3>
<p>
A
security
configuration
corresponding
to
("scheme":
"nosec"),
indicating
there
is
no
authentication
or
other
mechanism
required
to
access
the
resource.
</p>
</section>
<section>
<h3>
<del class="diff-old">5.4.3
</del>
<code>
BasicSecurityScheme
</code>
</h3>
<p>
Basic
authentication
security
configuration
("scheme":
"basic"),
using
an
unencrypted
username
and
password.
This
scheme
should
be
used
with
some
other
security
mechanism
providing
confidentiality,
for
example,
TLS.
</p>
<table class="def">
<thead>
<tr>
<th>
<del class="diff-old">Field
Name
</del>
<ins class="diff-chg">Vocabulary
term
</ins>
</th>
<th>
Description
</th>
<th>
Mandatory
</th>
<th>
Default
value
</th>
<th>
Type
</th>
</tr>
</thead>
<tbody>
<tr class="rfc2119-table-assertion" id="td-vocab-name">
<td>
<code>
<del class="diff-old">in
</del>
<ins class="diff-chg">name
</ins>
</code>
</td>
<td>
<del class="diff-old">Specifies
the
location
of
security
authentication
information
(one
of
header,
</del>
<ins class="diff-chg">Name
for
</ins>
query,
<del class="diff-old">body,
</del>
<ins class="diff-chg">header,
</ins>
or
<del class="diff-old">cookie).
</del>
<ins class="diff-chg">cookie
parameters.
</ins>
</td>
<td>
no
</td>
<del class="diff-old">header
</del>
<td>.
</td>
<td>
<a href= "http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string">
<code>
string
</code>
</a>
</td>
</tr>
<tr class="rfc2119-table-assertion" id="td-vocab-in">
<td>
<code>
<del class="diff-old">name
</del>
<ins class="diff-chg">in
</ins>
</code>
</td>
<td>
<del class="diff-old">Name
for
query,
</del>
<ins class="diff-chg">Specifies
the
location
of
security
authentication
information
(one
of
</ins>
header,
<ins class="diff-new">query,
body,
</ins>
or
<del class="diff-old">cookie
parameters.
</del>
<ins class="diff-chg">cookie).
</ins>
</td>
<td>
no
</td>
<del class="diff-old">.
</del>
<td>
<code>
<ins class="diff-chg">header
</ins></code>
</td>
<td>
<a href= "http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string">
<code>
string
</code>
</a>
</td>
</tr>
</tbody>
</table>
</section>
<section>
<h3>
<del class="diff-old">5.4.4
</del>
<code>
<del class="diff-old">CertSecurityScheme
</del>
<ins class="diff-chg">DigestSecurityScheme
</ins>
</code>
</h3>
<p>
<del class="diff-old">Certificate-base
asymmetric
key
</del>
<ins class="diff-chg">Digest
authentication
</ins>
security
configuration
("scheme":
<del class="diff-old">"cert").
</del>
<ins class="diff-chg">"digest").
This
scheme
is
similar
to
basic
authentication
but
with
added
features
to
avoid
man-in-the-middle
attacks.
</ins>
</p>
<table class="def">
<thead>
<tr>
<th>
<del class="diff-old">Field
Name
</del>
<ins class="diff-chg">Vocabulary
term
</ins>
</th>
<th>
Description
</th>
<th>
Mandatory
</th>
<th>
Default
value
</th>
<th>
Type
</th>
</tr>
</thead>
<tbody>
<tr class="rfc2119-table-assertion" id="td-vocab-in">
<td>
<code>
<del class="diff-old">identity
</del>
<ins class="diff-chg">in
</ins>
</code>
</td>
<td>
<del class="diff-old">Pre-shared
key
identity.
</del>
<ins class="diff-chg">Specifies
the
location
of
security
authentication
information
(one
of
header,
query,
body,
or
cookie).
</ins></td><td><ins class="diff-chg">
no
</ins></td><td><code><ins class="diff-chg">
header
</ins></code></td><td><a href= "http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string"><code><ins class="diff-chg">
string
</ins></code></a></td></tr><tr class="rfc2119-table-assertion" id="td-vocab-qop"><td><code><ins class="diff-chg">
qop
</ins></code></td><td><ins class="diff-chg">
Quality
of
protection
(one
of
auth
or
auth-int).
</ins></td><td><ins class="diff-chg">
no
</ins></td><td><code><ins class="diff-chg">
auth
</ins></code></td><td><a href= "http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string"><code><ins class="diff-chg">
string
</ins></code></a></td></tr><tr class="rfc2119-table-assertion" id="td-vocab-name"><td><code><ins class="diff-chg">
name
</ins></code></td><td><ins class="diff-chg">
Name
for
query,
header,
or
cookie
parameters.
</ins>
</td>
<td>
no
</td>
<td>.
</td>
<td>
<a href= "http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string">
<code>
string
</code>
</a>
</td>
</tr>
</tbody>
</table>
</section>
<section>
<h3>
<del class="diff-old">5.4.5
</del>
<code>
<del class="diff-old">DigestSecurityScheme
</del>
<ins class="diff-chg">APIKeySecurityScheme
</ins>
</code>
</h3>
<p>
<del class="diff-old">Digest
</del>
<ins class="diff-chg">API
key
</ins>
authentication
security
configuration
("scheme":
<del class="diff-old">"digest").
</del>
<ins class="diff-chg">"apikey").
</ins>
This
<del class="diff-old">scheme
</del>
is
<del class="diff-old">similar
to
basic
authentication
but
with
added
features
to
avoid
man-in-the-middle
attacks.
</del>
<ins class="diff-chg">for
the
case
where
the
access
token
is
opaque
and
is
not
using
a
standard
token
format.
</ins>
</p>
<table class="def">
<thead>
<tr>
<th>
<del class="diff-old">Field
Name
</del>
<ins class="diff-chg">Vocabulary
term
</ins>
</th>
<th>
Description
</th>
<th>
Mandatory
</th>
<th>
Default
value
</th>
<th>
Type
</th>
</tr>
</thead>
<tbody>
<del class="diff-old">qop
Quality
of
protection
(one
of
auth
or
auth-int).
no
auth
string
</del>
<tr class="rfc2119-table-assertion" id="td-vocab-in">
<td>
<code>
in
</code>
</td>
<td>
Specifies
the
location
of
security
authentication
information
(one
of
header,
query,
body,
or
cookie).
</td>
<td>
no
</td>
<td>
<del class="diff-old">header
</del>
<code>
<ins class="diff-chg">query
</ins></code>
</td>
<td>
<a href= "http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string">
<code>
string
</code>
</a>
</td>
</tr>
<tr class="rfc2119-table-assertion" id="td-vocab-name">
<td>
<code>
name
</code>
</td>
<td>
Name
for
query,
header,
or
cookie
parameters.
</td>
<td>
no
</td>
<td>.
</td>
<td>
<a href= "http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string">
<code>
string
</code>
</a>
</td>
</tr>
</tbody>
</table>
</section>
<section>
<h3>
<del class="diff-old">5.4.6
</del>
<code>
BearerSecurityScheme
</code>
</h3>
<p>
Bearer
token
authentication
security
configuration
("scheme":
"bearer").
This
scheme
is
intended
for
situations
where
bearer
tokens
are
used
independently
of
OAuth2.
If
the
oauth2
scheme
is
specified
it
is
not
generally
necessary
to
specify
this
scheme
as
well
as
it
is
implied.
</p>
<table class="def">
<thead>
<tr>
<th>
<del class="diff-old">Field
Name
</del>
<ins class="diff-chg">Vocabulary
term
</ins>
</th>
<th>
Description
</th>
<th>
Mandatory
</th>
<th>
Default
value
</th>
<th>
Type
</th>
</tr>
</thead>
<tbody>
<tr class="rfc2119-table-assertion" id="td-vocab-name">
<td>
<code>
<del class="diff-old">authorizationUrl
</del>
<ins class="diff-chg">name
</ins>
</code>
</td>
<td>
<del class="diff-old">URI
of
the
authorization
server.
</del>
<ins class="diff-chg">Name
for
query,
header,
or
cookie
parameters.
</ins>
</td>
<td>
no
</td>
<td>.
</td>
<td>
<a href= "http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string">
<code>
<del class="diff-old">anyURI
</del>
<ins class="diff-chg">string
</ins>
</code>
</a>
</td>
</tr>
<tr class="rfc2119-table-assertion" id="td-vocab-alg">
<td>
<code>
alg
</code>
</td>
<td>
Encoding,
encryption,
or
digest
algorithm
(one
of
MD5,
ES256,
or
ES512-256).
</td>
<td>
no
</td>
<td>
<code>
ES256
</code>
</td>
<td>
<a href= "http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string">
<code>
string
</code>
</a>
</td>
</tr>
<tr class="rfc2119-table-assertion" id="td-vocab-authorization">
<td>
<code>
<del class="diff-old">format
</del>
<ins class="diff-chg">authorization
</ins>
</code>
</td>
<td>
<del class="diff-old">Specifies
format
of
security
authentication
information
(one
</del>
<ins class="diff-chg">URI
</ins>
of
<del class="diff-old">jwt,
jwe,
or
jws).
</del>
<ins class="diff-chg">the
authorization
server.
</ins>
</td>
<td>
no
</td>
<del class="diff-old">jwt
</del>
<td>.
</td>
<td>
<a href= "http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#anyURI">
<code>
<del class="diff-old">string
</del>
<ins class="diff-chg">anyURI
</ins>
</code>
</a>
</td>
</tr>
<tr class="rfc2119-table-assertion" id="td-vocab-in">
<td>
<code>
in
</code>
</td>
<td>
Specifies
the
location
of
security
authentication
information
(one
of
header,
query,
body,
or
cookie).
</td>
<td>
no
</td>
<td>
<code>
header
</code>
</td>
<td>
<a href= "http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string">
<code>
string
</code>
</a>
</td>
</tr>
<tr class="rfc2119-table-assertion" id="td-vocab-format">
<td>
<code>
<del class="diff-old">name
</del>
<ins class="diff-chg">format
</ins>
</code>
</td>
<td>
<del class="diff-old">Name
for
query,
header,
</del>
<ins class="diff-chg">Specifies
format
of
security
authentication
information
(one
of
jwt,
jwe,
</ins>
or
<del class="diff-old">cookie
parameters.
</del>
<ins class="diff-chg">jws).
</ins>
</td>
<td>
no
</td>
<del class="diff-old">.
</del>
<td>
<code>
<ins class="diff-chg">jwt
</ins></code>
</td>
<td>
<a href= "http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string">
<code>
string
</code>
</a>
</td>
</tr>
</tbody>
</table>
</section>
<section>
<h3>
<del class="diff-old">5.4.7
</del>
<code>
<del class="diff-old">PSKSecurityScheme
</del>
<ins class="diff-chg">CertSecurityScheme
</ins>
</code>
</h3>
<p>
<del class="diff-old">Pre-shared
</del>
<ins class="diff-chg">Certificate-base
asymmetric
</ins>
key
<del class="diff-old">authentication
</del>
security
configuration
("scheme":
<del class="diff-old">"psk").
</del>
<ins class="diff-chg">"cert").
</ins>
</p>
<table class="def">
<thead>
<tr>
<th>
<del class="diff-old">Field
Name
</del>
<ins class="diff-chg">Vocabulary
term
</ins>
</th>
<th>
Description
</th>
<th>
Mandatory
</th>
<th>
Default
value
</th>
<th>
Type
</th>
</tr>
</thead>
<tbody>
<tr class="rfc2119-table-assertion" id="td-vocab-identity">
<td>
<code>
identity
</code>
</td>
<td>
Pre-shared
key
identity.
</td>
<td>
no
</td>
<td>.
</td>
<td>
<a href= "http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string">
<code>
string
</code>
</a>
</td>
</tr>
</tbody>
</table>
</section>
<section>
<h3>
<del class="diff-old">5.4.8
</del>
<code>
<del class="diff-old">PublicSecurityScheme
</del>
<ins class="diff-chg">PSKSecurityScheme
</ins>
</code>
</h3>
<p>
<del class="diff-old">Raw
public
key
asymmetric
</del>
<ins class="diff-chg">Pre-shared
</ins>
key
<ins class="diff-new">authentication
</ins>
security
configuration
("scheme":
<del class="diff-old">"public").
</del>
<ins class="diff-chg">"psk").
</ins>
</p>
<table class="def">
<thead>
<tr>
<th>
<del class="diff-old">Field
Name
</del>
<ins class="diff-chg">Vocabulary
term
</ins>
</th>
<th>
Description
</th>
<th>
Mandatory
</th>
<th>
Default
value
</th>
<th>
Type
</th>
</tr>
</thead>
<tbody>
<tr class="rfc2119-table-assertion" id="td-vocab-identity">
<td>
<code>
identity
</code>
</td>
<td>
Pre-shared
key
identity.
</td>
<td>
no
</td>
<td>.
</td>
<td>
<a href= "http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string">
<code>
string
</code>
</a>
</td>
</tr>
</tbody>
</table>
</section>
<section>
<h3>
<del class="diff-old">5.4.9
</del>
<code>
<del class="diff-old">OAuth2SecurityScheme
</del>
<ins class="diff-chg">PublicSecurityScheme
</ins>
</code>
</h3>
<p>
<del class="diff-old">OAuth2
authentication
</del>
<ins class="diff-chg">Raw
public
key
asymmetric
key
</ins>
security
configuration
("scheme":
<del class="diff-old">"oauth2").
For
the
implicit
flow
the
authorizationUrl
and
scopes
are
required.
For
the
password
and
client
flows
both
tokenUrl
and
scopes
are
required.
For
the
code
flow
authorizationUrl,
tokenUrl,
and
scopes
are
required.
</del>
<ins class="diff-chg">"public").
</ins>
</p>
<table class="def">
<thead>
<tr>
<th>
<del class="diff-old">Field
Name
</del>
<ins class="diff-chg">Vocabulary
term
</ins>
</th>
<th>
Description
</th>
<th>
Mandatory
</th>
<th>
Default
value
</th>
<th>
Type
</th>
</tr>
</thead>
<tbody>
<tr class="rfc2119-table-assertion" id="td-vocab-identity">
<td>
<code>
<del class="diff-old">authorizationUrl
</del>
<ins class="diff-chg">identity
</ins>
</code>
</td>
<td>
<del class="diff-old">URI
of
the
authorization
server.
</del>
<ins class="diff-chg">Pre-shared
key
identity.
</ins>
</td>
<td>
no
</td>
<td>.
</td>
<td>
<a href= "http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string">
<code>
<del class="diff-old">anyURI
</del>
<ins class="diff-chg">string
</ins>
</code>
</a>
</td>
</tr>
</tbody>
</table>
</section>
<section>
<h3>
<code>
<ins class="diff-new">PoPSecurityScheme
</ins></code></h3><p><ins class="diff-new">
Proof-of-possession
token
authentication
security
configuration
("scheme":
"pop").
</ins></p><table class="def"><thead>
<tr>
<th>
<ins class="diff-new">Vocabulary
term
</ins></th><th><ins class="diff-new">
Description
</ins></th><th><ins class="diff-new">
Mandatory
</ins></th><th><ins class="diff-new">
Default
value
</ins></th><th><ins class="diff-new">
Type
</ins></th></tr></thead><tbody><tr class="rfc2119-table-assertion" id="td-vocab-name">
<td>
<code>
<del class="diff-old">tokenUrl
</del>
<ins class="diff-chg">name
</ins>
</code>
</td>
<td>
<del class="diff-old">URI
of
the
token
server.
</del>
<ins class="diff-chg">Name
for
query,
header,
or
cookie
parameters.
</ins>
</td>
<td>
no
</td>
<td>.
</td>
<td>
<a href= "http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string">
<code>
<del class="diff-old">anyURI
</del>
<ins class="diff-chg">string
</ins>
</code>
</a>
</td>
</tr>
<tr class="rfc2119-table-assertion" id="td-vocab-in">
<td>
<code>
<del class="diff-old">refreshUrl
</del>
<ins class="diff-chg">in
</ins>
</code>
</td>
<td>
<del class="diff-old">URI
of
</del>
<ins class="diff-chg">Specifies
</ins>
the
<del class="diff-old">refresh
server.
</del>
<ins class="diff-chg">location
of
security
authentication
information
(one
of
header,
query,
body,
or
cookie).
</ins>
</td>
<td>
no
</td>
<del class="diff-old">.
</del>
<td>
<code>
<del class="diff-old">anyURI
</del>
<ins class="diff-chg">header
</ins>
</code>
</td>
<td>
<del class="diff-old">scopes
Set
of
authorization
scope
identifiers,
provided
as
an
array.
These
are
provided
in
tokens
returned
by
an
authorization
server
and
associated
with
forms
in
order
to
identify
what
resources
a
client
may
access
and
how.
no
.
array
of
</del>
<a href= "http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string">
<code>
string
</code>
</a>
</td>
</tr>
<tr class="rfc2119-table-assertion" id="td-vocab-format">
<td>
<code>
<del class="diff-old">flow
</del>
<ins class="diff-chg">format
</ins>
</code>
</td>
<td>
<del class="diff-old">Authorization
flow
</del>
<ins class="diff-chg">Specifies
format
of
security
authentication
information
</ins>
(one
of
<del class="diff-old">implicit,
password,
client,
</del>
<ins class="diff-chg">jwt,
jwe,
</ins>
or
<del class="diff-old">code).
</del>
<ins class="diff-chg">jws).
</ins>
</td>
<td>
no
</td>
<td>
<del class="diff-old">implicit
</del>
<code>
<ins class="diff-chg">jwt
</ins></code>
</td>
<td>
<a href= "http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string">
<code>
string
</code>
</a>
</td>
</tr>
<del class="diff-old">5.4.10
APIKeySecurityScheme
API
key
authentication
security
configuration
("scheme":
"apikey").
This
is
for
the
case
where
the
access
token
is
opaque
and
is
not
using
a
standard
token
format.
Field
Name
Description
Mandatory
Default
value
Type
</del>
<tr class="rfc2119-table-assertion" id="td-vocab-alg">
<td>
<code>
<del class="diff-old">in
</del>
<ins class="diff-chg">alg
</ins>
</code>
</td>
<td>
<del class="diff-old">Specifies
the
location
of
security
authentication
information
</del>
<ins class="diff-chg">Encoding,
encryption,
or
digest
algorithm
</ins>
(one
of
<del class="diff-old">header,
query,
body,
</del>
<ins class="diff-chg">MD5,
ES256,
</ins>
or
<del class="diff-old">cookie).
</del>
<ins class="diff-chg">ES512-256).
</ins>
</td>
<td>
no
</td>
<td>
<del class="diff-old">query
</del>
<code>
<ins class="diff-chg">ES256
</ins></code>
</td>
<td>
<a href= "http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string">
<code>
string
</code>
</a>
</td>
</tr>
<tr class="rfc2119-table-assertion" id="td-vocab-authorization">
<td>
<code>
<del class="diff-old">name
</del>
<ins class="diff-chg">authorization
</ins>
</code>
</td>
<td>
<del class="diff-old">Name
for
query,
header,
or
cookie
parameters.
</del>
<ins class="diff-chg">URI
of
the
authorization
server.
</ins>
</td>
<td>
no
</td>
<td>.
</td>
<td>
<a href= "http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#anyURI">
<code>
<del class="diff-old">string
</del>
<ins class="diff-chg">anyURI
</ins>
</code>
</a>
</td>
</tr>
</tbody>
</table>
</section>
<section>
<h3>
<del class="diff-old">5.4.11
</del>
<code>
<del class="diff-old">PoPSecurityScheme
</del>
<ins class="diff-chg">OAuth2SecurityScheme
</ins>
</code>
</h3>
<p>
<del class="diff-old">Proof-of-possession
token
</del>
<ins class="diff-chg">OAuth2
</ins>
authentication
security
configuration
("scheme":
<del class="diff-old">"pop").
</del>
<ins class="diff-chg">"oauth2").
For
the
implicit
flow
the
authorization
and
scopes
are
required.
For
the
password
and
client
flows
both
token
and
scopes
are
required.
For
the
code
flow
authorization,
token,
and
scopes
are
required.
</ins>
</p>
<table class="def">
<thead>
<tr>
<th>
<del class="diff-old">Field
Name
</del>
<ins class="diff-chg">Vocabulary
term
</ins>
</th>
<th>
Description
</th>
<th>
Mandatory
</th>
<th>
Default
value
</th>
<th>
Type
</th>
</tr>
</thead>
<tbody>
<tr class="rfc2119-table-assertion" id="td-vocab-authorization">
<td>
<code>
<del class="diff-old">authorizationUrl
</del>
<ins class="diff-chg">authorization
</ins>
</code>
</td>
<td>
URI
of
the
authorization
server.
</td>
<td>
no
</td>
<td>.
</td>
<td>
<a href= "http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#anyURI">
<code>
anyURI
</code>
</a>
</td>
</tr>
<tr class="rfc2119-table-assertion" id="td-vocab-token">
<td>
<code>
<del class="diff-old">alg
</del>
<ins class="diff-chg">token
</ins>
</code>
</td>
<td>
<del class="diff-old">Encoding,
encryption,
or
digest
algorithm
(one
</del>
<ins class="diff-chg">URI
</ins>
of
<del class="diff-old">MD5,
ES256,
or
ES512-256).
</del>
<ins class="diff-chg">the
token
server.
</ins>
</td>
<td>
no
</td>
<del class="diff-old">ES256
</del>
<td>.
</td>
<td>
<a href= "http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#anyURI">
<code>
<del class="diff-old">string
</del>
<ins class="diff-chg">anyURI
</ins>
</code>
</a>
</td>
</tr>
<tr class="rfc2119-table-assertion" id="td-vocab-flow">
<td>
<code>
<del class="diff-old">format
</del>
<ins class="diff-chg">flow
</ins>
</code>
</td>
<td>
<del class="diff-old">Specifies
format
of
security
authentication
information
</del>
<ins class="diff-chg">Authorization
flow
</ins>
(one
of
<del class="diff-old">jwt,
jwe,
</del>
<ins class="diff-chg">implicit,
password,
client,
</ins>
or
<del class="diff-old">jws).
</del>
<ins class="diff-chg">code).
</ins>
</td>
<td>
no
</td>
<td>
<del class="diff-old">jwt
</del>
<code>
<ins class="diff-chg">implicit
</ins></code>
</td>
<td>
<a href= "http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string">
<code>
string
</code>
</a>
</td>
</tr>
<tr class="rfc2119-table-assertion" id="td-vocab-scopes">
<td>
<code>
<del class="diff-old">in
</del>
<ins class="diff-chg">scopes
</ins>
</code>
</td>
<td>
<del class="diff-old">Specifies
the
location
of
security
authentication
information
(one
</del>
<ins class="diff-chg">Set
</ins>
of
<del class="diff-old">header,
query,
body,
or
cookie).
</del>
<ins class="diff-chg">authorization
scope
identifiers,
provided
as
an
array.
These
are
provided
in
tokens
returned
by
an
authorization
server
and
associated
with
forms
in
order
to
identify
what
resources
a
client
may
access
and
how.
</ins>
</td>
<td>
no
</td>
<del class="diff-old">header
</del>
<td>.
</td>
<td>
<ins class="diff-chg">array
of
</ins>
<a href= "http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string">
<code>
string
</code>
</a>
</td>
</tr>
<tr class="rfc2119-table-assertion" id="td-vocab-refresh">
<td>
<code>
<del class="diff-old">name
</del>
<ins class="diff-chg">refresh
</ins>
</code>
</td>
<td>
<del class="diff-old">Name
for
query,
header,
or
cookie
parameters.
</del>
<ins class="diff-chg">URI
of
the
refresh
server.
</ins>
</td>
<td>
no
</td>
<td>.
</td>
<td>
<a href= "http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#anyURI">
<code>
<del class="diff-old">string
</del>
<ins class="diff-chg">anyURI
</ins>
</code>
</a>
</td>
</tr>
</tbody>
</table>
</section>
</section>
</section>
<section id="sec-td-serialization">
<del class="diff-old">6.
</del>
<h1>
Thing
Description
Serialization
<del class="diff-old">Editor's
note
:
JSON-LD
1.1
This
is
the
first
draft
that
uses
JSON-LD
1.1
as
a
serialization
format
of
the
Thing
Description.
As
that
is
work
in
progress,
working
assumptions
are
based
on
the
latest
Community
Draft
of
JSON-LD
1.1
.
A
new
JSON-LD
Working
Group
has
already
been
chartered
.
It
is
planned
that
this
section
will
conform
to
the
latest
working
draft
of
their
JSON-LD
1.1
deliverable
and
only
use
stable
elements.
</del>
</h1>
<p>
Thing
Description
instances
are
modeled
and
structured
based
on
Section
<del class="diff-old">5.
Information
Model
</del>
<a href="#sec-vocabulary-definition">
</a>.
This
section
defines
a
TD
serialization
based
on
JSON
<del class="diff-old">[
RFC8259
].
</del>
<ins class="diff-chg">[[!RFC8259]].
</ins>
</p>
<section id="json-serializiation-section">
<del class="diff-old">6.1
</del>
<h1>
<ins class="diff-chg">Basic
</ins>
Representation
Format
<del class="diff-old">The
JSON
serialization
of
TDs
follows
the
syntax
of
JSON-LD
1.1
in
order
to
streamline
semantic
evaluation.
Hence,
serializations
can
be
parsed
either
as
raw
JSON
or
with
a
JSON-LD
1.1
processor.
</del>
<ins class="diff-chg">Assumptions
</ins></h1>
<p>
In
order
to
enable
this
convergence,
all
vocabulary
terms
defined
in
Section
<del class="diff-old">5.
Information
Model
</del>
<a href="#sec-core-vocabulary-definition">
</a>
will
have
a
JSON
<del class="diff-old">key
</del>
<ins class="diff-chg">name
</ins>
representation.
</p>
<p>
<del class="diff-old">In
addition,
Thing
Description
instances
MAY
contain
JSON-LD
1.1
keywords
such
as
@context
and
@type
.
</del>
The
data
types
of
the
vocabulary
as
defined
in
Section
<del class="diff-old">5.3
Data
Schema
Vocabulary
Definition
</del>
<a href= "#sec-data-schema-vocabulary-definition">
</a>
will
be
transformed
to
JSON-based
types.
The
following
rules
are
used
for
vocabulary
terms
based
on
some
simple
type
definitions:
</p>
<ul>
<li>
<span class="rfc2119-assertion" id="td-string-type">
Vocabulary
terms
that
use
simple
types
string
and
anyURI
MUST
be
serialized
as
JSON
string.
</span>
</li>
<li>
<span class="rfc2119-assertion" id="td-integer-type">
Vocabulary
terms
that
use
simple
type
unsignedInt
MUST
be
serialized
as
JSON
integer.
</span>
</li>
<li>
<span class="rfc2119-assertion" id="td-number-type">
Vocabulary
terms
that
use
simple
type
double
MUST
be
serialized
as
JSON
number.
</span>
</li>
</ul>
<p>
<del class="diff-old">All
</del>
<span class="rfc2119-assertion" id="td-simple-form">
<ins class="diff-chg">A
Thing
Description
instance
serialization
MAY
omit
one
ore
more
vocabulary
terms
that
are
mandatory
AND
have
default
values
based
on
the
definitions
under
</ins><a href= "#sec-data-schema-vocabulary-definition"></a><ins class="diff-chg">
(e.g.,
</ins><code><ins class="diff-chg">
readOnly
</ins></code><ins class="diff-chg">
and
</ins><code><ins class="diff-chg">
contentType
</ins></code><ins class="diff-chg">
).
</ins></span><ins class="diff-chg">
In
this
specification,
this
form
is
referred
to
as
</ins><i><ins class="diff-chg">
Simple
</ins></i><ins class="diff-chg">
Thing
Description
representation.
The
processing
of
such
</ins><i><ins class="diff-chg">
Simple
</ins></i><ins class="diff-chg">
Thing
Description
representation
will
be
explained
in
</ins><a href= "#note-json-processing"></a>.<ins class="diff-chg">
When
a
Thing
Description
instance
carry
all
mandatory
</ins>
vocabulary
terms
<ins class="diff-new">we
will
call
this
representation
as
</ins><i><ins class="diff-new">
Full
</ins></i><ins class="diff-new">
Thing
Description.
</ins></p><p><ins class="diff-new">
In
addition,
</ins><span class="rfc2119-assertion" id= "td-jsonld-keywords"><ins class="diff-new">
Thing
Description
instances
MAY
contain
additional
JSON-LD
keywords
such
as
</ins><code><ins class="diff-new">
@context
</ins></code><ins class="diff-new">
and
</ins><code><ins class="diff-new">
@type
</ins></code>.<ins class="diff-new">
With
these
the
Thing
Description
can
be
easily
extended.
You
can
find
additional
details
</ins>
in
<ins class="diff-new">the
</ins>
Section
<a href= "#content-extension-section">
<del class="diff-old">5.
</del>
</a>.
</span>
<del class="diff-old">Information
Model
</del>
<span class= "rfc2119-assertion" id="td-at-type">
<ins class="diff-chg">In
the
case
of
</ins><code><ins class="diff-chg">
@type
</ins></code><ins class="diff-chg">
usage
in
the
Thing
Description
instance,
the
</ins><code><ins class="diff-chg">
@type
</ins></code><ins class="diff-chg">
MUST
be
serialized
as
JSON
String
or
as
JSON
array
of
strings
when
multiple
values
are
assigned
to
</ins><code><ins class="diff-chg">
@type
</ins></code>.
</span>
</p>
<p>
<ins class="diff-new">All
vocabulary
terms
in
Section
</ins><a href= "#sec-vocabulary-definition">
</a>
associated
with
more
complex
class-based
types
are
defined
separately
for
structured
JSON
type
transformation
in
the
following
subsections.
</p>
<section id="sec-thing-as-a-whole-json">
<del class="diff-old">6.1.1
</del>
<h2>
Thing
as
a
whole
</h2>
<p>
<span class="rfc2119-assertion" id="td-context">
The
root
object
of
a
Thing
Description
instance
MAY
include
the
<code>
@context
</code>
<del class="diff-old">key
</del>
<ins class="diff-chg">name
known
</ins>
from
JSON-LD
<del class="diff-old">1.1
</del>
with
the
value
URI
of
the
Thing
description
context
file
<code>
http://www.w3.org/ns/td
</code>.
</span>
</p>
<del class="diff-old">Example
3
{  
    : &lt;span class=
"hljs-string"&gt;"http://www.w3.org/ns/td",
</del>
<pre class="example">
<ins class="diff-chg">{  
    "@context": "http://www.w3.org/ns/td",
</ins>
    ...
}
</pre>
<del class="diff-old">Editor's
note
</del>
<p class="ednote">
<code>
http://www.w3.org/ns/td
</code>
uses
content
negotiation
to
return
the
context
file.
Thus,
it
must
be
fetched
with
an
<code>
Accept
</code>
header
set
to
<code>
application/ld+json
</code>.
</p>
<del class="diff-old">When
a
Thing
Description
instance
is
processed
and
interpreted
by
a
JSON-LD
1.1
processor
the
@context
field
MUST
be
present
(see
also
Section
JSON-LD
1.1
Processing
).
</del>
<p>
<span class="rfc2119-assertion" id="td-additional-contexts">
When
a
single
Thing
Description
instance
involves
several
contexts,
additional
namespaces
with
prefixes
MUST
be
appended
to
the
<code>
@context
</code>
array
structure.
</span>
This
option
proves
relevant
if
one
wants
to
extend
the
existing
Thing
Description
context
without
modifying
it.
For
instance:
</p>
<del class="diff-old">Example
4
{
    : [&lt;span class=
"hljs-string"&gt;"http://www.w3.org/ns/td",
                {&lt;span class=
"hljs-string"&gt;"iot": &lt;span class=
"hljs-string"&gt;"http://iotschema.org/"}],
</del>
<pre class="example">
<ins class="diff-chg">{
    "@context": ["http://www.w3.org/ns/td",
                {"iot": "http://example.org/iot"}],
</ins>
    ...
}
</pre>
<p>
<span class="rfc2119-assertion" id="td-context-toplevel">
Each
mandatory
and
optional
<del class="diff-old">field
</del>
<ins class="diff-chg">member
</ins>
name
as
defined
in
the
class
<a href= "#thing" class="sec-ref">
<code>
Thing
</code>
</a>
MUST
be
serialized
as
a
JSON
<del class="diff-old">key
</del>
<ins class="diff-chg">name
</ins>
in
the
root
object
of
the
Thing
Description
instance.
</span>
</p>
<p>
<span class="rfc2119-assertion" id="td-objects">
The
type
of
the
<del class="diff-old">fields
</del>
<ins class="diff-chg">members
</ins>
<code>
properties
</code>,
<code>
actions
</code>,
<del class="diff-old">and
</del>
<code>
events
</code>,
<code>
<ins class="diff-new">version
</ins></code>,<ins class="diff-new">
and
</ins><code><ins class="diff-new">
securityDefinitions
</ins>
</code>
MUST
be
a
JSON
object.
</span>
</p>
<p>
<span class="rfc2119-assertion" id="td-arrays">
The
type
of
the
<del class="diff-old">fields
</del>
<ins class="diff-chg">members
</ins><code><ins class="diff-chg">
forms
</ins></code>,
<code>
links
</code>,
<code>
scopes
</code>,
and
<code>
security
</code>
MUST
be
a
JSON
array.
</span>
</p>
<p>
A
TD
snippet
based
on
the
defined
<del class="diff-old">fields
</del>
<ins class="diff-chg">members
</ins>
of
the
class
<a href= "#thing" class="sec-ref">
<code>
Thing
</code>
</a>
without
the
optional
<del class="diff-old">field
</del>
<ins class="diff-chg">member
</ins>
<code>
@context
</code>
is
given
below:
</p>
<del class="diff-old">Example
5
{
    : &lt;span class=
"hljs-string"&gt;"urn:dev:wot:com:example:servient:myThing",
    : &lt;span class=
"hljs-string"&gt;"MyThing",
    : &lt;span class=
"hljs-string"&gt;"Additional (human) readable information of the Thing.",
    : &lt;span class=
"hljs-string"&gt;"https://servient.example.com/contact",
    : [...],
    : &lt;span class=
"hljs-string"&gt;"https://servient.example.com/",
    : {...},
    : {...},
    : {...},
    : [...]
</del>
<pre class="example">
<ins class="diff-chg">{
    "id": "urn:dev:wot:com:example:servient:myThing",
    "name": "MyThing",
    "description": "Human readable information.",
    "descriptions": {...},
    "support": "mailto:support@example.com",
    "securityDefinitions": {...},
    "security": [...],
    "base": "https://servient.example.com/",
    "lastModified" : "2018-11-15T09:12:43.124Z",
    "created" : "2018-11-14T19:10:23.824Z",
    "version" : {...},
    "properties": {...},
    "actions": {...},
    "events": {...},
    "links": [...],
    "forms": [...]
</ins>
}
</pre>
<p>
Alternatively,
the
same
example
can
be
written
instead
to
explicitly
include
the
(semantic)
<del class="diff-old">keys
</del>
<ins class="diff-chg">names
</ins>
used
by
<del class="diff-old">JSON-LD
1.1
(
</del>
<ins class="diff-chg">JSON-LD,
namely
</ins>
<code>
@context
</code>
and
<code>
@type
<del class="diff-old">):
</del>
</code>:
</p>
<del class="diff-old">Example
6
{
    : &lt;span class=
"hljs-string"&gt;"http://www.w3.org/ns/td",
    : &lt;span class=
"hljs-string"&gt;"Thing",
    : &lt;span class=
"hljs-string"&gt;"urn:dev:wot:com:example:servient:myThing",
    : &lt;span class=
"hljs-string"&gt;"MyThing",
    : &lt;span class=
"hljs-string"&gt;"Additional (human) readable information of the Thing.",
    : &lt;span class=
"hljs-string"&gt;"https://servient.example.com/contact",
    : [...],
    : &lt;span class=
"hljs-string"&gt;"https://servient.example.com/",
    : {...},
    : {...},
    : {...},
    : [...]
</del>
<pre class="example">
<ins class="diff-chg">{
    "@context": "http://www.w3.org/ns/td",
    "@type": "Thing",
    "id": "urn:dev:wot:com:example:servient:myThing",
    "name": "MyThing",
    "description": "Human readable information.",
    "descriptions": {...},
    "support": "mailto:support@example.com",
    "securityDefinitions": {...},
    "security": [...],
    "base": "https://servient.example.com/",
    "lastModified" : "2018-11-15T09:12:43.124Z",
    "created" : "2018-11-14T19:10:23.824Z",
    "version" : {...},
    "properties": {...},
    "actions": {...},
    "events": {...},
    "links": [...],
    "forms": [...]
</ins>
}
</pre>
<p>
<ins class="diff-new">In
that
case
the
content
can
be
directly
associated
as
Thing
Description
based
on
the
namespace
</ins><code><ins class="diff-new">
http://www.w3.org/ns/td
</ins></code><ins class="diff-new">
provided
in
the
</ins><code><ins class="diff-new">
@context
</ins></code>.<ins class="diff-new">
The
</ins><code><ins class="diff-new">
"@type":
"Thing"
</ins></code><ins class="diff-new">
associates
an
instantiations
of
the
Thing
class
as
defined
in
Section
</ins><a href= "#thing">
</a>.
</p>
</section>
<section id="property-serialization-json">
<h2>
<del class="diff-old">6.1.2
</del>
<code>
properties
</code>
</h2>
<p>
<span class="rfc2119-assertion" id="td-properties">
Properties
(and
sub-properties)
offered
by
a
Thing
MUST
be
collected
in
the
JSON-object
based
<code>
properties
</code>
<del class="diff-old">field
</del>
<ins class="diff-chg">member
</ins>
with
(unique)
Property
names
as
JSON
<del class="diff-old">keys.
</del>
<ins class="diff-chg">names.
</ins>
</span>
</p>
<p>
<span class="rfc2119-assertion" id="td-property-names">
Each
mandatory
and
optional
vocabulary
term
as
defined
in
the
class
<a href="#property" class="sec-ref">
<code>
Property
</code>
</a>,
as
well
as
its
two
superclasses
<a href="#interactionpattern" class= "sec-ref">
<code>
InteractionPattern
</code>
</a>
and
<a href= "#dataschema" class="sec-ref">
<code>
DataSchema
</code>
</a>,
MUST
be
serialized
as
a
JSON
<del class="diff-old">key
</del>
<ins class="diff-chg">name
</ins>
within
a
Property
object.
<del class="diff-old">The
type
</del>
<ins class="diff-chg">This
means
that
at
the
level
</ins>
of
<ins class="diff-new">an
interaction
property
instance,
</ins>
the
<del class="diff-old">fields
</del>
<ins class="diff-chg">vocabulary
terms
of
</ins><a href="#interactionpattern" class= "sec-ref">
<code>
<del class="diff-old">properties
</del>
<ins class="diff-chg">InteractionPattern
</ins>
</code>
</a>
and
<a href= "#dataschema" class="sec-ref">
<code>
<del class="diff-old">items
</del>
<ins class="diff-chg">DataSchema
</ins>
</code>
<del class="diff-old">MUST
</del>
</a>
<ins class="diff-chg">can
</ins>
be
<del class="diff-old">serialized
as
a
JSON
object.
</del>
<ins class="diff-chg">presented
at
the
same
time.
</ins>
</span>
</p>
<p>
<span class="rfc2119-assertion" id="td-property-arrays">
The
type
of
the
<del class="diff-old">fields
</del>
<ins class="diff-chg">members
</ins>
<code>
forms
</code>,
<code>
<del class="diff-old">required
,
and
enum
,
</del>
scopes
</code>,
and
<code>
security
</code>,
MUST
be
serialized
as
a
JSON
array.
</span>
</p>
<p>
A
TD
snippet
based
on
the
defined
<del class="diff-old">fields
</del>
<ins class="diff-chg">members
</ins>
is
given
below:
</p>
<aside class="example ds-selector-tabs changed" id= "property-serialization-sample" title= "Sample of a property interaction serialization">
<div class="selectors">
<del class="diff-old">Example
7
</del>
<button class="selected" data-selects= "original">
<ins class="diff-chg">Simple
</ins></button><button data-selects= "expanded"><ins class="diff-chg">
Full
</ins></button>
</div>
<del class="diff-old">{
</del>
<pre class="original selected">{
<ins class="diff-chg">        ...
        "properties": {
            "on": {
                "type": "boolean",
                "forms": [...]
            },
            "status": {
                "type": "object",
                "properties": {
                    "brightness": {
                        "type": "number",
                        "minimum": 0.0,
                        "maximum": 100.0
                        },
                        "rgb": {
                        "type": "array",
                        "items" : {
                            "type" : "number",
                            "minimum": 0,
                            "maximum": 255
                        },
                        "minItems": 3,
                        "maxItems": 3
                    }
                },
                "required": ["brightness", "rgb"],
                "forms": [...]
            }
        }
        ...
}
</ins></pre><pre class="expanded">{
    ...
<del class="diff-old">    : {
        : {
            : &lt;span class=
"hljs-string"&gt;"On/Off",
            : &lt;span class=
"hljs-string"&gt;"boolean",
            : [...]
</del>
<ins class="diff-chg">    "properties": {
        "on": {
            "type": "boolean",
            "readOnly" : false,
            "writeOnly" : false,
            "observable" : false,
            "forms": [...]
</ins>
        },
<del class="diff-old">        : {
            : &lt;span class=
"hljs-string"&gt;"object",
            : {
                : {
                    &lt;span class=
"hljs-string"&gt;"type": &lt;span class=
"hljs-string"&gt;"number",
                    &lt;span class=
"hljs-string"&gt;"minimum": &lt;span class=
"hljs-number"&gt;0.0,
                    &lt;span class=
"hljs-string"&gt;"maximum": &lt;span class=
"hljs-number"&gt;100.0
                 },
                 : {
                    &lt;span class=
"hljs-string"&gt;"type": &lt;span class=
"hljs-string"&gt;"array",
                     : {
                        &lt;span class=
"hljs-string"&gt;"type" : &lt;span class=
"hljs-string"&gt;"number",
                        &lt;span class=
"hljs-string"&gt;"minimum",
                        &lt;span class=
"hljs-string"&gt;"maximum": &lt;span class=
"hljs-number"&gt;255
</del>
<ins class="diff-chg">        "status": {
            "type": "object",
            "readOnly" : false,
            "writeOnly" : false,
            "properties": {
                "brightness": {
                    "type": "number",
                    "minimum": 0.0,
                    "maximum": 100.0,
                    "readOnly" : false,
                    "writeOnly" : false
</ins>
                    },
<del class="diff-old">                    &lt;span class=
"hljs-string"&gt;"minItems": &lt;span class=
"hljs-number"&gt;3,
                    &lt;span class=
"hljs-string"&gt;"maxItems"
</del>
<ins class="diff-chg">                    "rgb": {
                    "type": "array",
                    "readOnly" : false,
                    "writeOnly" : false,
                    "items" : {
                        "type" : "number",
                        "minimum": 0,
                        "maximum": 255,
                        "readOnly" : false,
                        "writeOnly" : false
                    },
                    "minItems": 3,
                    "maxItems": 3
</ins>
                }
            },
<del class="diff-old">            &lt;span class=
"hljs-string"&gt;"required": [&lt;span class=
"hljs-string"&gt;"brightness", &lt;span class=
"hljs-string"&gt;"rgb"],
            : [...]
</del>
<ins class="diff-chg">            "required": ["brightness", "rgb"],
            "forms": [...]
</ins>
        }
    }
    ...
}
</pre>
<del class="diff-old">Similar
to
the
case
at
the
Thing
level,
properties
MAY
have
additional
semantic
annotations
based
on
JSON-LD
1.1
keywords.
When
a
Thing
Description
instance
is
processed
and
interpreted
by
a
JSON-LD
1.1
processor,
each
property
MUST
contain
the
vocabulary
terms
observable
and
writable
due
to
the
open-world
assumption
of
Linked
Data.
This
assumption
means
that
if
a
Linked
Data
model
of
a
Thing
Description
instance
were
to
omit
these
vocabulary
terms,
then
the
interpreter
would
not
be
able
to
make
any
assumptions
about
their
actual
value.
A
snippet
of
a
JSON-LD
1.1
processable
TD
serialization
including
semantic
annotations
and
the
default
values
of
observable
and
writable
based
on
the
class
Property
is
given
as
follows:
Example
8
...
: {
    : {
        : &lt;span class=
"hljs-string"&gt;"iot:SwitchToggle",
        : &lt;span class=
"hljs-string"&gt;"On/Off",
        : &lt;span class=
"hljs-literal"&gt;false,
        : &lt;span class=
"hljs-literal"&gt;false,
        : &lt;span class=
"hljs-string"&gt;"boolean",
        : [...]
    },
    : {
        : &lt;span class=
"hljs-literal"&gt;false,
        : &lt;span class=
"hljs-literal"&gt;false,
        : &lt;span class=
"hljs-string"&gt;"object",
        : {
            : {
                &lt;span class=
"hljs-string"&gt;"@type": &lt;span class=
"hljs-string"&gt;"iot:CurrentLevel",
                &lt;span class=
"hljs-string"&gt;"type": &lt;span class=
"hljs-string"&gt;"number",
                &lt;span class=
"hljs-string"&gt;"minimum": &lt;span class=
"hljs-number"&gt;0.0,
                &lt;span class=
"hljs-string"&gt;"maximum": &lt;span class=
"hljs-number"&gt;100.0
            },
            : {
                &lt;span class=
"hljs-string"&gt;"@type": &lt;span class=
"hljs-string"&gt;"iot:rgbData",
                &lt;span class=
"hljs-string"&gt;"type": &lt;span class=
"hljs-string"&gt;"array",
                 : {
                    &lt;span class=
"hljs-string"&gt;"type" : &lt;span class=
"hljs-string"&gt;"number",
                    &lt;span class=
"hljs-string"&gt;"minimum",
                    &lt;span class=
"hljs-string"&gt;"maximum": &lt;span class=
"hljs-number"&gt;255
                },
                &lt;span class=
"hljs-string"&gt;"minItems": &lt;span class=
"hljs-number"&gt;3,
                &lt;span class=
"hljs-string"&gt;"maxItems"
            }
        },
        : [&lt;span class=
"hljs-string"&gt;"brightness",&lt;span class=
"hljs-string"&gt;"rgb"],
        : [...]
    }
}
...
</del>
</aside>
</section>
<section id="action-serialization-json">
<h2>
<del class="diff-old">6.1.3
</del>
<code>
actions
</code>
</h2>
<p>
<span class="rfc2119-assertion" id="td-actions">
Actions
offered
by
a
Thing
MUST
be
collected
in
the
JSON-object
based
<code>
actions
</code>
<del class="diff-old">field
</del>
<ins class="diff-chg">member
</ins>
with
(unique)
Action
names
as
JSON
<del class="diff-old">keys.
</del>
<ins class="diff-chg">names.
</ins>
</span>
</p>
<p>
<span class="rfc2119-assertion" id="td-action-names">
Each
optional
vocabulary
term
as
defined
in
the
class
<a href="#action" class="sec-ref">
<code>
Action
</code>
</a>
and
its
superclass
<a href= "#interactionpattern" class= "sec-ref">
<code>
InteractionPattern
</code>
</a>
MUST
be
serialized
as
a
JSON
<del class="diff-old">key
</del>
<ins class="diff-chg">name
</ins>
within
an
Action
object.
</span>
</p>
<p>
<span class="rfc2119-assertion" id="td-action-objects">
The
type
of
the
<del class="diff-old">fields
</del>
<ins class="diff-chg">members
</ins>
<code>
input
</code>
and
<code>
output
</code>
MUST
be
serialized
as
a
JSON
object.
</span>
</p>
<p>
The
<del class="diff-old">keys
of
</del>
<ins class="diff-chg">names
</ins>
<code>
input
</code>
and
<code>
output
</code>
rely
on
the
the
class
<a href="#dataschema" class= "sec-ref">
<code>
DataSchema
</code>
</a>
<ins class="diff-new">and
will
follow
the
serialization
introduction
provided
in
</ins><a href= "#data-schema-serialization-json">
</a>.
</p>
<p>
<span class="rfc2119-assertion" id="td-action-arrays">
The
type
of
the
<del class="diff-old">fields
</del>
<ins class="diff-chg">members
</ins>
<code>
forms
</code>,
<code>
scopes
</code>,
and
<code>
security
</code>
MUST
be
serialized
as
a
JSON
array.
</span>
</p>
<p>
A
TD
snippet
based
on
the
defined
<del class="diff-old">fields
</del>
<ins class="diff-chg">members
</ins>
is
given
below:
</p>
<aside class="example ds-selector-tabs changed" id= "action-serialization-sample" title= "Sample of a property interaction serialization">
<div class="selectors">
<del class="diff-old">Example
9
</del>
<button class="selected" data-selects= "original">
<ins class="diff-chg">Simple
</ins></button><button data-selects= "expanded"><ins class="diff-chg">
Full
</ins></button>
</div>
<del class="diff-old">...
: {
     {
        : &lt;span class=
"hljs-string"&gt;"Fade in/out",
        &lt;span class=
"hljs-string"&gt;"description",
        : {
            : &lt;span class=
"hljs-string"&gt;"object",
            : {
                : {
                    &lt;span class=
"hljs-string"&gt;"type": &lt;span class=
"hljs-string"&gt;"integer",
                    &lt;span class=
"hljs-string"&gt;"minimum",
                    &lt;span class=
"hljs-string"&gt;"maximum": &lt;span class=
"hljs-number"&gt;100
</del>
<pre class="original selected">{
<ins class="diff-chg">    ...
    "actions": {
        "fade" : {
            "title": "Fade in/out",
            "description": "Smooth fade in and out animation.",
            "input": {
                "type": "object",
                "properties": {
                    "from": {
                        "type": "integer",
                        "minimum": 0,
                        "maximum": 100
                    },
                    "to": {
                        "type": "integer",
                        "minimum": 0,
                        "maximum": 100
                    },
                    "duration": {"type": "number"}
</ins>
                },
<del class="diff-old">                : {
                    &lt;span class=
"hljs-string"&gt;"type": &lt;span class=
"hljs-string"&gt;"integer",
                    &lt;span class=
"hljs-string"&gt;"minimum",
                    &lt;span class=
"hljs-string"&gt;"maximum": &lt;span class=
"hljs-number"&gt;100
</del>
<ins class="diff-chg">                "required": ["to","duration"],
            },
            "output": {"type": "string"},
            "forms": [...]
        }
        ...
    }
    ...
</ins></pre><pre class="expanded">{<ins class="diff-chg">
    ...
    "actions": {
        "fade" : {
            "title": "Fade in/out",
            "description": "Smooth fade in and out animation.",
            "idempotent" :  false,
            "safe" :  false,
            "input": {
                "type": "object",
                "properties": {
                    "from": {
                        "type": "integer",
                        "minimum": 0,
                        "maximum": 100,
                        "readOnly" : false,
                        "writeOnly" : false
                    },
                    "to": {
                        "type": "integer",
                        "minimum": 0,
                        "maximum": 100,
                        "readOnly" : false,
                        "writeOnly" : false
                    },
                    "duration": {"type": "number"}
</ins>
                },
<del class="diff-old">                &lt;span class=
"hljs-string"&gt;"duration": {&lt;span class=
"hljs-string"&gt;"type": &lt;span class=
"hljs-string"&gt;"number"}
</del>
<ins class="diff-chg">                "required": ["to","duration"],
</ins>
            },
<del class="diff-old">            &lt;span class=
"hljs-string"&gt;"required": [&lt;span class=
"hljs-string"&gt;"to",&lt;span class=
"hljs-string"&gt;"duration"],
        },
        : {&lt;span class=
"hljs-string"&gt;"type": &lt;span class=
"hljs-string"&gt;"string"},
        : [...]
</del>
<ins class="diff-chg">            "output": {
                "type": "string",
                "readOnly" : false,
                "writeOnly" : false
            },
            "forms": [...]
        }
        ...
</ins>
    }
    ...
}
<del class="diff-old">...
</del>
</pre>
<del class="diff-old">Definitions
within
the
actions
field
MAY
have
additional
semantic
annotations
based
on
JSON-LD
1.1
keywords.
</del>
</aside>
</section>
<section id="event-serialization-json">
<h2>
<del class="diff-old">6.1.4
</del>
<code>
events
</code>
</h2>
<p>
<span class="rfc2119-assertion" id="td-events">
Events
offered
by
a
Thing
MUST
be
collected
in
the
JSON-object
based
<code>
events
</code>
<del class="diff-old">field
</del>
<ins class="diff-chg">member
</ins>
with
(unique)
Event
names
as
JSON
<del class="diff-old">keys.
</del>
<ins class="diff-chg">names.
</ins>
</span>
</p>
<p>
<span class="rfc2119-assertion" id="td-event-names">
Each
optional
vocabulary
term
as
defined
in
the
class
<a href="#event" class="sec-ref">
<code>
Event
</code>
</a>,
as
well
as
its
two
superclasses
<a href="#interactionpattern" class= "sec-ref">
<code>
InteractionPattern
</code>
</a>
and
<a href= "#dataschema" class="sec-ref">
<code>
DataSchema
</code>
</a>,
MUST
be
serialized
as
a
JSON
<del class="diff-old">key
</del>
<ins class="diff-chg">name
</ins>
within
an
Event
object.
</span>
</p>
<p>
<span class="rfc2119-assertion" id="td-event-objects">
The
type
of
the
<del class="diff-old">fields
</del>
<ins class="diff-chg">members
</ins>
<code>
<del class="diff-old">properties
</del>
<ins class="diff-chg">subscription
</ins></code>,<code><ins class="diff-chg">
data
</ins></code>,
and
<code>
<del class="diff-old">items
</del>
<ins class="diff-chg">cancellation
</ins>
</code>
MUST
be
serialized
as
a
JSON
object.
</span>
</p>
<p>
The
<del class="diff-old">type
</del>
<ins class="diff-chg">JSON
names
</ins>
of
<del class="diff-old">the
fields
</del>
<code>
<del class="diff-old">forms
</del>
<ins class="diff-chg">subscription
</ins>
</code>,
<code>
<del class="diff-old">required
</del>
<ins class="diff-chg">data
</ins>
</code>,
and
<code>
<del class="diff-old">enum
</del>
<ins class="diff-chg">cancellation
</ins></code><ins class="diff-chg">
rely
on
the
the
class
</ins><a href= "#dataschema" class="sec-ref"><code><ins class="diff-chg">
DataSchema
</ins></code></a><ins class="diff-chg">
and
will
follow
the
serialization
introduction
provided
in
</ins><a href= "#data-schema-serialization-json"></a>.</p><p><span class="rfc2119-assertion" id="td-event-arrays"><ins class="diff-chg">
The
type
of
the
members
</ins><code><ins class="diff-chg">
forms
</ins>
</code>,
<code>
scopes
</code>,
and
<code>
security
</code>
MUST
be
serialized
as
a
JSON
array.
</span>
</p>
<p>
A
TD
snippet
based
on
the
defined
<del class="diff-old">fields
</del>
<ins class="diff-chg">members
</ins>
is
given
below:
</p>
<aside class="example ds-selector-tabs changed" id= "event-serialization-sample" title= "Sample of a property interaction serialization">
<div class="selectors">
<del class="diff-old">Example
10
</del>
<button class="selected" data-selects= "original">
<ins class="diff-chg">Simple
</ins></button><button data-selects= "expanded"><ins class="diff-chg">
Full
</ins></button>
</div>
<del class="diff-old">...
: {
    : {
        : &lt;span class=
"hljs-string"&gt;"object",
        : {
            &lt;span class=
"hljs-string"&gt;"temperature": { &lt;span class=
"hljs-string"&gt;"type": &lt;span class=
"hljs-string"&gt;"number" }
        },
        : [...]
</del>
<pre class="original selected">{
<ins class="diff-chg">        ...
        "events": {
            "overheated": {
                "data" : {"type": "object"},
                "forms": [...]
            }
            ...
        }
        ...
</ins></pre><pre class="expanded">{<ins class="diff-chg">
    ...
    "events": {
        "overheated": {
            "data" : {
                "type": "object",
                "readOnly" : false,
                "writeOnly" : false
            },
            "forms": [...]
        }
        ...
</ins>
    }
    ...
}
<del class="diff-old">...
</del>
</pre>
<del class="diff-old">Definitions
within
the
events
field
MAY
have
additional
semantic
annotations
based
on
JSON-LD
1.1
keywords.
</del>
</aside>
</section>
<section id="form-serialization-json">
<h2>
<del class="diff-old">6.1.5
</del>
<code>
forms
</code>
</h2>
<p>
<span class="rfc2119-assertion" id="td-forms">
Each
mandatory
and
optional
vocabulary
term
as
defined
in
the
class
<a href="#form" class="sec-ref">
<code>
Form
</code>
</a>,
MUST
be
serialized
as
a
JSON
<del class="diff-old">key.
</del>
<ins class="diff-chg">name.
</ins></span></p><p><span class="rfc2119-assertion" id="td-event-response-arrays"><ins class="diff-chg">
If
required,
the
type
of
the
member
</ins><code><ins class="diff-chg">
response
</ins></code><ins class="diff-chg">
MUST
be
serialized
as
a
JSON
array.
</ins>
</span>
</p>
<p>
<span class="rfc2119-assertion" id="td-form-protocolbindings">
If
required,
<code>
forms
</code>
MAY
be
supplemented
with
protocol-specific
vocabulary
terms
identified
with
a
prefix.
</span>
See
also
<del class="diff-old">[
</del>
<a href="#content-extension-section">
<del class="diff-old">WOT-PROTOCOL-BINDING
</del>
</a>.
</p>
<p>
<ins class="diff-chg">A
TD
snippet
based
on
the
defined
members
is
given
below:
</ins></p><pre class="example"><ins class="diff-chg">
{
  "@context": ["http://www.w3.org/ns/td",
    {"http": "http://www.w3.org/2011/http#"}],
  ...
  "securityDefinitions": {
      "basic_sc": {"scheme":"basic", "in":"header"}
  },
    ...
    "forms": [{
        "href" : "http://mytemp.example.com:5683/temp",
        "contentType": "application/json",
        "http:methodName": "POST",
        "op": "writeproperty",
        "security": ["basic_sc"]
    }]
    ...
}
</ins></pre><p>
<del class="diff-old">].
</del>
<code>
<ins class="diff-chg">href
</ins></code><ins class="diff-chg">
may
also
carry
an
URI
that
contains
dynamic
variables
such
as
p
and
d
in
http://192.168.1.25/left?p=2&amp;d=1.
In
that
case
the
URI
can
be
defined
as
template
as
defined
in
[[!RFC6570]]:
http://192.168.1.25/left{?p,d}
</ins>
</p>
<p>
<del class="diff-old">When
</del>
<span class="rfc2119-assertion" id="td-uriVariables">
<ins class="diff-chg">In
such
</ins>
a
<del class="diff-old">Thing
Description
instance
</del>
<ins class="diff-chg">case
these
variables
in
the
URI
MUST
be
collected
in
the
JSON-object
based
</ins><code><ins class="diff-chg">
uriVariables
</ins></code><ins class="diff-chg">
member
with
the
associated
(unique)
variables
names
as
JSON
names.
</ins></span></p><p><span class="rfc2119-assertion" id="td-uriVariables"><ins class="diff-chg">
Each
defined
JSON
name
of
the
</ins><code><ins class="diff-chg">
uriVariables
</ins></code><ins class="diff-chg">
collection
MUST
rely
on
the
the
class
</ins><a href="#dataschema" class= "sec-ref"><code><ins class="diff-chg">
DataSchema
</ins></code></a>.</span></p><p><ins class="diff-chg">
A
TD
snippet
using
URI
template
and
</ins><code><ins class="diff-chg">
uriVariables
</ins></code>
is
<del class="diff-old">processed
</del>
<ins class="diff-chg">given
below:
</ins></p><pre class="example"><ins class="diff-chg">
        "@context": ["http://www.w3.org/ns/td",
            {"http": "http://www.w3.org/2011/http#"},
            {"eg": "http://www.example.org/iot"}],
        ...
        "actions": {
            "LeftDown": {
              "uriVariables": {
                "p" : { "type": "integer", "minimum": 0, "maximum": 16, "@type": "eg:SomeKindOfAngle" },
                "d" : { "type": "integer", "minimum": 0, "maximum": 1, "@type": "eg:Direction" }
                }
              },
              "forms": [{
                "http:method": "GET",
                "href" : "http://192.168.1.25/left{?p,d}"
              }]
            }
        ...
</ins></pre><p><ins class="diff-chg">
The
</ins><code><ins class="diff-chg">
contentType
</ins></code><ins class="diff-chg">
is
used
to
assign
a
media
types
[[!MEDIATYPES]]
</ins>
and
<del class="diff-old">interpreted
</del>
<ins class="diff-chg">MAY
contain
one
or
more
parameters
as
attribute-value
pair
separated
</ins>
by
a
<del class="diff-old">JSON-LD
1.1
processor,
each
</del>
<code>
<del class="diff-old">forms
</del>
<ins class="diff-chg">;
</ins>
</code>
<del class="diff-old">(array)
entry
MUST
contain
a
</del>
<ins class="diff-chg">character.
Example:
</ins></p><pre class="example"><ins class="diff-chg">
    ...
    "contentType" : "application/text; charset=utf-8"
    ...
</ins></pre><p><ins class="diff-chg">
In
some
use
cases,
the
form
metadata
of
the
interaction
pattern
must
be
distinguished
between
request
and
response
based
messages.
E.g.,
an
action
'takePhoto'
defines
an
</ins>
<code>
<del class="diff-old">mediaType
</del>
<ins class="diff-chg">input
</ins>
</code>
<del class="diff-old">due
</del>
to
<del class="diff-old">the
open-world
assumption
</del>
<ins class="diff-chg">submit
parameter
settings
</ins>
of
<del class="diff-old">Linked
Data.
This
assumption
means
that
if
</del>
a
<del class="diff-old">Linked
Data
model
</del>
<ins class="diff-chg">camera
(aperture
priority,
timer,..)
using
json
as
content
type
(="contentType":"application/json").
The
</ins><code><ins class="diff-chg">
output
</ins></code>
of
<del class="diff-old">a
Thing
Description
instance
were
to
omit
these
vocabulary
terms,
then
</del>
<ins class="diff-chg">this
action
is
</ins>
the
<del class="diff-old">interpreter
would
not
</del>
<ins class="diff-chg">photo
taken,
which
is
available
in
jpeg
format,
for
example.
In
such
cases,
the
</ins><code><ins class="diff-chg">
response
</ins></code><ins class="diff-chg">
can
</ins>
be
<del class="diff-old">able
</del>
<ins class="diff-chg">used
</ins>
to
<del class="diff-old">make
any
assumptions
about
their
actual
value.
</del>
<ins class="diff-chg">provide
a
response
content
type
(e.g.,
"contentType":"image/jpeg").
</ins></p><p><span class="rfc2119-assertion" id="td-forms-response"><ins class="diff-chg">
If
the
</ins><code><ins class="diff-chg">
response
</ins></code><ins class="diff-chg">
member
is
used
in
</ins><code><ins class="diff-chg">
forms
</ins></code>,<ins class="diff-chg">
it
MUST
contain
the
</ins><code><ins class="diff-chg">
contentType
</ins></code><ins class="diff-chg">
as
defined
in
class
</ins><a href= "#expectedresponse" class= "sec-ref"><code><ins class="diff-chg">
ExpectedResponse
</ins></code></a>.</span>
</p>
<p>
A
<del class="diff-old">TD
</del>
<code>
<ins class="diff-chg">form
</ins></code>
snippet
<ins class="diff-new">with
the
</ins><code><ins class="diff-new">
response
</ins></code><ins class="diff-new">
member
is
listed
below
</ins>
based
on
the
<del class="diff-old">defined
fields
is
given
below:
</del>
<ins class="diff-chg">use
case
of
the
action
'takePhoto'
described
above:
</ins>
</p>
<pre class="example">
<ins class="diff-chg">    "@context": ["http://www.w3.org/ns/td",
        {"http": "http://www.w3.org/2011/http#"}],
    ...
    "forms": [
        {
          "href": "http://upsq1c.local:9191/api/frame/crop",
          "contentType": "application/json",
          "op": ["invokeaction"],
          "http:methodName": "POST",
          "response": {
            "contentType": "image/jpeg"
          }
        }
      ]
    ...
</ins></pre><p><ins class="diff-chg">
When
</ins><code><ins class="diff-chg">
forms
</ins></code><ins class="diff-chg">
is
present
at
the
top
level,
it
can
be
used
to
describe
meta
interactions
supported
by
a
</ins><a href="#thing" class="sec-ref">
<del class="diff-old">Example
11
</del>
<code>
<ins class="diff-chg">Thing
</ins></code>
<del class="diff-old">...
: [{
     : &lt;span class=
"hljs-string"&gt;"http://mytemp.example.com:5683/temp",
    : &lt;span class=
"hljs-string"&gt;"application/json",
    &lt;span class=
"hljs-string"&gt;"http:methodName",
    : &lt;span class=
"hljs-string"&gt;"writeProperty",
    : [{&lt;span class=
"hljs-string"&gt;"scheme":&lt;span class=
"hljs-string"&gt;"basic", &lt;span class=
"hljs-string"&gt;"in":&lt;span class=
"hljs-string"&gt;"header"}]
}]
...
</del>
</a>
<ins class="diff-chg">instance.
For
example,
operations
"readallproperties"
and
"writeallproperties"
are
meta
interactions
by
which
clients
can
read
and
write
all
properties
of
the
thing
at
once.
In
the
example
below,
</ins><code><ins class="diff-chg">
forms
</ins></code><ins class="diff-chg">
is
used
at
the
top
level,
and
the
clients
can
access
end
point
(i.e.
</ins><code><ins class="diff-chg">
https://mylamp.example.com/allproperties
</ins></code><ins class="diff-chg">
)
both
to
read
or
write
all
properties
(i.e.
</ins><code><ins class="diff-chg">
"on"
</ins></code>,<code><ins class="diff-chg">
"brightness"
</ins></code><ins class="diff-chg">
and
</ins><code><ins class="diff-chg">
"timer"
</ins></code><ins class="diff-chg">
property)
of
the
thing
by
a
single
interaction.
</ins></p><pre class="example" id="td-forms-readall-example"><ins class="diff-chg">
{
    "id": "urn:dev:wot:com:example:servient:lamp",
    ...
    "forms": [
        {
          "href": "https://mylamp.example.com/allproperties",
          "contentType": "application/json",
          "op": ["readallproperties", "writeallproperties"],
        }
    ],
    ...
    "properties": {
        "on": {
          "type": "boolean",
          "forms": [...]
        },
        "brightness": {
          "type": "number",
          "forms": [...]
        },
        "timer": {
          "type": "integer",
          "forms": [...]
        }
    },
    ...
}
</ins>
</pre>
</section>
<section id="links-serialization-json">
<h2>
<del class="diff-old">6.1.6
</del>
<code>
links
</code>
</h2>
<p>
<span class="rfc2119-assertion" id="td-links">
Each
mandatory
and
optional
vocabulary
term
as
defined
in
the
class
<a href="#link" class="sec-ref">
<code>
Link
</code>
</a>,
MUST
be
serialized
as
a
JSON
<del class="diff-old">key.
</del>
<ins class="diff-chg">name.
</ins>
</span>
</p>
<p>
A
TD
snippet
based
on
the
defined
<del class="diff-old">fields
</del>
<ins class="diff-chg">members
</ins>
is
given
below:
</p>
<del class="diff-old">Example
12
...
: [{
    : &lt;span class=
"hljs-string"&gt;"https://servient.example.com/things/lampController",
    : &lt;span class=
"hljs-string"&gt;"controlledBy",
    : &lt;span class=
"hljs-string"&gt;"application/td+json"
}]
...
</del>
<pre class="example">
<ins class="diff-chg">    ...
    "links": [{
        "href": "https://servient.example.com/things/lampController",
        "rel": "controlledBy",
        "type": "application/td+json"
    }]
    ...
</ins>
</pre>
</section>
<section id="security-serialization-json">
<h2>
<del class="diff-old">6.1.7
</del>
<code>
<ins class="diff-chg">securityDefinitions
</ins></code><ins class="diff-chg">
and
</ins>
<code>
security
</code>
</h2>
<p>
<span class="rfc2119-assertion" id="td-security">
Each
mandatory
and
optional
vocabulary
term
as
defined
in
the
class
<a href= "#securityscheme" class="sec-ref">
<code>
SecurityScheme
</code>
</a>,
MUST
be
serialized
as
a
JSON
<del class="diff-old">key.
</del>
<ins class="diff-chg">name.
</ins>
</span>
</p>
<p>
The
following
TD
snippet
shows
a
simple
security
configuration
specifying
basic
username/password
authentication
in
the
header.
The
value
of
<code>
in
</code>
given
is
actually
the
default
value
of
<code>
header
</code>.
<ins class="diff-new">First,
a
named
security
configuration
must
be
given
in
a
</ins><code><ins class="diff-new">
securityDefinitions
</ins></code><ins class="diff-new">
block.
Second,
that
definition
must
be
activated
in
a
</ins><code><ins class="diff-new">
security
</ins></code><ins class="diff-new">
block.
</ins>
</p>
<del class="diff-old">Example
13
...
: [{
    : &lt;span class=
"hljs-string"&gt;"basic",
    : &lt;span class=
"hljs-string"&gt;"header"
}]
...
</del>
<pre class="example" id="security-basic-example">
<ins class="diff-chg">   ...
   "securityDefinitions": {
       "basic_sc": {
           "scheme": "basic",
           "in": "header"
       }
   },
   ...
   "security": ["basic_sc"]
   ...
</ins>
</pre>
<p>
Here
is
a
more
complex
example:
a
TD
snippet
showing
digest
authentication
on
a
proxy
combined
with
bearer
token
authentication
on
an
endpoint.
Here
the
default
value
of
<code>
in
</code>
in
the
<code>
digest
</code>
scheme,
<code>
header
</code>,
is
implied.
</p>
<del class="diff-old">Example
14
...
: [
    {
       : &lt;span class=
"hljs-string"&gt;"digest",
       : &lt;span class=
"hljs-string"&gt;"https://portal.example.com/"
</del>
<pre class="example" id="security-digest-example">
<ins class="diff-chg">    ...
    "securityDefinitions": {
        "basic_sc": {
           "scheme": "digest",
           "proxy": "https://portal.example.com/"
        },
        "bearer_sc": {
           "scheme": "bearer",
           "format": "jwt",
           "alg": "ES256",
           "authorization": "https://servient.example.com:8443/"
        }
</ins>
    },
<del class="diff-old">    {
       : &lt;span class=
"hljs-string"&gt;"bearer",
       : &lt;span class=
"hljs-string"&gt;"jwt",
       : &lt;span class=
"hljs-string"&gt;"ES256",
       &lt;span class=
"hljs-string"&gt;"authorizationUrl": &lt;span class=
"hljs-string"&gt;"https://servient.example.com:8443/"
    }
]
...
</del>
<ins class="diff-chg">    ...
    "security": ["basic_sc","bearer_sc"],
    ...
</ins>
</pre>
<p>
Security
<del class="diff-old">definitions
can
be
given
</del>
<ins class="diff-chg">configuration
is
mandatory.
</ins><span class= "rfc2119-assertion" id="td-security-mandatory"><ins class="diff-chg">
Every
Thing
MUST
have
</ins>
at
<del class="diff-old">more
than
</del>
<ins class="diff-chg">least
</ins>
one
<ins class="diff-new">security
scheme
specified
at
the
top
</ins>
level.
</span>
<span class="rfc2119-assertion" id= "td-security-overrides">
<ins class="diff-new">Security
schemes
MAY
also
be
specified
at
the
interaction
and
form
levels.
</ins>
In
this
case,
definitions
at
the
lower
levels
override
(completely
replace)
the
definitions
at
the
higher
level.
</span>
</p>
<p>
Security
configuration
<del class="diff-old">is
mandatory.
Every
form
in
</del>
<ins class="diff-chg">must
accurately
reflect
the
requirements
of
the
Thing.
</ins><span class="rfc2119-assertion" id= "td-security-binding"><ins class="diff-chg">
If
</ins>
a
Thing
<del class="diff-old">MUST
have
</del>
<ins class="diff-chg">requires
</ins>
a
<del class="diff-old">security
configuration
either
provided
in
the
form
itself,
at
the
interaction
level
directly
above
it
(if
security
is
not
configured
</del>
<ins class="diff-chg">specific
access
mechanism
for
a
resource,
that
mechanism
MUST
be
specified
</ins>
in
the
<del class="diff-old">form),
or
at
the
</del>
Thing
<del class="diff-old">level
(if
</del>
<ins class="diff-chg">Description's
</ins>
security
<del class="diff-old">is
not
configured
in
either
the
form
or
at
the
interaction
level).
In
the
vocabulary
defined
above,
note
</del>
<ins class="diff-chg">scheme
configuration
for
</ins>
that
<del class="diff-old">security
is
marked
as
non-mandatory.
However,
this
is
only
true
locally
(at
a
specific
level),
and
only
if
the
security
is
configured
at
</del>
<ins class="diff-chg">resource.
</ins></span><span class="rfc2119-assertion" id= "td-security-no-extras"><ins class="diff-chg">
If
</ins>
a
<del class="diff-old">higher
or
lower
level.
In
other
words,
</del>
<ins class="diff-chg">Thing
does
not
require
</ins>
a
<del class="diff-old">security
configuration
must
be
provided
at
some
level
</del>
<ins class="diff-chg">specific
access
mechanism
</ins>
for
<del class="diff-old">each
form.
Security
configuration
is
considered
binding.
The
security
configuration
metadata
provided
in
</del>
a
<del class="diff-old">Thing
Description
</del>
<ins class="diff-chg">resource,
that
mechanism
</ins>
MUST
<del class="diff-old">accurately
reflect
</del>
<ins class="diff-chg">NOT
be
specified
in
</ins>
the
<ins class="diff-new">Thing
Description's
</ins>
security
<del class="diff-old">requirements
of
the
Thing.
</del>
<ins class="diff-chg">scheme
configuration
for
that
resource.
</ins>
</span>
Some
protocols
can
ask
for
authentication
dynamically.
If
a
protocol
asks
for
a
form
of
security
credentials
not
declared
in
the
Thing
Description
then
the
Thing
Description
is
to
be
considered
invalid.
</p>
<p>
The
<code>
nosec
</code>
security
scheme
is
provided
for
the
case
that
no
security
is
needed.
The
minimal
security
configuration
for
a
Thing
is
configuration
of
the
<code>
nosec
</code>
security
scheme
at
the
top
level,
as
in
the
following
example:
</p>
<del class="diff-old">Example
15
{
    : &lt;span class=
"hljs-string"&gt;"urn:dev:wot:com:example:servient:myThing",
    : &lt;span class=
"hljs-string"&gt;"MyThing",
    : &lt;span class=
"hljs-string"&gt;"Additional (human) readable information of the Thing.",
    : &lt;span class=
"hljs-string"&gt;"https://servient.example.com/contact",
    : [{&lt;span class=
"hljs-string"&gt;"scheme": &lt;span class=
"hljs-string"&gt;"nosec"}],
    : {...},
    : {...},
    : {...},
    : [...]
</del>
<pre class="example">
<ins class="diff-chg">{
    "id": "urn:dev:wot:com:example:servient:myThing",
    "name": "MyThing",
    "description": "Human readable information.",
    "support": "https://servient.example.com/contact",
    "securityDefinitions": {"nosec_sc": {"scheme": "nosec"}},
    "security": ["nosec_sc"],
    "properties": {...},
    "actions": {...},
    "events": {...},
    "links": [...]
</ins>
}
</pre>
<p>
To
give
a
more
complex
example,
suppose
we
have
a
Thing
where
all
interactions
require
basic
authentication
except
for
one
interaction
for
which
no
authentication
is
required.
In
the
following,
the
<code>
nosec
</code>
scheme
for
the
security
configuration
in
the
<code>
overheating
</code>
event
to
indicate
no
authentication
is
required.
For
the
<code>
status
</code>
property
and
the
<code>
toggle
</code>
action,
however,
<code>
basic
</code>
authentication
is
required
as
defined
at
the
top
level
of
the
Thing.
</p>
<del class="diff-old">Example
16
{
</del>
<pre class="example">
<ins class="diff-chg">{
</ins>
    ...
<del class="diff-old">    : [{&lt;span class=
"hljs-string"&gt;"scheme": &lt;span class=
"hljs-string"&gt;"basic"}],
    : {
        : {
</del>
<ins class="diff-chg">    "securityDefinitions": {
        "nosec_sc": {"scheme": "nosec"},
        "basic_sc": {"scheme": "basic"}
    },
    "security": ["basic_sc"],
    ...
    "properties": {
        "status": {
</ins>
            ...
<del class="diff-old">            : [{
                &lt;span class=
"hljs-string"&gt;"href": &lt;span class=
"hljs-string"&gt;"https://mylamp.example.com/status",
                &lt;span class=
"hljs-string"&gt;"mediaType": &lt;span class=
"hljs-string"&gt;"application/json",
</del>
<ins class="diff-chg">            "forms": [{
                "href": "https://mylamp.example.com/status",
                "contentType": "application/json",
</ins>
            }]
        }
    },
<del class="diff-old">    : {
        : {
</del>
<ins class="diff-chg">    "actions": {
        "toggle": {
</ins>
            ...
<del class="diff-old">            : [{
                &lt;span class=
"hljs-string"&gt;"href": &lt;span class=
"hljs-string"&gt;"https://mylamp.example.com/toggle",
                &lt;span class=
"hljs-string"&gt;"mediaType": &lt;span class=
"hljs-string"&gt;"application/json"
</del>
<ins class="diff-chg">            "forms": [{
                "href": "https://mylamp.example.com/toggle",
                "contentType": "application/json"
</ins>
            }]
        }
    },
<del class="diff-old">    : {
        : {
</del>
<ins class="diff-chg">    "events": {
        "overheating": {
</ins>
            ...
<del class="diff-old">            : [{
                &lt;span class=
"hljs-string"&gt;"href": &lt;span class=
"hljs-string"&gt;"https://mylamp.example.com/oh",
                &lt;span class=
"hljs-string"&gt;"mediaType": &lt;span class=
"hljs-string"&gt;"application/json",
                &lt;span class=
"hljs-string"&gt;"security": [{&lt;span class=
"hljs-string"&gt;"scheme": &lt;span class=
"hljs-string"&gt;"nosec"}] 
</del>
<ins class="diff-chg">            "forms": [{
                "href": "https://mylamp.example.com/oh",
                "contentType": "application/json",
                "security": ["nosec_sc"] 
</ins>
            }]
        }
    }
}
</pre>
<p>
Security
<del class="diff-old">definitions
</del>
<ins class="diff-chg">configurations
</ins>
can
also
can
be
<del class="diff-old">given
</del>
<ins class="diff-chg">specified
</ins>
for
different
elements
at
the
same
level.
This
may
be
required
for
devices
that
support
multiple
protocols,
for
example
CoAP
and
HTTP,
with
support
for
different
security
mechanisms.
This
is
also
useful
when
alternative
authentication
mechanisms
are
allowed.
Here
is
a
TD
snippet
demonstrating
three
possible
ways
to
access
a
resource:
via
HTTPS
with
basic
authentication,
via
HTTPS
via
digest
authentication,
or
via
CoAPS
with
an
API
key.
In
other
words,
the
use
of
multiple
security
configurations
at
the
same
level
provides
a
way
to
combine
security
mechanisms
an
in
"OR"
fashion.
In
contrast,
putting
multiple
security
configurations
in
the
same
<code>
security
</code>
<del class="diff-old">field
</del>
<ins class="diff-chg">member
</ins>
combines
them
in
an
"AND"
fashion,
since
in
that
case
they
would
all
need
to
be
satisfied
to
allow
access
to
the
resource.
<ins class="diff-new">Note
that
a
</ins><code><ins class="diff-new">
security
</ins></code><ins class="diff-new">
declaration
is
still
mandatory
at
the
Thing
level.
Here
we
use
a
</ins><code><ins class="diff-new">
nosec
</ins></code><ins class="diff-new">
scheme
for
symmetry
but
could
also
have
used
any
one
of
the
other
ones
as
it
will
be
overridden
in
each
form.
</ins>
</p>
<pre class="example">
<ins class="diff-chg">    "securityDefinitions": {
        "nosec_sc": {"scheme": "nosec"},
        "basic_sc": {"scheme": "basic"},
        "digest_sc": {"scheme": "digest"},
        "apikey_sc": {"scheme": "apikey"}
    },
    "security": ["nosec_sc"]
    ...
    "properties": {
        "status": {
            ...
            "forms": [
                {
                    "href": "https://mylamp.example.com/status",
                    "contentType": "application/json",
                    "security": ["basic_sc"]
                },
                {
                    "href": "https://mylamp.example.com/status",
                    "contentType": "application/json",
                    "security": ["digest_sc"]
                },
                {
                    "href": "coaps://mylamp.example.com:5683/status",
                    "contentType": "application/json",
                    "security": ["apikey_sc"]
                }
            ]
        }
    },
    ...
</ins></pre><p><ins class="diff-chg">
As
another
more
complex
example,
OAuth2
makes
use
of
scopes.
These
are
identifiers
that
may
appear
in
tokens
and
must
match
with
corresponding
identifiers
in
a
resource
to
allow
access
to
that
resource.
For
example,
in
the
following,
the
"status"
property
can
be
read
by
users
using
bearer
tokens
containing
the
scope
"limited"
but
the
"configure"
action
can
only
be
used
when
the
interaction
is
invoked
with
a
token
containing
the
"special"
scope.
Scopes
are
not
identical
to
roles
but
are
often
associated
with
them;
for
example,
perhaps
only
those
in
an
administrative
role
can
perform
"special"
interactions.
Tokens
can
have
more
than
one
scope.
In
this
example,
an
administrator
would
probably
be
issued
tokens
with
both
the
"limited"
and
"special"
scopes
while
ordinary
users
would
only
be
issued
tokens
with
the
"limited"
scope.
</ins></p><pre class="example"><ins class="diff-chg">
    ...
    "securityDefinitions": {
        "oauth2_sc": {
            "scheme": "oauth2",
            ...
            "scopes": ["limited","special"]
        }
    },
    "security": ["oauth2_sc"],
    "properties": {
        "status": {
            ...
            "forms": [
                {
                    "href": "https://scopes.example.com/status",
                    "contentType": "application/json",
                    "scopes": ["limited"]
                }
            ]
        }
    },
    "action": {
        "configure": {
            ...
            "forms": [
                {
                    "href": "https://scopes.example.com/configure",
                    "contentType": "application/json",
                    "scopes": ["special"]
                }
            ]
        }
    },
    ...
</ins></pre>
<del class="diff-old">Example
17
</del>
</section>
<section id="version-serialization-json">
<h2>
<code>
<ins class="diff-chg">version
</ins></code></h2><p><span class="rfc2119-assertion" id="td-version"><ins class="diff-chg">
The
mandatory
vocabulary
term
as
defined
in
the
class
</ins><a href="#versioning" class="sec-ref"><code><ins class="diff-chg">
Versioning
</ins></code></a>,<ins class="diff-chg">
MUST
be
serialized
as
a
JSON
name.
</ins></span></p><p><ins class="diff-chg">
The
recommended
version
identification
pattern
value
is
to
rely
on
the
semantic
versioning
policy:
[[?SemVer]]
</ins></p><p><ins class="diff-chg">
A
TD
snippet
based
on
the
defined
members
is
given
below:
</ins></p><pre class="example"><ins class="diff-chg">
        ...
        "version": {"instance":"1.2.1"}
        ...
</ins></pre><p><span class="rfc2119-assertion" id="td-version"><ins class="diff-chg">
The
version
container
MAY
be
used
to
provide
additional
application
and/or
device
specific
version
information
based
on
terms
from
non-TD
namespaces.
</ins></span></p><p><ins class="diff-chg">
A
TD
snippet
based
on
such
additional
version
metadata
from
a
</ins><code><ins class="diff-chg">
v
</ins></code><ins class="diff-chg">
context
is
given
below:
</ins></p><pre class="example"><ins class="diff-chg">
        "@context": ["http://www.w3.org/ns/td",
                    {"v": "http://www.example.org/versioningTerms#"}],
        ...
        "version": {"instance":"1.2.1", "v:firmware": "0.9.1", "v:hardware": "1.0"}
        ...
</ins></pre></section><section id="data-schema-serialization-json"><h2><ins class="diff-chg">
Data
Schema
Representation
</ins></h2><p><ins class="diff-chg">
The
data
schema
concept
within
the
Thing
Description
is
based
on
a
subset
of
JSON
schema
terms.
The
data
schema
concept
is
applied
to
the
</ins><a href="#event-serialization-json"><ins class="diff-chg">
properties
</ins></a><ins class="diff-chg">
interaction
declaration,
</ins><code><ins class="diff-chg">
input
</ins></code><ins class="diff-chg">
and
</ins><code><ins class="diff-chg">
output
</ins></code><ins class="diff-chg">
within
</ins><a href="#form-serialization-json"><ins class="diff-chg">
actions
</ins></a><ins class="diff-chg">
interaction
declaration,
</ins><code><ins class="diff-chg">
subscription
</ins></code>,<code><ins class="diff-chg">
data
</ins></code><ins class="diff-chg">
and
</ins><code><ins class="diff-chg">
cancellation
</ins></code><ins class="diff-chg">
within
</ins><a href= "#event-serialization-json"><ins class="diff-chg">
events
</ins></a><ins class="diff-chg">
interaction
declaration,
and
</ins><code><ins class="diff-chg">
uriVariables
</ins></code><ins class="diff-chg">
that
can
be
used
within
the
</ins><a href= "#form-serialization-json"><ins class="diff-chg">
forms
</ins>
</a>
<ins class="diff-new">container.
</ins></p><p>
<del class="diff-old">...
: {
    : {
</del>
<span class="rfc2119-assertion" id="td-security">
<ins class="diff-chg">Each
mandatory
and
optional
vocabulary
term
as
defined
in
the
class
</ins><a href= "#dataschema" class="sec-ref"><code><ins class="diff-chg">
DataSchema
</ins></code></a>,<ins class="diff-chg">
MUST
be
serialized
as
a
JSON
name.
</ins></span></p><p><span class="rfc2119-assertion" id="td-property-objects"><ins class="diff-chg">
The
type
of
the
members
</ins><code><ins class="diff-chg">
properties
</ins></code><ins class="diff-chg">
and
</ins><code><ins class="diff-chg">
items
</ins></code><ins class="diff-chg">
MUST
be
serialized
as
a
JSON
object.
</ins></span></p><p><span class="rfc2119-assertion" id="td-property-arrays"><ins class="diff-chg">
The
type
of
the
member
</ins><code><ins class="diff-chg">
enum
</ins></code>,<code><ins class="diff-chg">
required
</ins></code>,<ins class="diff-chg">
and
</ins><code><ins class="diff-chg">
oneOf
</ins></code><ins class="diff-chg">
MUST
be
serialized
as
a
JSON
array.
</ins></span></p><p><ins class="diff-chg">
A
TD
snippet
based
on
the
defined
members
is
given
below:
</ins></p><pre class="example">
        ...
<del class="diff-old">        : [
            {
                &lt;span class=
"hljs-string"&gt;"href": &lt;span class=
"hljs-string"&gt;"https://mylamp.example.com/status",
                &lt;span class=
"hljs-string"&gt;"mediaType": &lt;span class=
"hljs-string"&gt;"application/json",
                &lt;span class=
"hljs-string"&gt;"security": [{&lt;span class=
"hljs-string"&gt;"scheme": &lt;span class=
"hljs-string"&gt;"basic"}]
</del>
<ins class="diff-chg">        "type": "object",
        "properties": {
            "status": {
                "title": "Status",
                "type": "string",
                "enum": ["On", "Off", "Error"]
</ins>
            },
<del class="diff-old">            {
                &lt;span class=
"hljs-string"&gt;"href": &lt;span class=
"hljs-string"&gt;"https://mylamp.example.com/status",
                &lt;span class=
"hljs-string"&gt;"mediaType": &lt;span class=
"hljs-string"&gt;"application/json",
                &lt;span class=
"hljs-string"&gt;"security": [{&lt;span class=
"hljs-string"&gt;"scheme": &lt;span class=
"hljs-string"&gt;"digest"}]
</del>
<ins class="diff-chg">            "brightness": {
                "title": "Brightness value",
                "type": "number",
                "minimum": 0.0,
                "maximum": 100.0
</ins>
            },
<del class="diff-old">            {
                &lt;span class=
"hljs-string"&gt;"href": &lt;span class=
"hljs-string"&gt;"coaps://mylamp.example.com:5683/status",
                &lt;span class=
"hljs-string"&gt;"mediaType": &lt;span class=
"hljs-string"&gt;"application/json",
                &lt;span class=
"hljs-string"&gt;"security": [{&lt;span class=
"hljs-string"&gt;"scheme": &lt;span class=
"hljs-string"&gt;"apikey"}]
</del>
<ins class="diff-chg">            "rgb": {
                "title": "RGB color value",
                "type": "array",
                "items" : {
                    "type" : "number",
                    "minimum": 0,
                    "maximum": 255
                },
                "minItems": 3,
                "maxItems": 3
</ins>
            }
<del class="diff-old">        ]
</del>
<ins class="diff-chg">        },
        ...
</ins></pre><p><ins class="diff-chg">
The
terms
</ins><code><ins class="diff-chg">
readOnly
</ins></code><ins class="diff-chg">
and
</ins><code><ins class="diff-chg">
writeOnly
</ins></code><ins class="diff-chg">
MAY
be
used
to
signalize
which
data
members
are
exchanged
for
a
read
request
(e.g.,
read
an
interaction
property)
and
which
one
for
a
write
process
(e.g.
write
an
interaction
property).
</ins></p><p><ins class="diff-chg">
An
TD
snippet
with
the
usage
of
</ins><code><ins class="diff-chg">
readOnly
</ins></code><ins class="diff-chg">
and
</ins><code><ins class="diff-chg">
writeOnly
</ins></code><ins class="diff-chg">
is
given
below:
</ins></p><pre class="example"><ins class="diff-chg">
    ...
        "properties": {
            "status": {
              "description": "Read or write On/Off status.",
              "type": "object",
              "properties": {
                "latestStatus": {
                  "type": "string",
                  "enum": ["On", "Off"],
                  "readOnly": true
                },
                "newStatusValue": {
                  "type": "string",
                  "enum": ["On", "Off"],
                  "writeOnly": true
                }
              },
              forms:[...]
            }
          }
    ...
</ins></pre><p><ins class="diff-chg">
If
the
interaction
property
</ins><code><ins class="diff-chg">
status
</ins></code><ins class="diff-chg">
is
read,
the
status
data
is
returned
using
</ins><code><ins class="diff-chg">
latestStatus
</ins></code><ins class="diff-chg">
in
the
payload.
To
manipulate
the
status
of
the
interaction
property,
the
new
value
must
be
provided
by
assigning
</ins><code><ins class="diff-chg">
newStatusValue
</ins></code><ins class="diff-chg">
in
the
payload.
</ins></p><p><ins class="diff-chg">
As
an
additional
feature,
a
Thing
Description
instance
allows
the
usage
of
the
term
</ins><code><ins class="diff-chg">
unit
</ins></code><ins class="diff-chg">
within
data
schema
definitions.
This
can
be
used
to
associates
some
unit
information
to
some
data
members.
The
unit
values
can
be
free
selected,
however,
it
is
recommended
to
select
units
based
on
existing
definitions
by
integrating
the
corresponding
namespace
context
(e.g.,
from
Smart
Appliances
REFerence
(SAREF)
ontology
or
Ontology
of
units
of
Measure
(OM)).
</ins></p><pre class="example"><ins class="diff-chg">
    {
    "@context": ["http://www.w3.org/ns/td",
                {"om": "http://www.wurvoc.org/vocabularies/om-1.8/"}],
    ...
    "properties": {
        "latestValues": {
            "description": "Provides all current values of the weather station.",
            "type": "object",
            "properties": {
            "temperature": {
                "type": "number",
                "minimum" : -32.5,
                "maximum" : -55.2,
                "unit": "om:degree_Celsius"
            },
            "humidity": {
                "type": "number",
                "minimum" : 0,
                "maximum" : 100,
                "unit": "om:percent"
            }
            },
            forms:[...]
        }
</ins>
    }
<del class="diff-old">},
...
</del>
<ins class="diff-chg">    ...
</ins>
</pre>
</section>
<section id="titles-descriptions-serialization-json">
<h2>
<del class="diff-old">6.2
</del>
<code>
<ins class="diff-chg">titles
</ins></code><ins class="diff-chg">
and
</ins><code><ins class="diff-chg">
descriptions
</ins></code></h2><p><ins class="diff-chg">
The
vocabulary
terms
</ins><code><ins class="diff-chg">
titles
</ins></code><ins class="diff-chg">
and
</ins><code><ins class="diff-chg">
descriptions
</ins></code><ins class="diff-chg">
enables
human-readable
text
description
in
multi-languages
using
language
tags
described
in
[[!BCP47]].
</ins><span class="rfc2119-assertion" id="td-multi-languages"><ins class="diff-chg">
Whenever
the
vocabulary
terms
</ins><code><ins class="diff-chg">
titles
</ins></code><ins class="diff-chg">
and
</ins><code><ins class="diff-chg">
descriptions
</ins></code><ins class="diff-chg">
can
be
used,
both
MUST
be
serialized
as
JSON
Object.
The
member
names
of
the
JSON
Object
MUST
be
the
language
tags
as
defined
in
[[!BCP47]]
(e.g.,
"en",
"de",
"ja",
"zh-Hans",
"zh-Hant").
The
value
of
each
member
MUST
be
serialized
as
JSON
string.
</ins>
</span>
<del class="diff-old">Media
Type
</del>
</p>
<p>
<ins class="diff-chg">A
TD
snippet
using
</ins><code><ins class="diff-chg">
titles
</ins></code><ins class="diff-chg">
and
</ins><code><ins class="diff-chg">
descriptions
</ins></code><ins class="diff-chg">
in
different
levels
is
given
below:
</ins></p><pre class="example"><ins class="diff-chg">
                    {
                        "name": "MyThing",
                        "descriptions": {
                            "en":"Human readable information.",
                            "de": "Menschenlesbare Informationen.",
                            "ja" : "人間が読むことができる情報",
                            "zh-Hans" : "人们可阅读的信息", 
                            "zh-Hant" : "人們可閱讀的資訊"
                        },
                        ...
                        "properties": {
                            "on": {
                                "titles": {
                                    "en": "On/Off",
                                    "de": "An/Aus",
                                    "ja": "オンオフ",
                                    "zh-Hans": "开关",
                                    "zh-Hant": "開關" },
                                "type": "boolean",
                                "forms": [...]
                            },
                            "status": {
                                "titles": {
                                    "en": "Status",
                                    "de": "Zustand",
                                    "ja": "状態",
                                    "zh-Hans": "状态",
                                    "zh-Hant": "狀態" },
                                "type": "object",
                                ...
                    }
</ins></pre><p><ins class="diff-chg">
TD
instances
may
also
additional
use
</ins><code><ins class="diff-chg">
title
</ins></code><ins class="diff-chg">
and
</ins><code><ins class="diff-chg">
description
</ins></code><ins class="diff-chg">
beside
of
</ins><code><ins class="diff-chg">
titles
</ins></code><ins class="diff-chg">
and
</ins><code><ins class="diff-chg">
descriptions
</ins></code>.<span class="rfc2119-assertion" id= "td-title-description"><ins class="diff-chg">
If
</ins><code><ins class="diff-chg">
title
</ins></code><ins class="diff-chg">
and
</ins><code><ins class="diff-chg">
titles
</ins></code><code><ins class="diff-chg">
description
</ins></code><ins class="diff-chg">
and
</ins><code><ins class="diff-chg">
descriptions
</ins></code><ins class="diff-chg">
are
defined
at
the
same
time
at
the
JSON
level,
</ins><code><ins class="diff-chg">
title
</ins></code><ins class="diff-chg">
and
</ins><code><ins class="diff-chg">
description
</ins></code><ins class="diff-chg">
MAY
be
seen
as
default
text.
</ins></span>
</p>
<pre class="example">
<ins class="diff-chg">            {
                "name": "MyThing",
                "description": "Menschenlesbare Informationen.",
                "descriptions": {
                    "en":"Human readable information.",
                    "de": "Menschenlesbare Informationen.",
                    "ja" : "人間が読むことができる情報",
                    "zh-Hans" : "人们可阅读的信息", 
                    "zh-Hant" : "人們可閱讀的資訊"
                },
                ...
                "properties": {
                    "on": {
                        "title" : "An/Aus",
                        "titles": {
                            "en": "On/Off",
                            "de": "An/Aus",
                            "ja": "オンオフ",
                            "zh-Hans": "开关",
                            "zh-Hant": "開關" },
                        "type": "boolean",
                        "forms": [...]
                    },
                    "status": {
                        "title" : "Zustand",
                        "titles": {
                            "en": "Status",
                            "de": "Zustand",
                            "ja": "状態",
                            "zh-Hans": "状态",
                            "zh-Hant": "狀態" },
                        "type": "object",
                        ...
            }
</ins></pre></section></section><section id="content-extension-section"><h1><ins class="diff-chg">
Context
Extension
</ins></h1><p><ins class="diff-chg">
In
addition
to
the
standard
vocabulary
definitions
as
defined
in
Section
</ins><a href="#sec-vocabulary-definition"></a>,<ins class="diff-chg">
the
Thing
Description
offers
the
possibility
to
add
context
knowledge
from
different
namespaces.
This
mechanism
can
be
used
to
enrich
the
content
of
the
Thing
Description
instances
with
additional
(e.g.,
domain
specific)
semantics.
In
addition,
it
can
also
be
used
to
specify
some
configurations
and
behaviors
of
the
underlying
communication
protocols
announced
in
the
</ins><code><ins class="diff-chg">
forms
</ins></code><ins class="diff-chg">
field.
</ins></p><p><ins class="diff-chg">
For
this
extension
the
Thing
Description
uses
the
</ins><code><ins class="diff-chg">
@context
</ins></code><ins class="diff-chg">
mechanism
known
from
JSON-LD.
The
usage
and
serializiation
of
the
</ins><code><ins class="diff-chg">
@context
</ins></code><ins class="diff-chg">
within
the
Thing
Description
is
specified
in
Section
</ins><a href= "#sec-thing-as-a-whole-json"></a>.</p><p><ins class="diff-chg">
When
adding
additional
vocabulary
to
a
Thing
Description
instance,
it
is
recommended
that
these
vocabulary
be
linked
to
a
namespace
context
that
is
within
the
JSON
name
</ins><code><ins class="diff-chg">
@context
</ins></code><ins class="diff-chg">
container
is
specified.
</ins></p><p><ins class="diff-chg">
If
included
namespaces
are
based
on
class
definitions
such
as
those
provided
by
the
RDF
Schema
or
OWL,
the
Things
Description
also
allows
the
use
of
</ins><code><ins class="diff-chg">
@type
</ins></code><ins class="diff-chg">
known
from
JSON-LD
to
associate
the
affiliation
to
a
class.
</ins></p><pre class="example"><ins class="diff-chg">
        {
            "@context": [
                "http://www.w3.org/ns/td",
                {"om": "http://www.wurvoc.org/vocabularies/om-1.8/"},
                {"saref": "https://w3id.org/saref#"}
            ],
            "@type": "Thing",
            ...
            "properties": {
                "Temperature": {
                    "@type": "saref:Temperature",
                    "description": "Temperature value of the weather station",
                    "om:unit_of_measure": "om:degree_Celsius",
                    "readOnly": true,
                    "observable": true,
                    "writeOnly": false,
                    "type": "number",
                    "forms" : [...]
                },
                ...
            }
        }
</ins></pre><p><ins class="diff-chg">
With
the
context
extension
in
the
Thing
Description,
communication
metadata
can
be
supplemented
or
specified
in
the
declarations
</ins><code><ins class="diff-chg">
forms
</ins></code>.<ins class="diff-chg">
This
is
useful
when
default
assumptions
as
defined
in
[[[!WOT-PROTOCOL-BINDING]]]
need
to
be
overwritten.
</ins></p><p><ins class="diff-chg">
The
following
example
shows
a
property
"brightness"
that
offers
a
read,
write,
and
observe
operation
within
the
</ins><code><ins class="diff-chg">
forms
</ins></code><ins class="diff-chg">
deceleration.
</ins></p><aside class="example ds-selector-tabs changed" id= "context-extension-for-forms" title= "Specialization of the form definition by context extension."><div class="selectors"><button class="selected" data-selects= "original"><ins class="diff-chg">
Simple
</ins></button><button data-selects= "expanded"><ins class="diff-chg">
Full
</ins></button></div><pre class="original selected">{<ins class="diff-chg">
        "@context": [
            "http://www.w3.org/ns/td",
            {
                "iot": "http://www.example.org/iot",
                "http": "http://www.w3.org/2011/http#"
            }
        ],
        ...
        "properties": {
            "brightness": {
                "description": "The current brightness setting",
                "@type": [
                    "iot:CurrentLevel",
                    "iot:LevelData"
                ],
                "type": "integer",
                "minimum": -64,
                "maximum": 64,
                "observable": true,
                    "forms": [
                    {
                        "href": "http://example.org:9191/api/brightness",
                        "op": ["readproperty"]
                    },
                    {
                        "href": "http://example.org:9191/api/brightness",
                        "op": ["writeproperty"],
                        "http:methodName": "POST"
                    },
                    {
                        "href": "http://example.org:9191/api/brightness/observe",
                        "op": ["observeproperty"],
                        "http:methodName": "GET",
                        "subProtocol": "longpoll"
                    }
                ]
            }
        }
}
</ins></pre><pre class="expanded">{<ins class="diff-chg">
        "@context": [
            "http://www.w3.org/ns/td",
            {
                "iot": "http://www.example.org/iot",
                "http": "http://www.w3.org/2011/http#"
            }
        ],
        ...
        "properties": {
            "brightness": {
                "description": "The current brightness setting",
                "@type": [
                    "iot:CurrentLevel",
                    "iot:LevelData"
                ],
                "type": "integer",
                "minimum": -64,
                "maximum": 64,
                "observable": true,
                "readOnly" : false,
                "writeOnly": false,
                "forms": [
                    {
                        "href": "http://example.org:9191/api/brightness",
                        "contentType": "application/json",
                        "op": ["readproperty"]
                    },
                    {
                        "href": "http://example.org:9191/api/brightness",
                        "contentType": "application/json",
                        "op": ["writeproperty"],
                        "http:methodName": "POST"
                    },
                    {
                        "href": "http://example.org:9191/api/brightness/observe",
                        "contentType": "application/json",
                        "op": ["observeproperty"],
                        "http:methodName": "GET",
                        "subProtocol": "longpoll"
                    }
                ]
            }
        }
}
</ins></pre></aside><p><ins class="diff-chg">
For
the
read
operation,
the
deceleration
follows
the
default
assumption
to
execute
an
HTTP
GET
as
defined
in
[[[!WOT-PROTOCOL-BINDING]]].
The
write
operation
overwrites
the
default
assumption
(=
HTTP
PUT)
and
declares
with
the
context
extension
the
HTTP
POST
method
to
be
used
for
this
operation.
In
order
to
observe
this
property,
the
context
extension
is
used
here
to
announce
that
an
HTTP
GET
is
always
running
to
follow
the
long
poll
mechanism.
</ins></p></section><section id="media-type-section"><h1><ins class="diff-chg">
Media
Type
</ins></h1>
<p>
The
JSON-based
serialization
of
the
TD
is
identified
by
the
media
type
<del class="diff-old">[
MEDIATYPES
]
</del>
<ins class="diff-chg">[[!MEDIATYPES]]
</ins>
<code>
application/td+json
</code>.
</p>
<del class="diff-old">Editor's
note
:
CoAP
Content
Format
</del>
<p class="ednote" title="CoAP Content Format">
CoAP-based
WoT
implementations
can
use
the
experimental
Content-Format
<code>
65100
</code>
until
a
proper
identifier
has
been
registered.
</p>
<p>
<span class="rfc2119-assertion" id="td-media-type">
The
media
type
<code>
application/td+json
</code>
MUST
be
also
associated
with
the
JSON-LD
context
<code>
http://www.w3.org/ns/td
</code>.
</span>
That
means
that
this
media
type
can
also
be
used
for
contextual
identification
of
the
vocabulary
within
a
(simplified)
TD
instance
that
may
omit
the
<code>
@context
</code>
<del class="diff-old">key
</del>
<ins class="diff-chg">name
</ins>
term.
</p>
<del class="diff-old">Editor's
note
:
IANA
Considerations
</del>
<p class="ednote" title="IANA Considerations">
Neither
the
<code>
application/td+json
</code>
<del class="diff-old">media
</del>
<ins class="diff-chg">content
</ins>
type
nor
a
CoAP
Content-Format
identifier
have
been
registered
with
IANA
yet.
</p>
</section>
<section id="Implementation-Note-section">
<del class="diff-old">6.3
</del>
<h2>
Implementation
Notes
</h2>
<section id="note-json-processing">
<del class="diff-old">6.3.1
JSON
</del>
<h2>
<ins class="diff-chg">Thing
Description
</ins>
Processing
</h2>
<p>
The
minimum
requirement
to
read
the
content
of
a
Thing
Description
instance
is
a
(simple)
JSON
parser.
</p>
<p>
<ins class="diff-chg">For
reasons
of
simplification
and/or
compactness,
exchanged
Thing
Descriptions
instances
may
omit
mandatory
vocabulary
terms
that
have
default
value
assumptions
(aka
</ins><i><ins class="diff-chg">
Simple
</ins></i><ins class="diff-chg">
Thing
Description
representation).
In
this
case,
the
Thing
Description
Processor
must
follow
the
default
assumptions
for
these
vocabulary
terms:
</ins><span class="rfc2119-assertion" id= "td-readOnly-observable-writeOnly-default">
If
the
<del class="diff-old">key
</del>
<ins class="diff-chg">name
</ins>
terms
<code>
<del class="diff-old">writable
</del>
<ins class="diff-chg">readOnly
</ins></code>,<code><ins class="diff-chg">
writeOnly
</ins></code>,
and/or
<code>
observable
</code>
are
not
present
within
a
<code>
properties
</code>
<ins class="diff-new">interaction
</ins>
definition,
the
default
value
defined
in
<a href="#property">
<del class="diff-old">5.
Information
Model
</del>
</a>
<ins class="diff-chg">MUST
be
assumed.
</ins>
</span>
</p>
<p>
<span class="rfc2119-assertion" id= "td-readOnly-observable-default">
<ins class="diff-new">If
the
name
terms
</ins><code><ins class="diff-new">
idempotent
</ins></code><ins class="diff-new">
and/or
</ins><code><ins class="diff-new">
safe
</ins></code><ins class="diff-new">
are
not
present
within
an
</ins><code><ins class="diff-new">
actions
</ins></code><ins class="diff-new">
interaction
definition,
the
default
value
defined
in
</ins><a href="#action">
</a>
MUST
be
assumed.
</span>
</p>
<p>
<span class="rfc2119-assertion" id="td-content-type-default">
If
the
<code>
<del class="diff-old">mediaType
</del>
<ins class="diff-chg">contentType
</ins>
</code>
<del class="diff-old">key
</del>
<ins class="diff-chg">name
</ins>
term
is
not
present
within
a
<code>
forms
</code>
definition,
the
default
value
as
defined
in
<del class="diff-old">5.
Information
Model
</del>
<a href="#form">
</a>
MUST
be
assumed.
</span>
</p>
<p>
To
validate
the
semantic
meaning
and
follow
references
to
external
context
vocabulary
terms
(e.g.,
iot.schema.org),
use
of
JSON-LD
or
RDF-based
tools
and
libraries
is
highly
recommended
as
explained
in
the
next
sub-section.
</p>
</section>
<del class="diff-old">6.3.2
</del>
<section id="note-jsonld10-processing">
<h2>
JSON-LD
<del class="diff-old">1.1
</del>
<ins class="diff-chg">1.0
</ins>
Processing
</h2>
<p>
To
interpret
the
semantic
meaning
of
a
Thing
Description
in
terms
of
RDF
triples,
a
Thing
Description
instance
<del class="diff-old">first
requires
</del>
<ins class="diff-chg">can
be
simple
transformed
into
</ins>
a
<del class="diff-old">valid
</del>
<ins class="diff-chg">RDF-based
serializiation
format
by
</ins>
JSON-LD
<del class="diff-old">1.1
representation
based
on
this
</del>
<ins class="diff-chg">1.0.
</ins></p></section></section></section><section id="example-serialization"><h2><ins class="diff-chg">
Example
</ins>
Thing
Description
<del class="diff-old">specification.
Then
this
representation
</del>
<ins class="diff-chg">Instances
</ins></h2><section id="myLampThing-example-serialization"><h3><ins class="diff-chg">
MyLampThing
Example
with
CoAP
Binding
</ins></h3><p><ins class="diff-chg">
Feature
list
of
the
Thing:
</ins></p><ul><li><ins class="diff-chg">
Name:
MyLampThing
</ins></li><li><ins class="diff-chg">
Context
extension:
none
</ins></li><li><ins class="diff-chg">
Offered
interactions:
1
property,
1
action,
1
event
</ins></li><li><ins class="diff-chg">
Security:
PSKSecurityScheme
</ins></li><li><ins class="diff-chg">
Protocol
binding:
CoAP
over
TLS
</ins></li><li><ins class="diff-chg">
Serializiation:
JSON
</ins></li><li><ins class="diff-chg">
Comment:
none
</ins></li></ul><pre class="example" title=<ins class="diff-chg">
"MyLampThing represented as a compact JSON serialization">
{
    "id": "urn:dev:wot:com:example:servient:lamp",
    "name": "MyLampThing",
    "description" : "MyLampThing uses JSON serialization",
    "securityDefinitions": {"psk_sc":{"scheme": "psk"}},
    "security": ["psk_sc"],
    "properties": {
        "status": {
            "description" : "Shows the current status of the lamp",
            "type": "string",
            "forms": [{
                "href": "coaps://mylamp.example.com/status"
            }]
        }
    },
    "actions": {
        "toggle": {
            "description" : "Turn on or off the lamp",
            "forms": [{
                "href": "coaps://mylamp.example.com/toggle"
            }]
        }
    },
    "events": {
        "overheating": {
            "description" : "Lamp reaches a critical temperature (overheating)",
            "data": {"type": "string"},
            "forms": [{
                "href": "coaps://mylamp.example.com/oh"
            }]
        }
    }
}
</ins></pre></section><section id="myLampThing-example-serialization"><h3><ins class="diff-chg">
MyLightSensor
Example
with
MQTT
Binding
</ins></h3><p><ins class="diff-chg">
Feature
list
of
the
Thing:
</ins></p><ul><li><ins class="diff-chg">
Name:
MyLightSensor
</ins></li><li><ins class="diff-chg">
Context
extension:
none
</ins></li><li><ins class="diff-chg">
Offered
interactions:
1
event
</ins></li><li><ins class="diff-chg">
Security:
none
</ins></li><li><ins class="diff-chg">
Protocol
binding:
MQTT
</ins></li><li><ins class="diff-chg">
Serializiation:
text
</ins></li><li><ins class="diff-chg">
Comment:
An
MQTT
client
frequently
publishes
the
light
sensor
data
(number
is
serialized
in
text
format)
to
the
topic
/lightSensor
by
the
MQTT
broker
running
behind
the
address
192.168.1.187:1883.
</ins></li></ul><pre class="example" title="MyLightSensor with MQTT binding"><ins class="diff-chg">
        {
            "name": "MyLightSensor",
            "id": "urn:dev:wot:com:example:servient:lightsensor",
            "securityDefinitions": {"nosec_sc": {"scheme": "nosec"}},
            "security": ["nosec_sc"],
            "events": {
                "lightSensor": {
                "type": "integer",
                "forms": [
                    {
                        "href": "mqtt://192.168.1.187:1883/lightSensor",
                        "contentType" : "application/text"
                    }
                ]
            }
        } 
        }
</ins></pre></section></section><section id="sec-security-consideration"><h4><ins class="diff-chg">
Security
and
Privacy
Considerations
</ins></h4><p><ins class="diff-chg">
In
general
the
security
measures
taken
to
protect
a
WoT
system
will
depend
on
the
threats
and
attackers
that
system
may
face
and
the
value
of
the
assets
needs
to
protect.
A
detailed
discussion
of
security
and
privacy
considerations
for
the
Web
of
Things,
including
a
threat
model
that
</ins>
can
be
<del class="diff-old">passed
</del>
<ins class="diff-chg">adapted
</ins>
to
<del class="diff-old">a
JSON-LD
1.1
processor.
</del>
<ins class="diff-chg">various
circumstances,
is
presented
in
the
informative
document
[[!WOT-SECURITY-CONSIDERATIONS]].
This
section
discusses
only
security
and
privacy
risks
and
possible
mitigations
directly
relevant
to
the
WoT
Thing
Description.
</ins>
</p>
<p>
<del class="diff-old">The
following
pre-processing
steps
of
</del>
<ins class="diff-chg">A
WoT
Thing
Description
can
describe
both
secure
and
insecure
network
interfaces.
When
</ins>
a
Thing
Description
<del class="diff-old">instance
must
</del>
<ins class="diff-chg">is
retro-fitted
to
an
existing
network
interface,
no
change
in
the
security
status
of
the
network
interface
is
to
</ins>
be
<del class="diff-old">executed
before
starting
JSON-LD
1.1
processing:
</del>
<ins class="diff-chg">expected.
</ins>
</p>
<del class="diff-old">Before
starting
JSON-LD
1.1
processing
</del>
<p>
<ins class="diff-chg">When
designing
new
devices
and
services
for
use
with
the
WoT,
we
have
documented
a
suggested
set
of
best
practices
in
[[!WOT-SECURITY-BEST-PRACTICES]]
to
improve
security.
This
best-practices
document
may
be
updated
as
security
measures
evolve.
Following
these
practices
does
not
guarantee
security,
but
it
at
least
will
help
to
avoid
common
known
vulnerabilities.
</ins></p><p><ins class="diff-chg">
The
use
</ins>
of
a
<ins class="diff-new">WoT
</ins>
Thing
Description
<del class="diff-old">instance,
there
MUST
be
a
</del>
<ins class="diff-chg">introduces
the
security
and
privacy
risks
given
in
the
following
sections.
After
each
risk,
we
suggest
some
possible
mitigations.
</ins></p><section id="sec-security-consideration-context"><h5><ins class="diff-chg">
Context
Dereferencing
Privacy
Risk
</ins></h5><p><ins class="diff-chg">
Deferencing
the
vocabulary
files
given
in
the
</ins>
<code>
@context
</code>
<del class="diff-old">key
from
</del>
<ins class="diff-chg">member
of
any
</ins>
JSON-LD
<del class="diff-old">1.1
</del>
<ins class="diff-chg">document
can
be
a
privacy
risk.
In
the
case
of
the
WoT,
an
attacker
can
observe
the
network
traffic
produced
by
such
deferences
and
can
use
the
metadata
of
the
dereference,
such
</ins>
as
<del class="diff-old">defined
</del>
<ins class="diff-chg">the
destination
IP
address,
to
infer
information
about
the
device
especially
if
domain-specific
vocabularies
are
used.
This
is
a
risk
even
if
the
connection
is
encrypted,
and
is
related
to
DNS
privacy
leaks.
</ins></p><dl><dt><ins class="diff-chg">
Mitigation:
</ins></dt><dd><ins class="diff-chg">
Avoid
actual
dereferencing
of
vocabulary
files.
Vocabulary
files
should
be
cached
whenever
possible.
Ideally
they
would
be
made
immutable,
built
into
the
interpreting
device,
and
not
derefenced
at
all,
with
the
URI
</ins>
in
<del class="diff-old">Section
6.1.1
Thing
</del>
<ins class="diff-chg">the
</ins><code><ins class="diff-chg">
@context
</ins></code><ins class="diff-chg">
member
serving
only
</ins>
as
<del class="diff-old">a
whole
.
Before
starting
JSON-LD
1.1
processing
</del>
<ins class="diff-chg">an
identifier
of
the
(known)
vocabulary.
This
requires
the
use
</ins>
of
<ins class="diff-new">strict
version
control,
as
updates
should
use
</ins>
a
<del class="diff-old">Thing
Description
instance,
all
external
</del>
<ins class="diff-chg">new
URI
to
ensure
that
existing
URIs
can
refer
to
immutable
data.
Use
well-known
standard
</ins>
vocabulary
<del class="diff-old">terms
used
in
</del>
<ins class="diff-chg">files
whenever
possible
to
improve
</ins>
the
<ins class="diff-new">chances
that
the
context
file
will
be
available
locally
to
systems
interpreting
the
metadata
in
a
Thing
Description.
</ins></dd></dl></section><section id="sec-security-consideration-id"><h5><ins class="diff-new">
Immutable
Identifiers
Privacy
Risk
</ins></h5><p><ins class="diff-new">
The
fact
that
a
</ins>
Thing
Description
<del class="diff-old">MUST
provide
their
context
URIs
as
prefix
or
within
</del>
<ins class="diff-chg">contains
a
unique
identifier
means
that
should
it
be
associated
with
a
person
it
can
be
used
to
track
that
person
and
therefore
pose
a
risk
to
privacy.
</ins></p><dl><dt><ins class="diff-chg">
Mitigation:
</ins></dt><dd><ins class="diff-chg">
All
identifiers
should
be
mutable,
and
there
should
be
a
mechanism
to
update
</ins>
the
<code>
<del class="diff-old">@context
</del>
<ins class="diff-chg">id
</ins></code><ins class="diff-chg">
of
a
Thing.
Specifically,
the
</ins><code><ins class="diff-chg">
id
</ins>
</code>
<del class="diff-old">field.
Before
starting
JSON-LD
1.1
processing
</del>
of
a
Thing
<del class="diff-old">Description
instance,
all
mandatory
vocabulary
terms
as
defined
</del>
<ins class="diff-chg">should
not
be
fixed
</ins>
in
<del class="diff-old">Section
5.
Information
Model
</del>
<ins class="diff-chg">hardware.
This
does,
however,
conflict
with
the
Linked
Data
ideal
</ins>
that
<ins class="diff-new">identifiers
</ins>
are
<del class="diff-old">missing
from
</del>
<ins class="diff-chg">fixed
URIs.
In
many
circumstances
it
will
be
acceptable
to
only
allow
updates
to
identifiers
if
a
Thing
is
reinitialized.
In
this
case
as
a
software
entity
</ins>
the
<del class="diff-old">instance
MUST
</del>
<ins class="diff-chg">old
Thing
ceases
to
exist
and
a
new
Thing
is
created.
This
can
</ins>
be
<del class="diff-old">inserted
explicitly
with
their
default
value.
Section
1.
Introduction
shows
an
example
</del>
<ins class="diff-chg">sufficient
to
break
a
tracking
chain
when,
for
example,
a
device
is
sold
to
a
new
owner.
Alternatively,
if
more
frequent
changes
are
desired
during
the
operational
phase
of
a
device,
a
mechanism
can
be
put
into
place
to
notify
only
authorized
users
</ins>
of
<del class="diff-old">how
</del>
the
<del class="diff-old">input
and
output
</del>
<ins class="diff-chg">change
in
identifier
when
a
change
is
made.
Note
however
that
some
classes
</ins>
of
<ins class="diff-new">devices,
e.g.
medical
devices,
may
require
immutable
IDs
by
law
in
some
jurisdictions.
In
this
case
extra
attention
should
be
paid
to
secure
access
to
files,
</ins>
such
<del class="diff-old">preprocessing
would
appear.
7.
Example
</del>
<ins class="diff-chg">as
</ins>
Thing
<del class="diff-old">Description
Instances
7.1
MyLampThing
Example
Example
18
:
MyLampThing
represented
</del>
<ins class="diff-chg">Descriptions,
containing
such
immutable
identifiers.
</ins></dd></dl></section><section id="sec-security-consideration-fingerprint"><h5><ins class="diff-chg">
Fingerprinting
Privacy
Risk
</ins></h5><p><ins class="diff-chg">
As
noted
above,
the
</ins><code><ins class="diff-chg">
id
</ins></code><ins class="diff-chg">
member
in
a
TD
can
pose
a
privacy
risk.
However,
even
if
the
</ins><code><ins class="diff-chg">
id
</ins></code><ins class="diff-chg">
is
updated
</ins>
as
<ins class="diff-new">described
to
mitigate
its
tracking
risk,
it
may
still
be
possible
to
associate
</ins>
a
<del class="diff-old">compact
JSON
serialization
{
    : &lt;span class=
"hljs-string"&gt;"urn:dev:wot:com:example:servient:lamp",
    : &lt;span class=
"hljs-string"&gt;"MyLampThing",
     : &lt;span class=
"hljs-string"&gt;"MyLampThing uses JSON-LD 1.1 serialization",
    : [{&lt;span class=
"hljs-attr"&gt;"scheme": &lt;span class=
"hljs-string"&gt;"psk"}],
    : {
        : {
            &lt;span class=
"hljs-attr"&gt;"description" : &lt;span class=
"hljs-string"&gt;"Shows the current status of the lamp",
            : &lt;span class=
"hljs-string"&gt;"string",
            : [{
                : &lt;span class=
"hljs-string"&gt;"coaps://mylamp.example.com/status"
            }]
        }
    },
    : {
        : {
            &lt;span class=
"hljs-attr"&gt;"description" : &lt;span class=
"hljs-string"&gt;"Turn on or off the lamp",
            : [{
                : &lt;span class=
"hljs-string"&gt;"coaps://mylamp.example.com/toggle"
            }]
        }
    },
    : {
        : {
            &lt;span class=
"hljs-attr"&gt;"description" : &lt;span class=
"hljs-string"&gt;"Lamp reaches a critical temperature (overheating)",
            : &lt;span class=
"hljs-string"&gt;"string",
            : [{
                : &lt;span class=
"hljs-string"&gt;"coaps://mylamp.example.com/oh"
            }]
        }
    }
}
Example
19
:
MyLampThing
</del>
<ins class="diff-chg">TD
</ins>
with
<del class="diff-old">semantic
annotations
based
on
</del>
a
<del class="diff-old">valid
JSON-LD
1.1
representation
{
    : [&lt;span class=
"hljs-string"&gt;"http://www.w3.org/ns/td", 
                {: &lt;span class=
"hljs-string"&gt;"http://iotschema.org/"}],
     : &lt;span class=
"hljs-string"&gt;"Thing",
    : &lt;span class=
"hljs-string"&gt;"urn:dev:wot:com:example:servient:lamp",
    : &lt;span class=
"hljs-string"&gt;"MyLampThing",
     : &lt;span class=
"hljs-string"&gt;"MyLampThing uses JSON-LD 1.1 serialization",
    : [{&lt;span class=
"hljs-attr"&gt;"scheme": &lt;span class=
"hljs-string"&gt;"psk"}],
    : {
        : {
             : &lt;span class=
"hljs-string"&gt;"iot:SwitchStatus",
            &lt;span class=
"hljs-attr"&gt;"description" : &lt;span class=
"hljs-string"&gt;"Shows the current status of the lamp",
            : &lt;span class=
"hljs-literal"&gt;false,
            &lt;span class=
"hljs-attr"&gt;"observable": &lt;span class=
"hljs-literal"&gt;false,
            : &lt;span class=
"hljs-string"&gt;"string",
            : [{
                : &lt;span class=
"hljs-string"&gt;"coaps://mylamp.example.com/status",
                &lt;span class=
"hljs-attr"&gt;"mediaType": &lt;span class=
"hljs-string"&gt;"application/json"
            }]
        }
    },
    : {
        : {
             : &lt;span class=
"hljs-string"&gt;"iot:SwitchStatus",
            &lt;span class=
"hljs-attr"&gt;"description" : &lt;span class=
"hljs-string"&gt;"Turn on or off the lamp",
            : [{
                : &lt;span class=
"hljs-string"&gt;"coaps://mylamp.example.com/toggle",
                &lt;span class=
"hljs-attr"&gt;"mediaType": &lt;span class=
"hljs-string"&gt;"application/json"
            }]
        }
    },
    : {
        : {
             : &lt;span class=
"hljs-string"&gt;"iot:TemperatureAlarm",
            &lt;span class=
"hljs-attr"&gt;"description" : &lt;span class=
"hljs-string"&gt;"Lamp reaches a critical temperature (overheating)",
            : &lt;span class=
"hljs-string"&gt;"string",
            : [{
                : &lt;span class=
"hljs-string"&gt;"coaps://mylamp.example.com/oh",
                &lt;span class=
"hljs-attr"&gt;"mediaType": &lt;span class=
"hljs-string"&gt;"application/json"
            }]
        }
    }
}
8.
Security
</del>
<ins class="diff-chg">particular
physical
device,
</ins>
and
<del class="diff-old">Privacy
Considerations
Editor's
note
Please
see
</del>
<ins class="diff-chg">from
there
to
a
person,
through
fingerprinting.
</ins></p><dl><dt><ins class="diff-chg">
Mitigation:
</ins></dt><dd><ins class="diff-chg">
Only
authorized
users
should
be
provided
access
to
</ins>
the
<del class="diff-old">WoT
</del>
<ins class="diff-chg">Thing
Description
for
a
Thing.
If
the
TD
is
only
distributed
to
authorized
users
through
secure
and
confidential
channels,
for
example
through
a
directory
service
that
requires
authentication,
the
risk
can
be
minimized.
</ins></dd></dl></section><section id="sec-security-consideration-tampering"><h5><ins class="diff-chg">
TD
Interception
and
Tampering
</ins>
Security
<ins class="diff-new">Risk
</ins></h5><p><ins class="diff-new">
Intercepting
</ins>
and
<del class="diff-old">Privacy
repository
</del>
<ins class="diff-chg">tampering
with
TDs
can
be
used
to
launch
man-in-the-middle
attacks,
</ins>
for
<del class="diff-old">work
</del>
<ins class="diff-chg">example
by
rewriting
URLs
</ins>
in
<del class="diff-old">progress
regarding
threat
models,
assets,
risks,
recommended
mitigations,
</del>
<ins class="diff-chg">TDs
to
redirect
accesses
to
a
malicious
intermediary
that
can
capture
or
manipulate
data.
</ins></p><dl><dt><ins class="diff-chg">
Mitigation:
</ins></dt><dd><ins class="diff-chg">
Obtain
Thing
Descriptions
only
through
mutually
authenticated
channels.
This
ensures
that
the
client
</ins>
and
<del class="diff-old">best
practices
for
security
</del>
<ins class="diff-chg">the
server
are
both
sure
of
the
identity
of
the
other
party
to
the
communication.
This
is
also
necessary
in
order
to
deliver
TDs
only
to
authorized
users.
</ins></dd></dl></section><section id="sec-security-consideration-tampering"><h5><ins class="diff-chg">
Context
Interception
and
Tampering
Security
Risk
</ins></h5><p><ins class="diff-chg">
Intercepting
and
tampering
with
context
files
can
be
used
to
facilitate
attacks
by
modifying
the
interpretation
of
vocabulary.
</ins></p><dl><dt><ins class="diff-chg">
Mitigation:
</ins></dt><dd><ins class="diff-chg">
Ideally
context
files
would
only
be
obtained
through
authenticated
channels
but
it
is
notable
(and
unfortunate)
that
many
contexts
are
indicated
using
HTTP
URLs,
which
are
vulnerable
to
interception
</ins>
and
<ins class="diff-new">modification
if
dereferenced.
However,
if
context
files
are
immutable
and
cached,
and
dereferencing
is
avoided
whenever
possible,
then
this
risk
can
be
reduced.
</ins></dd></dl></section><section id="sec-security-consideration-inferencing"><h5><ins class="diff-new">
Inferencing
of
Personally
Identifiable
Information
Privacy
Risk
</ins></h5><p><ins class="diff-new">
In
many
locales,
in
order
to
protect
the
</ins>
privacy
<ins class="diff-new">of
users,
there
are
legal
requirements
</ins>
for
<del class="diff-old">systems
using
</del>
the
<del class="diff-old">Web
</del>
<ins class="diff-chg">handling
</ins>
of
<del class="diff-old">Things.
Once
complete,
security
</del>
<ins class="diff-chg">personally
identifiable
information,
that
is,
information
that
can
be
associated
with
a
particular
person.
Such
information
can
of
course
be
generated
by
IoT
devices
directly.
However,
the
existence
</ins>
and
<del class="diff-old">privacy
considerations
relevant
to
</del>
<ins class="diff-chg">metadata
of
IoT
devices
(the
kind
of
data
stored
in
a
</ins>
Thing
<del class="diff-old">Descriptions
will
</del>
<ins class="diff-chg">Description)
can
also
contain
or
</ins>
be
<del class="diff-old">summarized
</del>
<ins class="diff-chg">used
to
infer
personally
identifiable
information.
This
information
can
be
as
simple
as
the
fact
that
a
certain
person
owns
a
certain
type
of
device,
which
can
lead
to
additional
inferences
about
that
person.
</ins></p><dl><dt><ins class="diff-chg">
Mitigation:
</ins></dt><dd><ins class="diff-chg">
Treat
a
Thing
Description
associated
with
a
personal
device
as
if
it
contained
personally
identifiable
information.
As
an
example
application
of
this
principle,
consider
how
to
obtain
user
consent.
Consent
for
usage
of
personally
identifiable
data
generated
by
a
Thing
is
often
obtained
when
a
Thing
is
paired
with
system
consuming
the
data,
which
is
frequently
also
when
the
Thing
Description
is
registered
with
a
local
directory
or
the
system
consuming
the
Thing
Description
</ins>
in
<ins class="diff-new">order
to
access
the
device.
In
</ins>
this
<del class="diff-old">section.
</del>
<ins class="diff-chg">case
consent
for
using
data
from
a
Thing
can
be
combined
with
consent
for
accessing
the
Thing's
Thing
Description.
As
a
second
example,
if
we
consider
a
TD
to
contain
personally
identifiable
information,
then
it
should
not
be
retained
indefinitely
or
used
for
purposes
other
than
those
for
which
consent
was
given.
</ins></dd></dl></section>
</section>
<section id="json-schema-4-validation" class="appendix normative">
<del class="diff-old">A.
</del>
<h1>
JSON
Schema
for
TD
Instance
Validation
</h1>
Below
is
a
JSON
Schema
<del class="diff-old">[
JSON-SCHEMA-VALIDATION
]
</del>
<ins class="diff-chg">[[?JSON-SCHEMA-VALIDATION]]
</ins>
for
syntactically
validating
Thing
Description
instances
serialized
in
<del class="diff-old">JSON-LD
1.1.
Editor's
note
</del>
<ins class="diff-chg">JSON
based
format.
</ins><p class="ednote">
This
schema
is
known
to
be
too
permissive.
This
issue
will
be
resolved
in
the
next
release
of
this
document.
</p>
<del class="diff-old">{
  "title": "WoT TD Schema for Bundang Plug Fest",
  "description": "JSON Schema representation of the TD serialization format.",
  "$schema ": "http://json-schema.org/draft-06/schema#",
  "type": "object",
  "properties": {
    "base": {
      "$ref": "#/definitions/url"
    },
    "@type": {
      "$ref": "#/definitions/type_declaration"
    },
    "@context": {
      "$ref": "#/definitions/context"
    },
    "name": {
      "type": "string"
    },
    "id": {
      "type": "string"
    },
    "description": {
      "type": "string"
    },
</del>
<pre class="advisement">
<ins class="diff-chg">{
    "title": "WoT TD Schema - December 2018",
    "description": "JSON Schema representation of the TD serialisation format.",
    "$schema ": "http://json-schema.org/draft-06/schema#",
    "type": "object",
</ins>
    "properties": {
<del class="diff-old">      "type": "object",
      "items": {
        "$ref": "#/definitions/properties"
      }
    },
    "actions": {
      "type": "object",
      "items": {
        "$ref": "#/definitions/actions"
      }
    },
    "events": {
      "type": "object",
      "items": {
        "$ref": "#/definitions/events"
      }
    },
    "links": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/links"
      }
    },
    "support": {
      "type": "string"
    },
    "security": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/securityScheme"
      }
    }
  },
  "required": [
    "name",
    "id"
  ],
  "additionalProperties": true,
  "definitions": {
    "context": {
      "oneOf": [
        {
          "type": "array",
          "items": {
            "anyOf": [
              {
                "$ref": "#/definitions/url"
              },
              {
                "type": "object"
              }
            ]
          },
          "contains": {
            "type": "string",
            "enum": [
              "https://w3c.github.io/wot-thing-description/context/td-context.jsonld",
              "http://www.w3.org/ns/td"
            ]
          }
</del>
<ins class="diff-chg">        "base": {
            "$ref": "#/definitions/url"
</ins>
        },
<del class="diff-old">        {
          "type": "string",
          "enum": [
            "https://w3c.github.io/wot-thing-description/context/td-context.jsonld",
            "http://www.w3.org/ns/td"
          ]
        }
      ]
    },
    "type_declaration": {
      "oneOf": [
        {
          "type": "string"
</del>
<ins class="diff-chg">        "@type": {
            "$ref": "#/definitions/type_declaration"
</ins>
        },
<del class="diff-old">        {
          "type": "array"
        }
      ]
    },
    "form_declaration": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/form_element"
      }
    },
    "form_element": {
      "type": "object",
      "properties": {
        "href": {
          "$ref": "#/definitions/url"
</del>
<ins class="diff-chg">        "@context": {
            "$ref": "#/definitions/context"
</ins>
        },
<del class="diff-old">        "rel": {
          "type": "string"
</del>
<ins class="diff-chg">        "name": {
            "type": "string"
</ins>
        },
<del class="diff-old">        "mediaType": {
          "type": "string"
</del>
<ins class="diff-chg">        "id": {
            "type": "string"
</ins>
        },
<del class="diff-old">        "subProtocol": {
          "type": "string"
</del>
<ins class="diff-chg">        "description": {
            "type": "string"
</ins>
        },
<del class="diff-old">        "security": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/securityScheme"
          }
</del>
<ins class="diff-chg">        "descriptions": {
            "$ref": "#/definitions/descriptions"
</ins>
        },
<del class="diff-old">        "scopes": {
          "type": "array",
          "items": {
            "type": "string"
          }
        }
      },
      "required": [
        "href"
      ],
      "additionalProperties": true
    },
    "properties": {
      "additionalProperties": {
        "type": "object",
        "items": {
          "$ref": "#/definitions/property_element"
        }
      }
    },
    "actions": {
      "additionalProperties": {
        "type": "object",
        "items": {
          "$ref": "#/definitions/action_element"
        }
      }
    },
    "events": {
      "additionalProperties": {
        "type": "object",
        "items": {
          "$ref": "#/definitions/event_element"
        }
      }
    },
    "property_element": {
      "type": "object",
      "properties": {
        "description": {
          "type": "string"
</del>
<ins class="diff-chg">        "properties": {
            "type":"object",
            "additionalProperties": {
                "$ref": "#/definitions/property_element"
            }
</ins>
        },
<del class="diff-old">        "@type": {
          "$ref": "#/definitions/type_declaration"
</del>
<ins class="diff-chg">        "actions": {
            "type": "object",
            "additionalProperties": {
                "$ref": "#/definitions/action_element"
            }
</ins>
        },
<del class="diff-old">        "label": {
          "type": "string"
</del>
<ins class="diff-chg">        "events": {
            "type": "object",
            "additionalProperties": {
                "$ref": "#/definitions/event_element"
            }
</ins>
        },
<del class="diff-old">        "writable": {
          "type": "boolean"
</del>
<ins class="diff-chg">        "links": {
            "type": "array",
            "items": {
                "$ref": "#/definitions/link_element"
            }
</ins>
        },
<del class="diff-old">        "observable": {
          "type": "boolean"
</del>
<ins class="diff-chg">        "support": {
            "$ref": "#/definitions/url"
</ins>
        },
<del class="diff-old">        "forms": {
          "$ref": "#/definitions/form_declaration"
</del>
<ins class="diff-chg">        "securityDefinitions": {
            "type": "object",
            "additionalProperties": {
                "$ref": "#/definitions/securityScheme"
            }
</ins>
        },
        "security": {
<del class="diff-old">          "type": "array",
          "items": {
            "$ref": "#/definitions/securityScheme"
          }
</del>
<ins class="diff-chg">            "type": "array",
            "items": {
                "type": "string"
            }
</ins>
        },
<del class="diff-old">        "scopes": {
          "type": "array",
          "items": {
</del>
<ins class="diff-chg">        "created": {
</ins>
            "type": "string"
<del class="diff-old">          }
</del>
<ins class="diff-chg">        },
        "lastModified": {
            "type": "string"
        },
        "version": {
            "type": "object",
            "properties": {
                "instance": {
                    "type": "string"
                }
            },
            "required": [
                "instance"
            ]
</ins>
        }
<del class="diff-old">      },
      "required": [],
      "additionalProperties": true
</del>
    },
<del class="diff-old">    "action_element": {
      "type": "object",
      "properties": {
        "description": {
          "type": "string"
        },
        "@type": {
          "$ref": "#/definitions/type_declaration"
</del>
<ins class="diff-chg">    "required": [
        "name",
        "id",
        "security"
    ],
    "additionalProperties": true,
    "definitions": {
        "context": {
            "oneOf": [{
                    "type": "array",
                    "items": {
                        "anyOf": [{
                                "$ref": "#/definitions/url"
                            },
                            {
                                "type": "object"
                            }
                        ]
                    },
                    "contains": {
                        "type": "string",
                        "enum": [
                            "http://www.w3.org/ns/td"
                        ]
                    }
                },
                {
                    "type": "string",
                    "enum": [
                        "http://www.w3.org/ns/td"
                    ]
                }
            ]
</ins>
        },
<del class="diff-old">        "label": {
          "type": "string"
</del>
<ins class="diff-chg">        "type_declaration": {
            "oneOf": [{
                    "type": "string"
                },
                {
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                }
            ]
</ins>
        },
<del class="diff-old">        "forms": {
          "$ref": "#/definitions/form_declaration"
</del>
<ins class="diff-chg">        "form_element": {
            "type": "object",
            "properties": {
                "href": {
                    "$ref": "#/definitions/url"
                },
                "op": {
                    "oneOf": [{
                            "type": "string",
                            "enum": [
                                "readproperty",
                                "writeproperty",
                                "observeproperty",
                                "invokeaction",
                                "subscribeevent",
                                "unsubscribeevent"
                            ]
                        },
                        {
                            "type": "array",
                            "items": {
                                "type": "string",
                                "enum": [
                                    "readproperty",
                                    "writeproperty",
                                    "observeproperty",
                                    "invokeaction",
                                    "subscribeevent",
                                    "unsubscribeevent"
                                ]
                            }
                        }
                    ]
                },
                "contentType": {
                    "type": "string"
                },
                "security": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                },
                "scopes": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                },
                "subProtocol": {
                    "type": "string",
                    "enum": [
                        "longpoll"
                    ]
                },
                "response": {
                    "type": "object",
                    "properties": {
                        "contentType": {
                            "type": "string"
                        }
                    }
                }
            },
            "required": [
                "href",
                "contentType"
            ],
            "additionalProperties": true
</ins>
        },
<del class="diff-old">        "input": {
          "$ref": "#/definitions/data"
</del>
<ins class="diff-chg">        "property_element": {
            "type": "object",
            "properties": {
                "description": {
                    "type": "string"
                },
                "descriptions": {
                    "$ref": "#/definitions/descriptions"
                },
                "title": {
                    "type": "string"
                },
                "titles": {
                    "$ref": "#/definitions/titles"
                },
                "uriVariables": {
                    "$ref": "#/definitions/dataSchema"
                },
                "@type": {
                    "$ref": "#/definitions/type_declaration"
                },
                "observable": {
                    "type": "boolean"
                },
                "forms": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/form_element"
                    }
                },
                "scopes": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                },
                "security": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                },
                "enum": {
                    "type": "array",
                    "minItems": 1,
                    "uniqueItems": true
                },
                "const": {},
                "type": {
                    "type": "string",
                    "enum": [
                        "boolean",
                        "integer",
                        "number",
                        "string",
                        "object",
                        "array",
                        "null"
                    ]
                },
                "writeOnly": {
                    "type": "boolean"
                },
                "readOnly": {
                    "type": "boolean"
                },
                "oneOf": {
                    "$ref": "#/definitions/dataSchema"
                },
                "unit": {
                    "$ref": "#/definitions/dataSchema"
                }
            },
            "required": [
                "forms"
            ],
            "additionalProperties": true
</ins>
        },
<del class="diff-old">        "output": {
          "$ref": "#/definitions/data"
</del>
<ins class="diff-chg">        "action_element": {
            "type": "object",
            "properties": {
                "description": {
                    "type": "string"
                },
                "descriptions": {
                    "$ref": "#/definitions/descriptions"
                },
                "title": {
                    "type": "string"
                },
                "titles": {
                    "$ref": "#/definitions/titles"
                },
                "uriVariables": {
                    "$ref": "#/definitions/dataSchema"
                },
                "@type": {
                    "$ref": "#/definitions/type_declaration"
                },
                "forms": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/form_element"
                    }
                },
                "input": {
                    "$ref": "#/definitions/dataSchema"
                },
                "output": {
                    "$ref": "#/definitions/dataSchema"
                },
                "safe": {
                    "type": "boolean"
                },
                "idempotent": {
                    "type": "boolean"
                },
                "scopes": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                },
                "security": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                }
            },
            "required": [
                "forms"
            ],
            "additionalProperties": true
</ins>
        },
<del class="diff-old">        "security": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/securityScheme"
          }
</del>
<ins class="diff-chg">        "event_element": {
            "type": "object",
            "properties": {
                "description": {
                    "type": "string"
                },
                "descriptions": {
                    "$ref": "#/definitions/descriptions"
                },
                "titles": {
                    "$ref": "#/definitions/titles"
                },
                "uriVariables": {
                    "$ref": "#/definitions/dataSchema"
                },
                "title": {
                    "type": "string"
                },
                "@type": {
                    "$ref": "#/definitions/type_declaration"
                },
                "forms": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/form_element"
                    }
                },
                "scopes": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                },
                "security": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                },
                "subscription": {
                    "$ref": "#/definitions/dataSchema"
                },
                "data": {
                    "$ref": "#/definitions/dataSchema"
                },
                "cancellation": {
                    "$ref": "#/definitions/dataSchema"
                },
                "type": {
                    "not": {}
                },
                "enum": {
                    "not": {}
                },
                "const": {
                    "not": {}
                }
            },
            "required": [
                "forms"
            ],
            "additionalProperties": true
</ins>
        },
<del class="diff-old">        "scopes": {
          "type": "array",
          "items": {
            "type": "string"
          }
        }
      },
      "required": [],
      "additionalProperties": true
    },
    "event_element": {
      "type": "object",
      "properties": {
        "description": {
          "type": "string"
</del>
<ins class="diff-chg">        "dataSchema": {
            "type": "object",
            "properties": {
                "description": {
                    "type": "string"
                },
                "title": {
                    "type": "string"
                },
                "enum": {
                    "type": "array",
                    "minItems": 1,
                    "uniqueItems": true
                },
                "const": {},
                "type": {
                    "type": "string",
                    "enum": [
                        "boolean",
                        "integer",
                        "number",
                        "string",
                        "object",
                        "array",
                        "null"
                    ]
                },
                "descriptions": {
                    "$ref": "#/definitions/descriptions"
                },
                "titles": {
                    "$ref": "#/definitions/titles"
                },
                "writeOnly": {
                    "type": "boolean"
                },
                "readOnly": {
                    "type": "boolean"
                },
                "oneOf": {
                    "$ref": "#/definitions/dataSchema"
                },
                "unit": {
                    "$ref": "#/definitions/dataSchema"
                }
            }
</ins>
        },
<del class="diff-old">        "@type": {
          "$ref": "#/definitions/type_declaration"
</del>
<ins class="diff-chg">        "link_element": {
            "type": "object",
            "properties": {
                "anchor": {
                    "$ref": "#/definitions/url"
                },
                "href": {
                    "$ref": "#/definitions/url"
                },
                "rel": {
                    "type": "string"
                },
                "type": {
                    "type": "string"
                }
            },
            "required": [
                "href"
            ],
            "additionalProperties": true
</ins>
        },
<del class="diff-old">        "label": {
          "type": "string"
</del>
<ins class="diff-chg">        "securityScheme": {
            "oneOf": [{
                    "type": "object",
                    "properties": {
                        "description": {
                            "type": "string"
                        },
                        "proxy": {
                            "$ref": "#/definitions/url"
                        },
                        "scheme": {
                            "type": "string",
                            "enum": [
                                "nosec"
                            ]
                        }
                    },
                    "required": [
                        "scheme"
                    ]
                },
                {
                    "type": "object",
                    "properties": {
                        "description": {
                            "type": "string"
                        },
                        "proxy": {
                            "$ref": "#/definitions/url"
                        },
                        "scheme": {
                            "type": "string",
                            "enum": [
                                "basic"
                            ]
                        },
                        "in": {
                            "type": "string"
                        },
                        "name": {
                            "type": "string"
                        }
                    },
                    "required": [
                        "scheme"
                    ]
                },
                {
                    "type": "object",
                    "properties": {
                        "description": {
                            "type": "string"
                        },
                        "proxy": {
                            "$ref": "#/definitions/url"
                        },
                        "scheme": {
                            "type": "string",
                            "enum": [
                                "cert"
                            ]
                        },
                        "identity": {
                            "type": "string"
                        }
                    },
                    "required": [
                        "scheme"
                    ]
                },
                {
                    "type": "object",
                    "properties": {
                        "description": {
                            "type": "string"
                        },
                        "proxy": {
                            "$ref": "#/definitions/url"
                        },
                        "scheme": {
                            "type": "string",
                            "enum": [
                                "digest"
                            ]
                        },
                        "qop": {
                            "type": "string"
                        },
                        "in": {
                            "type": "string"
                        },
                        "name": {
                            "type": "string"
                        }
                    },
                    "required": [
                        "scheme"
                    ]
                },
                {
                    "type": "object",
                    "properties": {
                        "description": {
                            "type": "string"
                        },
                        "proxy": {
                            "$ref": "#/definitions/url"
                        },
                        "scheme": {
                            "type": "string",
                            "enum": [
                                "bearer"
                            ]
                        },
                        "authorization": {
                            "$ref": "#/definitions/url"
                        },
                        "alg": {
                            "type": "string"
                        },
                        "format": {
                            "type": "string"
                        },
                        "in": {
                            "type": "string"
                        },
                        "name": {
                            "type": "string"
                        }
                    },
                    "required": [
                        "scheme"
                    ]
                },
                {
                    "type": "object",
                    "properties": {
                        "description": {
                            "type": "string"
                        },
                        "proxy": {
                            "$ref": "#/definitions/url"
                        },
                        "scheme": {
                            "type": "string",
                            "enum": [
                                "psk"
                            ]
                        },
                        "identity": {
                            "type": "string"
                        }
                    },
                    "required": [
                        "scheme"
                    ]
                },
                {
                    "type": "object",
                    "properties": {
                        "description": {
                            "type": "string"
                        },
                        "proxy": {
                            "$ref": "#/definitions/url"
                        },
                        "scheme": {
                            "type": "string",
                            "enum": [
                                "public"
                            ]
                        },
                        "identity": {
                            "type": "string"
                        }
                    },
                    "required": [
                        "scheme"
                    ]
                },
                {
                    "type": "object",
                    "properties": {
                        "description": {
                            "type": "string"
                        },
                        "proxy": {
                            "$ref": "#/definitions/url"
                        },
                        "scheme": {
                            "type": "string",
                            "enum": [
                                "oath2"
                            ]
                        },
                        "authorization": {
                            "$ref": "#/definitions/url"
                        },
                        "token": {
                            "$ref": "#/definitions/url"
                        },
                        "refresh": {
                            "$ref": "#/definitions/url"
                        },
                        "scopes": {
                            "type": "array",
                            "items": {
                                "type": "string"
                            }
                        },
                        "flow": {
                            "type": "string"
                        }
                    },
                    "required": [
                        "scheme"
                    ]
                },
                {
                    "type": "object",
                    "properties": {
                        "description": {
                            "type": "string"
                        },
                        "proxy": {
                            "$ref": "#/definitions/url"
                        },
                        "scheme": {
                            "type": "string",
                            "enum": [
                                "apikey"
                            ]
                        },
                        "in": {
                            "type": "string"
                        },
                        "name": {
                            "type": "string"
                        }
                    },
                    "required": [
                        "scheme"
                    ]
                },
                {
                    "type": "object",
                    "properties": {
                        "description": {
                            "type": "string"
                        },
                        "proxy": {
                            "$ref": "#/definitions/url"
                        },
                        "scheme": {
                            "type": "string",
                            "enum": [
                                "pop"
                            ]
                        },
                        "authorization": {
                            "$ref": "#/definitions/url"
                        },
                        "format": {
                            "type": "string"
                        },
                        "alg": {
                            "type": "string"
                        },
                        "in": {
                            "type": "string"
                        },
                        "name": {
                            "type": "string"
                        }
                    },
                    "required": [
                        "scheme"
                    ]
                }
            ]
</ins>
        },
<del class="diff-old">        "forms": {
          "$ref": "#/definitions/form_declaration"
</del>
<ins class="diff-chg">        "url": {
            "type": "string",
            "format": "uri",
            "pattern": "(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(([^#]*))?(#(.*))?"
</ins>
        },
<del class="diff-old">        "security": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/securityScheme"
          }
</del>
<ins class="diff-chg">        "descriptions": {
            "type": "object"
</ins>
        },
<del class="diff-old">        "scopes": {
          "type": "array",
          "items": {
            "type": "string"
          }
</del>
<ins class="diff-chg">        "titles": {
            "type": "object"
</ins>
        }
<del class="diff-old">      },
      "required": [],
      "additionalProperties": true
    },
    "links": {
      "type": "object",
      "properties": {
        "anchor": {
          "$ref": "#/definitions/url"
        },
        "href": {
          "$ref": "#/definitions/url"
</del>
<ins class="diff-chg">    }
}
</ins></pre></section><section id="Thing Templates" class="appendix"><h1><ins class="diff-chg">
Thing
Templates
</ins></h1><p><ins class="diff-chg">
A
</ins><em><ins class="diff-chg">
Thing
Template
</ins></em><ins class="diff-chg">
is
a
description
for
a
</ins><em><ins class="diff-chg">
class
</ins></em><ins class="diff-chg">
of
devices
or
things.
It
describes
the
properties,
actions,
events
and
common
metadata
that
are
shared
for
an
entire
group
of
things,
to
enable
the
common
handling
of
thousands
of
devices
by
a
cloud
server,
which
is
not
practical
on
a
per-thing
basis.
The
Thing
Template
uses
the
same
core
vocabulary
and
information
model
from
section
5.
</ins></p><p><ins class="diff-chg">
The
Thing
Template
enables:
</ins></p><ul><li><ins class="diff-chg">
management
of
multiple
things
by
a
cloud
service.
</ins></li><li><ins class="diff-chg">
simulation
of
devices/things
that
have
not
yet
been
developed.
</ins></li><li><ins class="diff-chg">
common
applications
across
devices
from
different
manufacturers
that
share
a
common
thing
model.
</ins></li><li><ins class="diff-chg">
combining
multiple
models
into
a
thing.
</ins></li></ul><p><ins class="diff-chg">
The
Thing
Template
is
a
logical
description
of
the
interface
and
possible
interaction
with
devices
(properties,
actions
and
events),
however
it
does
not
contain
device-specific
information,
such
as
a
serial
number,
GPS
location,
security
information
or
concrete
protocol
endpoints.
</ins></p><p><ins class="diff-chg">
Since
a
Thing
Template
does
not
contain
a
protocol
binding
to
specific
endpoints
and
does
not
define
a
specific
security
mechanism,
the
</ins><em><ins class="diff-chg">
forms
</ins></em><ins class="diff-chg">
and
</ins><em><ins class="diff-chg">
securityDefinitions
</ins></em><ins class="diff-chg">
and
</ins><em><ins class="diff-chg">
security
</ins></em><ins class="diff-chg">
keys
must
not
be
present.
</ins></p><p><ins class="diff-chg">
The
same
Thing
Template
can
be
implemented
by
things
from
multiple
vendors,
a
thing
can
implement
multiple
thing
templates,
define
additional
metadata
(vendor,
location,
security)
and
define
bindings
to
concrete
protocols.
To
avoid
conflicts
between
properties,
actions
and
events
from
different
thing
templates
that
are
combined
into
a
common
thing,
all
thse
identifiers
must
be
unique
within
a
thing.
</ins></p><p><ins class="diff-chg">
A
common
Thing
Template
for
a
class
of
devices
enables
writing
applications
across
vendors
and
creates
a
more
attractive
market
for
application
developers.
A
concrete
Thing
Description
can
implement
multiple
</ins><em><ins class="diff-chg">
Thing
Templates
</ins></em><ins class="diff-chg">
and
thus
can
aggregate
function
blocks
into
a
combined
device.
</ins></p><p><ins class="diff-chg">
The
business
models
of
cloud
vendors
are
typically
built
on
managing
thousands
of
identical
devices.
All
devices
with
the
same
Thing
Template
can
be
managed
in
the
same
way
by
cloud
applications.
It
is
easy
to
create
multiple
simulated
devices,
if
the
interface
and
the
instance
are
treated
separately.
</ins></p><p><ins class="diff-chg">
Since
a
Thing
Template
is
a
Thing
Description,
where
some
optional
parts
are
not
present,
it
can
be
serialized
in
the
same
way
and
into
the
same
formats
as
a
thing
description.
</ins></p><section id="thing-template-examples"><h2><ins class="diff-chg">
Thing
Template
Examples
</ins></h2><ins class="diff-chg">
This
section
defines
a
Thing
Template
for
a
lamp
and
a
Thing
Template
for
a
a
buzzer.
The
combined
thing
BuzzerLamp
includes
both
thing
templates.
</ins><section id="lamp-thing-template"><h3><ins class="diff-chg">
Thing
Template:
Lamp
</ins></h3><pre class="example" title=<ins class="diff-chg">
"MyLampThingTemplate serialized in JSON">
    {
        "@context": ["http://www.w3.org/ns/td"], 
        "@type" : "ThingTemplate",
        "id": "urn:dev:wot:com:example:servient:lamp:model",
        "name": "Lamp Thing Template",
        "description" : "Lamp Thing Template",
        "properties": {
            "status": {
                "description" : "current status of the lamp (on|off)",
                "type": "string",
                "readOnly": true
            }
</ins>
        },
<del class="diff-old">        "rel": {
          "type": "string"
</del>
<ins class="diff-chg">        "actions": {
            "toggle": {
                "description" : "Turn the lamp on or off"
            }
</ins>
        },
<del class="diff-old">        "mediatype": {
          "type": "string"
</del>
<ins class="diff-chg">        "events": {
            "overheating": {
                "description" : "Lamp reaches a critical temperature (overheating)",
                "data": {"type": "string"}
            }
</ins>
        }
<del class="diff-old">      },
      "required": [
        "href"
      ],
      "additionalProperties": true
    },
    "securityScheme": {
      "type": "object"
    },
    "url": {
      "type": "string",
      "format": "uri",
      "pattern": "(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(([^#]*))?(#(.*))?"
    },
    "jsonld_url": {
      "type": "string",
      "format": "uri",
      "pattern": "http://[^/?#]*|https://[^/?#]*"
    },
    "data": {
      "title": "Data type",
      "anyOf": [
        {
          "description": "URI of an XSD built-in type",
          "type": "string"
        },
</del>
<ins class="diff-chg">    }
</ins></pre></section><section id="buzzer-thing-template"><h3><ins class="diff-chg">
Thing
Template:
Buzzer
</ins></h3><pre class="example" title=<ins class="diff-chg">
"MyLampThingTemplate serialized in JSON">
    {
        "@context": ["http://www.w3.org/ns/td"], 
        "@type" : "ThingTemplate",
        "id": "urn:dev:wot:com:example:servient:buzzer:template",
        "name": "Buzzer Thing Template",
        "description" : "Thing template of a buzzer that makes noise for 10 seconds",
         "actions": {
            "buzz": {
                "description" : "buzz for 10 seconds"
            }
         }
    }
</ins></pre></section><section id="combination-lamp-buzzer-thingl"><h3><ins class="diff-chg">
Combined
Thing:
Lamp
+
Buzzer
</ins></h3><p><ins class="diff-chg">
The
following
example
illustrates
how
a
combined
thing
can
be
defined
using
two
different
thing
templates.
</ins></p><pre class="example" title=<ins class="diff-chg">
"Combined Thing: Lamp + Buzzer (JSON-LD1.1 serialisation)">
    {
       "@context": ["http://www.w3.org/ns/td"], 
       "@type" : [
            "Thing",
            "urn:dev:wot:com:example:servient:lamp:template",
            "urn:dev:wot:com:example:servient:buzzer:template"
        ],
        "id": "urn:dev:wot:com:example:servient:combinedBuzzerLamp1",
        "name": "My Buzzing Lamp Thing",
        "description" : "A lamp that can issue an alert",
        "security": [{"scheme": "basic"}],
</ins>
        {
<del class="diff-old">          "description": "URI and media type for a complex type (XSD, SenML...)",
          "type": "object",
          "properties": {
            "name": {
              "type": "string"
</del>
<ins class="diff-chg">            "id": "urn:dev:wot:com:example:servient:lamp:template",
            "name": "Lamp Thing Template",
            "description" : "Thing Template for a lamp",
            "properties": {
                "status": {
                    "description" : "current status of the lamp (on|off)",
                    "type": "string",
                    "readOnly": true,
                    "forms": [{
                    "href": "coaps://buzzlamp.example.com/status",
                    "contentType": "application/json"
                    }]
                }
</ins>
            },
<del class="diff-old">            "href": {
              "type": "string"
</del>
<ins class="diff-chg">            "actions": {
                "toggle": {
                    "description" : "Turn on or off the lamp",
                    "forms": [{
                        "href": "coaps://buzzlamp.example.com/toggle",
                        "contentType": "application/json"
                    }]
                }
</ins>
            },
<del class="diff-old">            "mediatype": {
              "type": "string"
</del>
<ins class="diff-chg">            "events": {
                "overheating": {
                    "@type" : "iot:TemperatureAlarm",
                    "description" : "Lamp reaches a critical temperature (overheating)",
                    "data": {"type": "string"},
                    "forms": [{
                        "href": "coaps://buzzlamp.example.com/oh",
                        "contentType": "application/json"
                    }]
                }
</ins>
            }
<del class="diff-old">          },
          "required": [
            "name",
            "href",
            "mediatype"
          ]
</del>
        },
        {
<del class="diff-old">          "$ref": "http://json-schema.org/draft-06/schema#"
        }
      ]
    },
    "dataSchema": {
      "type": "object",
      "properties": {
        "description": {
          "type": "string"
        },
        "enum": {
          "type": "array",
          "items": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "boolean"
              },
              {
                "type": "object"
              },
              {
                "type": "number"
              },
              {
                "type": "array"
              }
            ]
          }
        },
        "type": {
          "type": "string",
          "enum": [
            "string",
            "boolean",
            "object",
            "number",
            "array"
          ]
</del>
<ins class="diff-chg">            "id": "urn:dev:wot:com:example:servient:buzzer:template",
            "name": "Buzzer Thing Template",
            "description" : "Thing Template of a buzzer that makes noise for 10 seconds",
             "actions": {
                "buzz": {
                    "description" : "buzz for 10 seconds",
                    "forms": [{
                        "href": "coaps://buzzlamp.example.com/buzz",
                        "contentType": "application/json"
                    }]
                }
             }
</ins>
        }
<del class="diff-old">      }
</del>
    }
<del class="diff-old">  }
}
</del>
</pre>
</section>
</section>
</section>
<section id="changes" class="appendix">
<del class="diff-old">B.
</del>
<h1>
Recent
Specification
Changes
</h1>
<h2 id="changes3">
Changes
from
<del class="diff-old">Second
</del>
<ins class="diff-chg">Third
</ins>
Public
Working
Draft
</h2>
<ul>
<li>
<del class="diff-old">The
default
serialization
format
for
Thing
Description
</del>
<a href="#multilanguage">
<ins class="diff-chg">Multi-language
</ins></a>
is
<del class="diff-old">now
plain
JSON.
Thing
Description
instances
still
MAY
contain
JSON-LD
keys
</del>
<ins class="diff-chg">supported
for
human-readable
text
</ins>
such
as
<code>
<del class="diff-old">@context
</del>
<ins class="diff-chg">descriptions
</ins>
</code>
and
<code>
<del class="diff-old">@type
for
facilitating
semantic
evaluation
of
TDs.
(see
Section
6.1
Representation
Format
</del>
<ins class="diff-chg">titles
</ins></code>.</li><li>
<a href="#nullschema">
<ins class="diff-new">NullSchema
</ins>
</a>
<del class="diff-old">)
</del>
<ins class="diff-chg">class
was
added.
</ins>
</li>
<li>
<del class="diff-old">With
regards
</del>
<a href="#form">
<ins class="diff-chg">Form
</ins></a><ins class="diff-chg">
class's
now
contains
</ins><code><ins class="diff-chg">
response
</ins></code><ins class="diff-chg">
member
that
can
be
used
</ins>
to
<del class="diff-old">JSON-LD,
this
Thing
Description
draft
uses
JSON-LD
1.1
instead
of
JSON-LD
1.0.
With
this
transition,
all
vocabulary
terms
defined
</del>
<ins class="diff-chg">describe
metadata
for
response
messages.
</ins></li><li><ins class="diff-chg">
A
term
"oneOf"
was
added
</ins>
in
<del class="diff-old">vocabulary
definition
sections
now
have
a
JSON
key
representation.
Previously,
there
</del>
<a href= "#dataschema">
<ins class="diff-chg">DataSchema
</ins></a><ins class="diff-chg">
class.
</ins></li><li><ins class="diff-chg">
Postfix
"Url"
</ins>
were
<del class="diff-old">vocabulary
terms
represented
as
key
values
in
TDs.
</del>
<ins class="diff-chg">removed
from
all
security
terms.
</ins>
</li>
<li>
<del class="diff-old">In
addition
to
Thing
Description
core
vocabulary,
Thing
Description
now
has
the
data
schema
vocabulary
reflecting
a
subset
of
JSON
Schema
terms
as
linked
data
representation
(see
Section
5.3
Data
Schema
Vocabulary
Definition
)
and
the
</del>
<ins class="diff-chg">Add
</ins><code><ins class="diff-chg">
securityDefinitions
</ins></code>,<ins class="diff-chg">
update
examples
using
</ins><code>
security
<del class="diff-old">vocabulary
(see
Section
5.4
</del>
</code>
<ins class="diff-chg">to
use
defined
names,
not
SecurityScheme
objects.
</ins></li><li>
Security
<del class="diff-old">Vocabulary
Definition
</del>
<ins class="diff-chg">and
Privacy
Considerations
section
(Section
</ins><a href= "#sec-security-consideration">
</a>
)
<ins class="diff-new">was
added.
</ins></li><li><ins class="diff-new">
Add
an
</ins><a href= "#ex-21-example-21-securitydefinitions-oauth2_sc-scheme-oauth2-scopes-limited-special-security-oauth2_sc-properties-status-forms-href-https-scopes-example-com-status-contenttype-application-json-scopes-limited-action-configure-forms-href-https-scopes-example-com-configure-contenttype-application-json-scopes-special"><ins class="diff-new">
example
</ins></a>
for
<del class="diff-old">defining
security
based
conditions.
</del>
<ins class="diff-chg">the
use
of
</ins><code><ins class="diff-chg">
scopes
</ins></code>.
</li>
<li>
<del class="diff-old">A
security
field
is
available
at
three
levels
(Thing,
Interaction
Patterns
and
Forms)
</del>
<ins class="diff-chg">Remove
all
Url
postfixes
in
parameter
names
</ins>
for
<del class="diff-old">providing
</del>
security
<del class="diff-old">requirements
for
accessing
resources.
Security
configuration
</del>
<ins class="diff-chg">schemes.
</ins></li><li><ins class="diff-chg">
Make
it
clear
that
the
top-level
</ins><a href= "#security-serialization-json"><code><ins class="diff-chg">
security
</ins></code></a><ins class="diff-chg">
declaration
</ins>
is
<del class="diff-old">mandatory
for
each
</del>
<ins class="diff-chg">mandatory.
</ins></li><li><a href="#dataschema"><ins class="diff-chg">
DataSchema
</ins></a><ins class="diff-chg">
class
now
has
an
optional
</ins>
<code>
<del class="diff-old">form
.
</del>
<ins class="diff-chg">unit
</ins></code><ins class="diff-chg">
member
to
provide
unit
information.
</ins>
</li>
<li>
<del class="diff-old">Some
vocabulary
terms
(e.g.,
</del>
<a href="#link">
<ins class="diff-chg">Link
</ins></a><ins class="diff-chg">
class's
</ins>
<code>
<del class="diff-old">writable
,
</del>
<ins class="diff-chg">mediaType
</ins></code><ins class="diff-chg">
member
was
renamed
to
</ins>
<code>
<del class="diff-old">observable
</del>
<ins class="diff-chg">type
</ins>
</code>,
<ins class="diff-new">and
the
member
was
given
an
improved
description.
</ins></li><li><a href="#form"><ins class="diff-new">
Form
</ins></a><ins class="diff-new">
class's
</ins>
<code>
mediaType
</code>
<del class="diff-old">)
now
have
default
values
that
are
used
by
Thing
Description
processors
when
they
are
absent
in
TD
instances
(see
Section
5.2
Core
Vocabulary
Definition
).
Note
</del>
<ins class="diff-chg">member
was
renamed
to
</ins><code><ins class="diff-chg">
contentType
</ins></code><ins class="diff-chg">
to
reflect
</ins>
that
<del class="diff-old">some
security
vocabulary
terms
</del>
<ins class="diff-chg">it
</ins>
can
<ins class="diff-new">assign
not
only
a
media
type
but
</ins>
also
<del class="diff-old">have
such
values
(see
Section
5.4
Security
Vocabulary
Definition
).
</del>
<ins class="diff-chg">its
parameter
settings.
</ins>
</li>
<li>
<del class="diff-old">Things
</del>
<a href="#action">
<ins class="diff-chg">Action
</ins></a><ins class="diff-chg">
class
</ins>
now
<del class="diff-old">have
a
mandatory
field
</del>
<ins class="diff-chg">has
optional
</ins>
<code>
<del class="diff-old">id
</del>
<ins class="diff-chg">safe
</ins>
</code>
<del class="diff-old">for
uniquely
identifying
a
Thing,
</del>
and
<del class="diff-old">an
optional
field
</del>
<code>
<del class="diff-old">support
</del>
<ins class="diff-chg">idempotent
</ins>
</code>
<ins class="diff-new">members
</ins>
to
provide
information
<del class="diff-old">about
Thing
Description
maintainer.
</del>
<ins class="diff-chg">as
to
the
safeness
and
idempotency
of
the
action.
</ins>
</li>
<li>
<del class="diff-old">Interaction
patterns
have
an
</del>
<a href="#thing">
<ins class="diff-chg">Thing
</ins></a><ins class="diff-chg">
class
now
has
</ins>
optional
<code>
<del class="diff-old">label
</del>
<ins class="diff-chg">created
</ins>
</code>
<del class="diff-old">field
providing
text
for
such
uses
</del>
<ins class="diff-chg">and
</ins><code><ins class="diff-chg">
lastModified
</ins></code><ins class="diff-chg">
members
to
provide
information
</ins>
as
<del class="diff-old">user
interfaces.
The
</del>
<ins class="diff-chg">to
when
the
TD
instance
was
created
(in
the
case
of
</ins>
<code>
<del class="diff-old">rel
</del>
<ins class="diff-chg">created
</ins>
</code>
<del class="diff-old">attribute
for
</del>
<ins class="diff-chg">)
or
was
last
modified
(in
the
case
of
</ins>
<code>
<del class="diff-old">form
</del>
<ins class="diff-chg">lastModified
</ins>
</code>
<del class="diff-old">now
has
enumerated
allowable
values
specified.
</del>
<ins class="diff-chg">).
</ins>
</li>
<li>
<del class="diff-old">JSON-LD
@context
key
value
to
represent
the
Thing
description
context
file
</del>
<ins class="diff-chg">Property
interactions
are
</ins>
now
<del class="diff-old">is
</del>
<ins class="diff-chg">both
readable
and
writable
by
default.
This
can
be
overridden
through
</ins>
<code>
<del class="diff-old">http://www.w3.org/ns/td
.
</del>
<ins class="diff-chg">readOnly
</ins></code><ins class="diff-chg">
and
</ins><code><ins class="diff-chg">
writeOnly
</ins></code><ins class="diff-chg">
member
settings
available
in
</ins><a href= "#dataschema"><ins class="diff-chg">
DataSchema
</ins></a><ins class="diff-chg">
class.
</ins>
</li>
<li>
<del class="diff-old">Added
a
section
about
media
types
used
for
exchanging
TDs.
(see
Section
</del>
<del class="diff-old">6.2
Media
Type
</del>
<a href="#interactionpattern">
<ins class="diff-chg">InteractionPattern
</ins></a><ins class="diff-chg">
class's
</ins><code><ins class="diff-chg">
label
</ins></code><ins class="diff-chg">
member
was
renamed
as
</ins><code><ins class="diff-chg">
title
</ins></code><ins class="diff-chg">
to
be
consistent
with
JSON
Schema.
</ins></li><li>
<a href="#form">
<ins class="diff-new">Form
</ins>
</a>
<del class="diff-old">)
</del>
<ins class="diff-chg">class's
</ins><code><ins class="diff-chg">
rel
</ins></code><ins class="diff-chg">
member
was
renamed
as
</ins><code><ins class="diff-chg">
op
</ins></code>.
</li>
<li>
<del class="diff-old">Added
a
section
about
implementation
notes
</del>
<a href="#event">
<ins class="diff-chg">Event
</ins></a><ins class="diff-chg">
class
now
has
optional
</ins><code><ins class="diff-chg">
subscription
</ins></code><ins class="diff-chg">
and
</ins><code><ins class="diff-chg">
cancellation
</ins></code><ins class="diff-chg">
members
</ins>
that
<del class="diff-old">provide
useful
clarifications
</del>
<ins class="diff-chg">define
data
that
needs
</ins>
to
<del class="diff-old">implementers.
(see
Section
6.3
Implementation
Notes
</del>
<ins class="diff-chg">be
passed
upon
subscription
and
cancellation,
respectively.
</ins></li><li>
<a href="#interactionpattern">
<ins class="diff-new">InteractionPattern
</ins>
</a>
<del class="diff-old">)
</del>
<ins class="diff-chg">class
now
has
an
optional
</ins><code><ins class="diff-chg">
uriVariables
</ins></code><ins class="diff-chg">
member
where
URI
template
variables
can
be
defined.
</ins>
</li>
<li>
<del class="diff-old">A
JSON
Schema
is
provided
in
an
appendix
section
to
facilitate
the
validation
of
Thing
Description
instances.
(see
Section
A.
JSON
Schema
for
TD
Instance
Validation
</del>
<a href="#thing">
<ins class="diff-new">Thing
</ins>
</a>
<del class="diff-old">)
</del>
<ins class="diff-chg">class
now
has
an
optional
</ins><code><ins class="diff-chg">
version
</ins></code><ins class="diff-chg">
member
for
providing
version
information.
</ins>
</li>
</ul>
<h2 id="changes2">
Changes
from
<del class="diff-old">First
</del>
<ins class="diff-chg">Second
</ins>
Public
Working
Draft
</h2>
<p>
Changes
from
<del class="diff-old">First
</del>
<ins class="diff-chg">Second
</ins>
Public
Working
Draft
are
described
in
the
<del class="diff-old">Second
</del>
<a href= "https://www.w3.org/TR/2018/WD-wot-thing-description-20181021/#changes">
<ins class="diff-chg">Third
</ins>
Public
Working
Draft
</a>
</p>
</section>
<section id="acknowledgements" class="appendix normative">
<del class="diff-old">C.
Acknowledgments
</del>
<h1>
<ins class="diff-chg">Acknowledgements
</ins></h1>
<p>
The
editors
would
like
to
thank
Dave
Raggett,
Matthias
Kovatsch,
Michael
McCool,
Michael
Koster,
Victor
Charpenay,
Kawaguchi
Toru,
Michael
Lagally,
Kazuyuki
Ashimura,
María
Poveda,
Daniel
Peintner,
Ben
Francis
for
their
contributions,
comments,
and
guidance.
</p>
</section>
<del class="diff-old">D.
References
D.1
Normative
references
[MEDIATYPES]
Media
Types
.
IANA.
URL:
https://www.iana.org/assignments/media-types/media-types.xhtml
[RFC2119]
Key
words
for
use
in
RFCs
to
Indicate
Requirement
Levels
.
S.
Bradner.
IETF.
March
1997.
Best
Current
Practice.
URL:
https://tools.ietf.org/html/rfc2119
[RFC3986]
Uniform
Resource
Identifier
(URI):
Generic
Syntax
.
T.
Berners-Lee;
R.
Fielding;
L.
Masinter.
IETF.
January
2005.
Internet
Standard.
URL:
https://tools.ietf.org/html/rfc3986
[RFC8259]
The
JavaScript
Object
Notation
(JSON)
Data
Interchange
Format
.
T.
Bray,
Ed..
IETF.
December
2017.
Internet
Standard.
URL:
https://tools.ietf.org/html/rfc8259
[WOT-ARCHITECTURE]
Web
of
Things
Architecture
.
Kazuo
Kajimoto;
Matthias
Kovatsch;
Uday
Davuluru.
W3C.
20
August
2017.
URL:
https://w3c.github.io/wot-architecture/
[WOT-PROTOCOL-BINDING]
Web
of
Things
Protocol
Binding
Templates
.
Michael
Koster.
W3C.
12
January
2018.
URL:
https://w3c.github.io/wot-binding-templates/
D.2
Informative
references
[JSON-SCHEMA-VALIDATION]
JSON
Schema
Validation:
A
Vocabulary
for
Structural
Validation
of
JSON
.
Austin
Wright;
Henry
Andrews;
Geraint
Luff.
IETF.
Internet-Draft.
URL:
https://tools.ietf.org/html/draft-handrews-json-schema-validation-00
[OPENAPI]
OpenAPI
Specification:
Version
3.0.1
.
Darrel
Miller;
Jason
Harmon;
Jeremy
Whitlock;
Kris
Hahn;
Marsh
Gardiner;
Mike
Ralphson;
Rob
Dolin;
Ron
Ratovsky;
Tony
Tam.
OpenAPI
Initiative,
Linux
Foundation.
7
December
2017.
URL:
https://swagger.io/specification/
↑
</del>
</body>
</html>
