<!DOCTYPE html>
<html>

<head>
    <meta charset='utf-8'>
    <title>Thing Description (TD) Ontology</title>
    <script src='https://www.w3.org/Tools/respec/respec-w3c-common' class='remove'></script>
    <script class='remove'>
        var respecConfig = {
            specStatus: "ED",
            editors: [{
                name: "Victor Charpenay"
                , company:    "Siemens AG"
                , companyURL: "https://www.siemens.com/"
            }, {
                name: "Maxime Lefrançois"
                , company:    "École des Mines de Saint-Étienne"
                , companyURL: "https://www.mines-stetienne.fr/"
            }, {
                name: "María Poveda Villalón"
                , company:    "Universidad Politécnica de Madrid"
                , companyURL: "http://www.upm.es/"
            }],
            edDraftURI: "http://www.w3.org/2019/wot/td",
            shortName: "wot-td-ontology"
        };
    </script>
    <style>
        .azlist {
            margin-top: 10pt;
            padding: 5px;
            border: 1px solid #e3dcf2;
        }

        .specterm {
            background: #c7eae5;
            padding-left: 1.5em;
            padding-right: 1.5em;
            padding-top: 0.1ex;
            padding-bottom: 0.1ex;
            margin-top: 1em;
        }

        .specterm h4, .specterm h5, .specterm h6 {
            margin-top: 1em;
            margin-bottom: 1em;
        }

        .specterm table {
            width: 100%;
            margin-top: 0.5em;
            margin-bottom: 0.5em;
            border-collapse: collapse;
        }

        .specterm th, .specterm td {
            padding: 10px;
            border: 1px solid #ddd;
        }

        pre.split-example {
            box-shadow: 5px 5px #0002;
            border: 1px solid #e0cb5299;
        }
    </style>
</head>

<body>
    <section id='abstract'>
        <p>
            The Thing Description (TD) ontology is an RDF axiomatization of the TD information model,
            one of the building blocks of the Web of Things (WoT). Besides providing an alternative
            to the standard JSON representation format for TD documents, the TD ontology can also
            be used to process contextual information on Things and for alignments with other
            WoT-related ontologies. 
        </p>
    </section>
    <section id='sotd'>
        <p>
            Validation of the document by the Working Group is expected by the end of June 2019.
        </p>
    </section>
    <section>
        <h2>Introduction</h2>

        <p>
            The TD ontology is an idiomatic RDF axiomatization of the TD information model [[WOT-THING-DESCRIPTION]],
            which can be used to describe WoT things and their interaction affordances. The TD ontology imports
            the <a href="https://www.w3.org/2019/wot/hypermedia">hypermedia controls</a> ontology.
            However, although the TD information model also includes terms for data schemas and security
            configurations, the TD ontology does not force the use of the corresponding
            <a href="https://www.w3.org/2019/wot/json-schema">JSON schema</a> and
            <a href="https://www.w3.org/2019/wot/security">WoT security</a> vocabularies. Other schema languages
            like SHACL [[shacl]] can thus be leveraged to describe WoT Things.
        </p>
    </section>

    <section id="terminology"> 
        <h2>Terminology</h2>
        
          <p>The fundamental WoT terminology such as
          <dfn>Thing</dfn>,
          <dfn>Consumer</dfn>,
          <dfn>Thing Description</dfn> (<dfn>TD</dfn>),
          <dfn>Interaction Model</dfn>,
          <dfn>Interaction Affordance</dfn>,
          <dfn>Property</dfn>,
          <dfn>Action</dfn>,
          <dfn>Event</dfn>,
          <dfn>Protocol Binding</dfn>,
          <dfn>Servient</dfn>,
          etc. is defined in <a href="https://www.w3.org/TR/wot-architecture/#terminology">Section 3</a>
          of the WoT Architecture specification [[WOT-ARCHITECTURE]].
          </p>

          <p>
            The Thing Description terminology such as
            <dfn>TD Information Model</dfn>,
            <dfn>TD Document</dfn>,
            <dfn>Term</dfn> (<dfn>Vocabulary Term</dfn>),
            etc. is defined in <a href="https://www.w3.org/TR/wot-thing-description/#terminology">Section 3</a>
            of the WoT Thing Description specification [[WOT-THING-DESCRIPTION]].
            
          </p>

    </section>

    {axioms}

    <section>
        <h2>Alignments</h2>

        <p>
            The TD ontology shares commonalities with other WoT-related vocabularies, in particular
            with SSN [[vocab-ssn]], SAREF [[smartM2M]] and <a href="http://schema.org">schema.org</a>.
            Alignments between these vocabularies are provided here.
        </p>

        <p>
            Alignments are definde as rules of the form "if <mi>P</mi>, then <mi>T</mi>",
            where <mi>P</mi> is a SPARQL basic graph pattern and <mi>T</mi> a SPARQL
            template.
        </p>

        <section>
            <h3>SOSA &amp; SSN</h3>

            <table class="def">
                <thead>
                    <tr>
                        <th>If</th>
                        <th>Then</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>
<pre class="nohighlight">
?thing a td:Thing .
</pre>
                        </td>
                        <td>
<pre class="nohighlight">
?thing a [
    a owl:Class ;
    owl:unionOf (
        ssn:System
        sosa:Platform
        sosa:FeatureOfInterest
    )
] .
</pre>
                        </td>
                    </tr>
                    <tr>
                        <td>
<pre class="nohighlight">
?a a td:PropertyAffordance ;
   td:hasForm ?form .
?form hyperm:forOperationType
    "readproperty" .
</pre>
                        </td>
                        <td>
<pre class="nohighlight">
?a a [
    a owl:Restriction ;
    owl:onProperty ssn:forProperty ;
    owl:someValuesFrom sosa:ObservableProperty
] .
</pre>
                        </td>
                    </tr>
                    <tr>
                        <td>
<pre class="nohighlight">
?a a td:PropertyAffordance ;
   td:hasForm ?form .
?form hyperm:forOperationType
    "writeproperty" .
</pre>
                        </td>
                        <td>
<pre class="nohighlight">
?a a [
    a owl:Restriction ;
    owl:onProperty ssn:forProperty ;
    owl:someValuesFrom sosa:ActuatableProperty
] .
</pre>
                        </td>
                    </tr>
                </tbody>
            </table>
        </section>

        <section>
            <h3>SAREF &amp; Extensions</h3>

            <table class="def">
                <thead>
                    <tr>
                        <th>If</th>
                        <th>Then</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>
<pre class="nohighlight">
?device a saref:Device ;
        saref:offers ?service .
</pre>
                        </td>
                        <td>
<pre class="nohighlight">
?device a td:Thing .
</pre>
                        </td>
                    </tr>
                </tbody>
            </table>
        </section>

        <section>
            <h3>Schema.org</h3>

            <table class="def">
                <thead>
                    <tr>
                        <th>If</th>
                        <th>Then</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>
<pre class="nohighlight">
?a a td:InteractionAffordance .
</pre>
                        </td>
                        <td>
<pre class="nohighlight">
?a a schema:Action ;
   schema:actionStatus
       schema:PotentialActionStatus .
</pre>
                        </td>
                    </tr>
                    <tr>
                        <td>
<pre class="nohighlight">
?thing td:hasInteractionAffordance ?a .
</pre>
                        </td>
                        <td>
<pre class="nohighlight">
?thing schema:potentialAction ?a .
</pre>
                        </td>
                    </tr>
                </tbody>
            </table>
        </section>
    </section>
    
    <section>
        <h2>Usage Examples</h2>

        <section>
            <h3>Merging Thing Descriptions</h3>

            <p>
                The following example includes two TD documents in the standard TD JSON
                representation format [[WOT-THING-DESCRIPTION]], identified by a unique
                electronic product code [[RFC5134]].
            </p>

            <p>
                If these two documents are being merged together with contextual information
                in the form of an RDF graph that uses the same identifiers, it is possible
                to retrieve form metadata of these TDs depending on the relations that
                exist between Things. Here, the two Things share information on room 101
                of some example building.
            </p>

<aside class="example" title="Merging of two TD documents and a logical map of a building">
<pre class="split-example">
{
    "@context": "https://www.w3.org/2019/wot/td/v1",
    "id": "urn:epc:id:sgtin:900100.0003456.1234567",
    "title" : "HVAC System",
    "@type": "https://w3id.org/saref#HVAC",
    ...
    "properties": {
        "status": {
            "type": "boolean",
            "forms": [...]
        }
    }
}
</pre>
<pre class="split-example">
{
    "@context": "https://www.w3.org/2019/wot/td/v1",
    "id": "urn:epc:id:sgtin:900200.1234000.9876543",
    "title" : "TemperatureSensor",
    "@type": "https://w3id.org/saref#TemperatureSensor",
    ...
    "properties": {
        "temperature": {
            "type": "number",
            "forms": [...]
        }
    }
}
</pre>
<pre class="split-example">
{
    "@context": {
        "bot": "https://w3id.org/bot#",
        "brick": "https://brickschema.org/schema/1.0.3/BrickFrame#"
    },
    "@graph": [
        {
            "@id": "tag:room_101",
            "@type": "bot:Space",
            "bot:containsElement": {
                "@id": "urn:epc:id:sgtin:900200.1234000.9876543"
            }
        },
        {
            "@id": "urn:epc:id:sgtin:900100.0003456.1234567",
            "brick:feeds": {
                "@id": "tag:room_101"
            }
        }
    ]
}
</pre>
</aside>
        </section>

        <section>
            <h3>Internal State of a Thing</h3>

            <p>
                It is possible for affordances of different kinds to have the same effect.
                For instance, an affordance to a writable property may be equivalent to
                an affordance to invoke an action that changes the property value.
                Similarly, for every observable property, there may be an equivalent
                affordance to subscribe to an event that occurs at every property value change.
            </p>

            <p>
                WoT clients can avoid having to deal with these discrepancies by
                using the generic <code>td:hasInteractionAffordance</code> predicate.
                They can then decide to perform an action based solely on the operation type
                of the form embedded in the affordance object.
            </p>

<aside class="example" title="Alternative affordances to read/write a property value">
<pre class="split-example">
{
    "@context": "https://www.w3.org/2019/wot/td/v1",
    "id": "urn:epc:id:sgtin:900300.1234000.9876543",
    "title" : "LED Lamp",
    ...
    "properties": {
        "status": {
            "ssn:forProperty": { "@type": "saref:OnOffState" },
            "type": "boolean",
            "forms": [
                {
                    "href": "http://example.org/status",
                    "op": "writeproperty"
                },
                {
                    "href": "http://example.org/status",
                    "op": "observeproperty"
                }
            ]
        }
    }
}
</pre>
<pre class="split-example">
{
    "@context": "https://www.w3.org/2019/wot/td/v1",
    "actions": {
        "change": {
            "ssn:forProperty": { "@type": "saref:OnOffState" },
            "input": { "type": "boolean" },
            "forms": [
                {
                    "href": "http://example.org/status/change",
                    "op": "invokeaction"
                }
            ]
        }
    }
}
</pre>
<pre class="split-example">
{
    "@context": "https://www.w3.org/2019/wot/td/v1",
    "events": {
        "changed": {
            "ssn:forProperty": { "@type": "saref:OnOffState" },
            "data": { "type": "boolean" },
            "forms": [
                {
                    "href": "http://example.org/status/changed",
                    "op": "subscribeevent"
                }
            ]
        }
    }
}
</pre>
</aside>
        </section>

        <section>
            <h3>Specifying Affordances by Device Classes</h3>

            <p>
                It is possible to use the TD ontology to extend the definition of
                well-known subclasses of <code>Thing</code> by defining expected
                affordances that Things of such types should present. The
                following example specifies that every temperature sensor presents
                an affordance to a temperature property (expressed in the SAREF
                vocabulary [[smartM2M]]).
            </p>

<aside class="example" title="OWL axiom for affordances provided by a temperature sensor">
<pre>
@prefix rdfs: &lt;http://www.w3.org/2000/01/rdf-schema#&gt; .
@prefix owl: &lt;http://www.w3.org/2002/07/owl#&gt; .
@prefix saref: &lt;https://w3id.org/saref#&gt; .
@prefix td: &lt;https://www.w3.org/2019/wot/td#&gt; .
@prefix ex: &lt;http://example.org/&gt; .
@prefix ssn: &lt;http://www.w3.org/ns/ssn/&gt; .

saref:TemperatureSensor rdfs:subClassOf [
        a owl:Restriction ;
        owl:onProperty td:hasPropertyAffordance ;
        owl:someValuesFrom ex:TemperatureAffordance
    ] .

ex:TemperatureAffordance rdfs:subClassOf [
        a owl:Restriction ;
        owl:onProperty ssn:forProperty ;
        owl:someValuesFrom saref:Temperature
    ] .
</pre>
</aside>
        </section>
    </section>
</body>

</html>